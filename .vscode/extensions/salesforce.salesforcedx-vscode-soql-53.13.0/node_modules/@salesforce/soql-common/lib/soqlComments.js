"use strict";
/*
 *  Copyright (c) 2021, salesforce.com, inc.
 *  All rights reserved.
 *  Licensed under the BSD 3-Clause license.
 *  For full license text, see LICENSE.txt file in the repo root or https://opensource.org/licenses/BSD-3-Clause
 *
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseHeaderComments = void 0;
function parseHeaderComments(originalSoqlText) {
    const [, headerComments, soqlText] = HEADER_COMMENT_EXTRACTION_REGEX.exec(originalSoqlText) || [];
    const commentLineCount = (headerComments.match(/(\n|\r|\r\n)/g) || []).length;
    const headerPaddedSoqlText = originalSoqlText.replace(HEADER_COMMENT_EXTRACTION_REGEX, (wholeMatch, headerText, soqlText) => headerText.replace(/[^\n\r]/gm, ' ') + soqlText);
    const result = {
        headerComments,
        headerPaddedSoqlText,
        soqlText,
        commentLineCount,
        originalSoqlText,
    };
    return result;
}
exports.parseHeaderComments = parseHeaderComments;
const COMMENT_LINE = /(?:[\s]*\/\/.*?[\r\n])/;
const EMPTY_LINE = /(?:^[\s]*[\r\n])/;
const OPTIONAL_HEADER_LINES = new RegExp('((?:' + COMMENT_LINE.source + '|' + EMPTY_LINE.source + ')*)');
const ANYTHING = /([^]*)/;
const HEADER_COMMENT_EXTRACTION_REGEX = new RegExp(OPTIONAL_HEADER_LINES.source + ANYTHING.source, 'm');
//# sourceMappingURL=soqlComments.js.map