{"version":3,"sources":[".././client/node_modules/applicationinsights/out/AutoCollection/Console.js",".././client/node_modules/applicationinsights/out/AutoCollection/CorrelationContextManager.js",".././client/node_modules/applicationinsights/out/AutoCollection/Exceptions.js",".././client/node_modules/applicationinsights/out/AutoCollection/HttpDependencies.js",".././client/node_modules/applicationinsights/out/AutoCollection/HttpDependencyParser.js",".././client/node_modules/applicationinsights/out/AutoCollection/HttpRequestParser.js",".././client/node_modules/applicationinsights/out/AutoCollection/HttpRequests.js",".././client/node_modules/applicationinsights/out/AutoCollection/Performance.js",".././client/node_modules/applicationinsights/out/AutoCollection/RequestParser.js",".././client/node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/bunyan.sub.js",".././client/node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/console.sub.js",".././client/node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/initialization.js",".././client/node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mongodb.sub.js",".././client/node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mysql.sub.js",".././client/node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/postgres.sub.js",".././client/node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/redis.sub.js",".././client/node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/winston.sub.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Constants.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/AvailabilityData.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/Base.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/ContextTagKeys.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/Data.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPoint.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPointType.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/Domain.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/Envelope.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/EventData.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionData.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionDetails.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/MessageData.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/MetricData.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/PageViewData.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/RemoteDependencyData.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/RequestData.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/SeverityLevel.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/StackFrame.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/Generated/index.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TelemetryType.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/index.js",".././client/node_modules/applicationinsights/out/Declarations/Contracts/index.js",".././client/node_modules/applicationinsights/out/Library/Channel.js",".././client/node_modules/applicationinsights/out/Library/Config.js",".././client/node_modules/applicationinsights/out/Library/Context.js",".././client/node_modules/applicationinsights/out/Library/CorrelationIdManager.js",".././client/node_modules/applicationinsights/out/Library/EnvelopeFactory.js",".././client/node_modules/applicationinsights/out/Library/Logging.js",".././client/node_modules/applicationinsights/out/Library/NodeClient.js",".././client/node_modules/applicationinsights/out/Library/RequestResponseHeaders.js",".././client/node_modules/applicationinsights/out/Library/Sender.js",".././client/node_modules/applicationinsights/out/Library/TelemetryClient.js",".././client/node_modules/applicationinsights/out/Library/Util.js",".././client/node_modules/applicationinsights/out/TelemetryProcessors/SamplingTelemetryProcessor.js",".././client/node_modules/applicationinsights/out/TelemetryProcessors/index.js",".././client/node_modules/applicationinsights/out/applicationinsights.js",".././client/node_modules/diagnostic-channel-publishers/dist/src/bunyan.pub.js",".././client/node_modules/diagnostic-channel-publishers/dist/src/console.pub.js",".././client/node_modules/diagnostic-channel-publishers/dist/src/index.js",".././client/node_modules/diagnostic-channel-publishers/dist/src/mongodb-core.pub.js",".././client/node_modules/diagnostic-channel-publishers/dist/src/mongodb.pub.js",".././client/node_modules/diagnostic-channel-publishers/dist/src/mysql.pub.js",".././client/node_modules/diagnostic-channel-publishers/dist/src/pg-pool.pub.js",".././client/node_modules/diagnostic-channel-publishers/dist/src/pg.pub.js",".././client/node_modules/diagnostic-channel-publishers/dist/src/redis.pub.js",".././client/node_modules/diagnostic-channel-publishers/dist/src/winston.pub.js","..//Users/ahasan/salesforce-ux/salesforcedx-vscode-slds/client/node_modules/diagnostic-channel-publishers/dist/src|sync|/^.*\\/lib\\/Connection$/","..//Users/ahasan/salesforce-ux/salesforcedx-vscode-slds/client/node_modules/diagnostic-channel-publishers/dist/src|sync|/^.*\\/lib\\/Pool$/",".././client/node_modules/diagnostic-channel/dist/src/channel.js",".././client/node_modules/diagnostic-channel/dist/src/patchRequire.js",".././client/node_modules/semver/semver.js",".././client/node_modules/vscode-jsonrpc/lib/cancellation.js",".././client/node_modules/vscode-jsonrpc/lib/events.js",".././client/node_modules/vscode-jsonrpc/lib/is.js",".././client/node_modules/vscode-jsonrpc/lib/linkedMap.js",".././client/node_modules/vscode-jsonrpc/lib/main.js",".././client/node_modules/vscode-jsonrpc/lib/messageReader.js",".././client/node_modules/vscode-jsonrpc/lib/messageWriter.js",".././client/node_modules/vscode-jsonrpc/lib/messages.js",".././client/node_modules/vscode-jsonrpc/lib/pipeSupport.js",".././client/node_modules/vscode-jsonrpc/lib/socketSupport.js",".././client/node_modules/vscode-languageclient/lib/callHierarchy.proposed.js",".././client/node_modules/vscode-languageclient/lib/client.js",".././client/node_modules/vscode-languageclient/lib/codeConverter.js",".././client/node_modules/vscode-languageclient/lib/colorProvider.js",".././client/node_modules/vscode-languageclient/lib/configuration.js",".././client/node_modules/vscode-languageclient/lib/declaration.js",".././client/node_modules/vscode-languageclient/lib/foldingRange.js",".././client/node_modules/vscode-languageclient/lib/implementation.js",".././client/node_modules/vscode-languageclient/lib/main.js",".././client/node_modules/vscode-languageclient/lib/progress.js",".././client/node_modules/vscode-languageclient/lib/progressPart.js",".././client/node_modules/vscode-languageclient/lib/protocolCodeLens.js",".././client/node_modules/vscode-languageclient/lib/protocolCompletionItem.js",".././client/node_modules/vscode-languageclient/lib/protocolConverter.js",".././client/node_modules/vscode-languageclient/lib/protocolDocumentLink.js",".././client/node_modules/vscode-languageclient/lib/selectionRange.js",".././client/node_modules/vscode-languageclient/lib/semanticTokens.proposed.js",".././client/node_modules/vscode-languageclient/lib/typeDefinition.js",".././client/node_modules/vscode-languageclient/lib/utils/async.js",".././client/node_modules/vscode-languageclient/lib/utils/is.js",".././client/node_modules/vscode-languageclient/lib/utils/processes.js",".././client/node_modules/vscode-languageclient/lib/utils/uuid.js",".././client/node_modules/vscode-languageclient/lib/workspaceFolders.js",".././client/node_modules/vscode-languageclient/node_modules/semver/semver.js",".././client/node_modules/vscode-languageserver-protocol/lib/main.js",".././client/node_modules/vscode-languageserver-protocol/lib/messages.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.callHierarchy.proposed.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.progress.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.selectionRange.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.sematicTokens.proposed.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js",".././client/node_modules/vscode-languageserver-protocol/lib/utils/is.js",".././client/node_modules/vscode-languageserver-types/lib/esm/main.js",".././client/node_modules/zone.js/dist/zone-node.js",".././client/src/commands/index.ts",".././client/src/constants.ts",".././client/src/context/context.ts",".././client/src/context/contextKey.ts",".././client/src/context/index.ts",".././client/src/extension.ts",".././client/src/settings/index.ts",".././client/src/settings/sfdxCoreSettings.ts",".././client/src/sldsAuraTokensProvider.ts",".././client/src/sldsComponentsProvider.ts",".././client/src/sldsLanguageClient.ts",".././client/src/sldsUtilitiesProvider.ts",".././client/src/sldsVarTokensProvider.ts",".././client/src/telemetry/cliConfiguration.ts",".././client/src/telemetry/index.ts",".././client/src/telemetry/telemetry.ts",".././client/src/telemetry/telemetryReporter.ts",".././client/src/telemetry/utils.ts",".././client/src/utilities.ts","../external \"child_process\"","../external \"console\"","../external \"constants\"","../external \"crypto\"","../external \"events\"","../external \"fs\"","../external \"http\"","../external \"https\"","../external \"module\"","../external \"net\"","../external \"os\"","../external \"path\"","../external \"stream\"","../external \"timers\"","../external \"url\"","../external \"util\"","../external \"vscode\"","../external \"zlib\"","../webpack/bootstrap","../webpack/startup","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object"],"names":["DiagChannel","AutoCollectConsole","client","INSTANCE","Error","this","_client","prototype","enable","isEnabled","collectConsoleLog","IsInitialized","isInitialized","_isInitialized","dispose","_methodNames","module","exports","Object","defineProperty","value","Logging","CorrelationContextManager","getCurrentContext","enabled","Zone","current","get","generateContextObject","operationId","parentId","operationName","correlationContextHeader","operation","name","id","customProperties","CustomPropertiesImpl","runWithContext","context","fn","fork","properties","run","wrapCallback","wrap","isNodeVersionCompatible","hasEverEnabled","e","warn","registerContextPreservation","cb","patchError","patchTimers","disable","nodeVer","process","versions","node","split","parseInt","methodNames","forEach","methodName","orig","global","ret","apply","arguments","toString","data","handleId","call","AppInsightsAsyncCorrelatedErrorWrapper","create","stackRewrite","prepareStackTrace","stackTrace","s","foundOne","i","length","fileName","getFileName","indexOf","Math","max","splice","stack","stackFrames","trim","map","v","startIndex","substr","join","props","getOwnPropertyNames","concat","keys","propertyName","hiddenPropertyName","enumerable","writable","getOwnPropertyDescriptor","header","addHeaderData","keyvals","keyval","parts","key","serializeToHeader","getProperty","prop","setProperty","val","bannedCharacters","test","push","AutoCollectExceptions","configurable","_this","_exceptionListenerHandle","handle","reThrow","error","trackException","exception","flush","isAppCrashing","bind","_rejectionListenerHandle","on","UNCAUGHT_EXCEPTION_HANDLER_NAME","UNHANDLED_REJECTION_HANDLER_NAME","removeListener","undefined","http","https","Util","RequestResponseHeaders","HttpDependencyParser","CorrelationContextManager_1","AutoCollectHttpDependencies","_isEnabled","_initialize","originalRequest","request","originalHttpsRequest","clientRequestPatch","options","shouldCollect","disableCollectionRequestOption","alreadyAutoCollectedFlag","trackRequest","requestArgs","_i","_a","end","telemetry","requestParser","currentContext","uniqueRequestId","requestNumber","canIncludeCorrelationHeader","getUrl","getHeader","setHeader","config","correlationId","correlationHeader","requestContextHeader","components","key_1","requestContextSourceKey","some","substring","requestIdHeader","parentIdHeader","rootIdHeader","response","onResponse","dependencyTelemetry","getDependencyTelemetry","contextObjects","trackDependency","onError","info","extendStatics","__extends","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","url","Contracts","RequestParser","CorrelationIdManager","_super","requestOptions","method","_getUrlFromRequestOptions","startTime","Date","_setStatus","statusCode","getCorrelationContextTarget","requestContextTargetKey","baseTelemetry","dependencyId","urlObject","parse","search","hash","dependencyName","toUpperCase","pathname","remoteDependencyType","RemoteDependencyDataConstants","TYPE_HTTP","remoteDependencyTarget","hostname","TYPE_AI","correlationIdPrefix","duration","success","_isSuccess","resultCode","dependencyTypeName","target","originalOptions_1","path","parsedQuery","host","port","protocol","agent","format","HttpRequestParser","requestId","_getAbsoluteUrl","socketRemoteAddress","socket","remoteAddress","parseHeaders","connection","connectionRemoteAddress","legacySocketRemoteAddress","ellapsedMilliseconds","getRequestTelemetry","requestTelemetry","source","sourceCorrelationId","getRequestTags","tags","newTags","locationIp","_getIp","sessionId","_getId","userId","userAuthUserId","getOperationName","operationParentId","getOperationParentId","getOperationId","getRequestId","getCorrelationContextHeader","headers","encrypted","requestUrl","pathName","ipMatch","check","str","results","exec","ip","rawHeaders","cookie","parseId","getCookie","userAgent","generateRequestId","rootId","getRootId","cookieValue","ContextTagKeys","AutoCollectPerformance","AutoCollectHttpRequests","_isAutoCorrelating","useAutoCorrelation","isAutoCorrelating","_generateCorrelationContext","wrapOnRequestHandler","onRequest","requestParser_1","correlationContext","countRequest","wrapServerEventHandler","server","originalAddListener","addListener","eventType","eventHandler","originalHttpServer","createServer","originalHttpsServer","trackRequestSync","addResponseCorrelationIdHeader","endRequest","_requestParser","once","headersSent","tagOverrides","os","_handle","_lastCpus","cpus","_lastRequests","totalRequestCount","_totalRequestCount","totalFailedRequestCount","_totalFailedRequestCount","time","setInterval","trackPerformance","unref","clearInterval","start","_lastRequestExecutionTime","_trackCpu","_trackMemory","_trackNetwork","totalUser","totalSys","totalNice","totalIdle","totalIrq","cpu","lastCpu","times","model","speed","lastTimes","user","sys","nice","idle","irq","combinedTotal","trackMetric","freeMem","freemem","usedMem","memoryUsage","rss","lastRequests","requests","intervalRequests","elapsedMs","requestsPerSec","status","endTime","message","Contracts_1","diagnostic_channel_1","clients","bunyanToAILevelMap","10","SeverityLevel","Verbose","20","30","Information","40","Warning","50","60","Critical","subscriber","event","AIlevel","level","trackTrace","result","severity","channel","subscribe","filter","c","unsubscribe","lastIndexOf","stderr","env","publishers","unpatchedModules","modules","bunyan","console","mongodb","mongodbCore","mysql","redis","pg","pgPool","winston","mod","dbName","startedData","databaseName","commandName","succeeded","queryObj","query","sqlString","sql","err","connectionConfig","_connection","socketPath","q","preparable","text","plan","conn","database","commandObj","command","address","winstonToAILevelMap","syslog","og","emerg","alert","crit","warning","notice","debug","npm","verbose","silly","unknown","levelKind","meta","Generated_1","domainSupportsProperties","domain","EventData","ExceptionData","MessageData","MetricData","PageViewData","RemoteDependencyData","RequestData","AvailabilityData","ver","measurements","applicationVersion","deviceId","deviceLocale","deviceModel","deviceOEMName","deviceOSVersion","deviceType","operationSyntheticSource","operationCorrelationVector","sessionIsFirst","userAccountId","cloudRole","cloudRoleInstance","internalSdkVersion","internalAgentVersion","internalNodeName","Data","DataPointType","kind","Measurement","sampleRate","exceptions","hasFullStack","parsedStack","metrics","Base","DataPoint","Domain","Envelope","ExceptionDetails","StackFrame","TelemetryType","telemetryTypeToBaseType","type","Event","Exception","Trace","Metric","Request","Dependency","baseTypeToTelemetryType","baseType","m","__export","Channel","isDisabled","getBatchSize","getBatchIntervalMs","sender","_buffer","_lastSend","_isDisabled","_getBatchSize","_getBatchIntervalMs","_sender","setUseDiskRetryCaching","resendInterval","maxBytesOnDisk","setDiskRetryMode","send","envelope","payload","_stringify","triggerSend","_timeoutHandle","setTimeout","isNodeCrashing","callback","bufferIsEmpty","batch","saveOnCrash","Buffer","clearTimeout","JSON","stringify","Config","instrumentationKey","endpointBase","_getInstrumentationKey","endpointUrl","maxBatchSize","maxBatchIntervalMs","disableAppInsights","samplingPercentage","correlationIdRetryIntervalMs","correlationHeaderExcludedDomains","setCorrelationId","profileQueryEndpoint","ENV_profileQueryEndpoint","proxyHttpUrl","ENV_http_proxy","proxyHttpsUrl","ENV_https_proxy","httpAgent","httpsAgent","_profileQueryEndpoint","set","endpoint","cancelCorrelationIdQuery","queryCorrelationId","iKey","ENV_iKey","ENV_azurePrefix","legacy_ENV_iKey","fs","Context","packageJsonPath","_loadApplicationContext","_loadDeviceContext","_loadInternalContext","resolve","__dirname","appVersion","packageJson","readFileSync","version","release","DefaultRoleName","arch","platform","sdkVersion","appIdUrlString","completedLookups","pendingLookups","fetchAppId","disableAppInsightsAutoCollection","TAG","req","makeRequest","res","appId_1","setEncoding","suffix","currentRootId","appendSuffix","generateRootId","endIndex","w3cTraceId","delimiter","requestIdMaxLength","trimPosition","randomu32","EnvelopeFactory","createEnvelope","telemetryType","commonProperties","createTraceData","createDependencyData","createEventData","createExceptionData","createRequestData","createMetricData","baseData","validateStringMap","replace","getTags","toISOString","trace","isNaN","severityLevel","remoteDependency","msToTimeSpan","exceptionDetails","typeName","parseStack","isArray","requestData","responseCode","metric","count","Aggregation","min","stdDev","frames","totalSizeInBytes","frame","_StackFrame","regex","parsedFrame","sizeInBytes","left","right","size","acceptedLeft","acceptedRight","howMany","assembly","matches","match","line","baseSize","optionalParams","enableDebug","disableWarnings","TelemetryClient","ServerRequestTracking","ClientRequestTracking","NodeClient","trackNodeHttpRequestSync","trackNodeHttpRequest","trackNodeHttpDependency","zlib","child_process","Sender","onSuccess","_config","_onSuccess","_onError","_enableDiskRetryMode","_resendInterval","WAIT_BETWEEN_RESEND","_maxBytesOnDisk","MAX_BYTES_ON_DISK","_numConsecutiveFailures","OS_PROVIDES_FILE_PROTECTION","USE_ICACLS","existsSync","ICACLS_PATH","floor","withCredentials","gzip","buffer","dataToSend","responseString","_sendFirstFileOnDisk","_storeToDisk","MAX_CONNECTION_FAILURES_BEFORE_WARN","_onErrorHelper","errorMessage","write","_storeToDiskSync","_runICACLS","args","aclProc","spawn","windowsHide","code","signal","_runICACLSSync","spawnSync","_getACLIdentity","ACL_IDENTITY","psProc","POWERSHELL_PATH","stdio","stdout","_getACLIdentitySync","_getACLArguments","directory","identity","_applyACLRules","ACLED_DIRECTORIES","_applyACLRulesSync","_confirmDirExists","lstat","stats","mkdir","isDirectory","_getShallowDirectorySize","readdir","files","totalSize","stat","fileStats","isFile","_getShallowDirectorySizeSync","readdirSync","statSync","tmpdir","TEMPDIR_PREFIX","getTime","fileFullPath","writeFile","mode","mkdirSync","dirSize","writeFileSync","tempDir","exists","f","basename","firstFile","filePath","readFile","unlink","systemdrive","TelemetryProcessors","_telemetryProcessors","track","isError","trackEvent","accepted","runTelemetryProcessors","samplingTelemetryProcessor","addTelemetryProcessor","telemetryProcessor","clearTelemetryProcessors","telemetryProcessorsCount","processor","__assign","assign","t","n","constants","cookieName","cookies","int32ArrayToBase64","array","toChar","String","fromCharCode","x","random32","random","tmp","hexValues","oct","a","clockSequenceHi","obj","isPrimitive","input","propType","isDate","totalms","sec","toFixed","hour","days","extractError","looseError","extractObject","origProperty","toJSON","field","property","stringTarget","MAX_PROPERTY_LENGTH","excludedDomains","RegExp","contextHeaders","keyValues","keyValue","requestCallback","requestUrlParsed","proxyUrl","proxyUrlParsed","Host","isHttps","tlsRestrictedAgent","Agent","secureOptions","SSL_OP_NO_SSLv2","SSL_OP_NO_SSLv3","SSL_OP_NO_TLSv1","SSL_OP_NO_TLSv1_1","getSamplingHashCode","csharpMax","charCodeAt","abs","_console","_exceptions","_performance","_serverRequests","_clientRequests","_isConsole","_isConsoleLog","_isExceptions","_isPerformance","_isRequests","_isDependencies","_isDiskRetry","_isCorrelating","_diskRetryInterval","_diskRetryMaxBytes","_isStarted","defaultClient","Configuration","setup","getCorrelationContext","wrapWithCorrelationContext","setAutoCollectConsole","setAutoCollectExceptions","setAutoCollectPerformance","setAutoCollectRequests","setAutoCollectDependencies","setAutoDependencyCorrelation","setInternalLogging","enableDebugLogging","enableWarningLogging","versionSpecifier","patch","originalBunyan","originalEmit","_emit","rec","noemit","publish","registerMonkeyPatch","stream_1","originalConsole","aiLoggingOutStream","Writable","aiLoggingErrStream","chunk","aiLoggingConsole","Console","_loop_1","originalMethod","consoleMethods_1","consolePub","mongoCore2","originalMongoCore","originalConnect","Server","connect","originalWrite","pool","cbidx","bindToContext","originalLogout","logout","mongo2","originalMongo","listener","instrument","operationIdGenerator","next","eventMap","originalMysql","originalMysqlPath","patchObjectFunction","func","cbWrapper","originalFunc","resultContainer","hrtime","patchClassMemberFunction","classObject","connectionClass","dirname","hrDuration","callbackArgs","poolClass","postgresPool1","originalPgPool","events_1","postgres6","originalPg","originalPgPath","originalClientQuery","Client","diagnosticOriginalFunc","values","queryResult","connectionParameters","patchCallback","trackingCallback","rowCount","ceil","EventEmitter","emit","originalRedis","originalSend","RedisClient","internal_send_command","cb_1","pubsubBound","address_1","startTime_1","originalWinston","curLevels","originalLog","Logger","log","loggingFilter","levels","filters","webpackEmptyContext","patchRequire_1","patchRequire_2","makePatchingRequire","trueFilter","publishing","ContextPreservingEventEmitter","subscribers","contextPreservationFunction","knownPatches","currentlyPublishing","shouldPublish","listeners","standardEvent_1","timestamp","now","index","reset","addContextPreservation","preserver","previousPreservationStack","packageName","patcher","getPatchesObject","diagnosticsSource","require","semver","moduleModule","nativeModules","binding","originalRequire","patchedModules","moduleId","originalModule","modulePath","_resolveFilename","moduleVersion","prereleaseTagIndex","modifiedModule","modulePatcher","satisfies","SemVer","NODE_DEBUG","slice","unshift","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","Number","re","src","R","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULL","FULLPLAIN","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","includePrerelease","er","TypeError","raw","major","minor","prerelease","num","build","valid","clean","compare","other","compareMain","comparePre","compareIdentifiers","inc","identifier","diff","version1","version2","eq","v1","v2","prefix","defaultResult","numeric","anum","bnum","gt","lt","neq","gte","lte","cmp","op","Comparator","comp","ANY","operator","rcompareIdentifiers","compareLoose","rcompare","sort","list","rsort","Range","range","parseRange","isX","toLowerCase","hyphenReplace","$0","from","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","comparators","high","low","comparator","r","intersects","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","_","M","pr","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","every","thisComparator","rangeComparators","rangeComparator","toComparators","maxSatisfying","maxSV","rangeObj","minSatisfying","minSV","minVersion","minver","compver","validRange","ltr","gtr","parsed","r1","r2","coerce","Is","CancellationToken","None","freeze","isCancellationRequested","onCancellationRequested","Cancelled","is","candidate","boolean","shortcutEvent","MutableToken","_isCancelled","_emitter","fire","Emitter","CancellationTokenSource","_token","cancel","Disposable","_disposable","CallbackList","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","len","callbacks","contexts","_options","_event","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","invoke","string","number","stringArray","elem","Touch","First","Last","LinkedMap","_map","Map","_head","_tail","_size","clear","has","item","touch","previous","addItemLast","addItemFirst","delete","removeItem","callbackfn","thisArg","messages_1","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ResponseError","ErrorCodes","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","MessageReader","StreamMessageReader","IPCMessageReader","SocketMessageReader","messageWriter_1","MessageWriter","StreamMessageWriter","IPCMessageWriter","SocketMessageWriter","cancellation_1","linkedMap_1","CancelNotification","ProgressNotification","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionState","ProgressType","NullLogger","fromString","Off","Messages","Text","ConnectionError","super","_createMessageConnection","messageReader","messageWriter","logger","strategy","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","starRequestHandler","starNotificationHandler","timer","tracer","requestHandlers","notificationHandlers","progressHandlers","messageQueue","responsePromises","requestTokens","traceFormat","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","triggerMessageQueue","setImmediate","shift","isRequestMessage","requestMessage","reply","resultOrError","jsonrpc","toJson","traceSendingResponse","replyError","params","logLSPMessage","traceReceivedRequest","requestHandler","element","handler","cancellationSource","tokenKey","handlerResult","numberOfParams","token","promise","then","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","traceReceivedNotification","handleNotification","isResponseMessage","responseMessage","responsePromise","timerStart","traceReceivedResponse","reject","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","onClose","toCancel","queue","addMessageToQueue","lspMessage","isLSPMessage","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","sendNotification","messageParams","notificationMessage","traceSendingNotification","onNotification","onProgress","_type","sendProgress","onUnhandledProgress","sendRequest","throwIfNotListening","last","Promise","traceSendingRequest","MessageWriteError","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","listen","AlreadyListening","throwIfListening","inspect","ConnectionStrategy","createMessageConnection","output","read","isMessageWriter","DefaultSize","CR","LF","MessageBuffer","encoding","allocUnsafe","toAppend","bufferLen","byteLength","copy","newSize","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","readable","_partialMessageTimeout","timeout","nextMessageLength","messageToken","partialMessageTimer","onData","fireError","fireClose","append","tryReadHeaders","contentLength","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","firePartialMessage","waitingTime","eventEmitter","ContentLength","CRLF","AbstractMessageWriter","errorCount","sending","doWriteMessage","destroy","handleError","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","ContentModified","MessageReadError","AbstractMessageType","_method","_numberOfParams","path_1","os_1","crypto_1","net_1","generateRandomPipeName","randomSuffix","randomBytes","createClientPipeTransport","pipeName","connectResolve","connected","_reject","close","onConnected","createServerPipeTransport","createConnection","createClientSocketTransport","createServerSocketTransport","vscode_1","vscode_languageserver_protocol_1","client_1","ensure","protocol2code","code2protocol","asCallHierarchyItem","converter","CallHierarchyItem","asSymbolKind","detail","asUri","uri","asRange","selectionRange","asSymbolTags","asCallHierarchyIncomingCall","CallHierarchyIncomingCall","asRanges","fromRanges","asCallHierarchyOutgoingCall","CallHierarchyOutgoingCall","asCallHierarchyItems","items","asCallHierarchyIncomingCalls","asCallHierarchyOutgoingCalls","CallHierarchyProvider","middleware","clientOptions","document","position","prepareCallHierarchy","code2ProtocolConverter","asTextDocumentPositionParams","Proposed","CallHierarchyPrepareRequest","protocol2CodeConverter","logFailedRequest","provideCallHierarchyIncomingCalls","CallHierarchyIncomingCallsRequest","provideCallHierarchyOutgoingCalls","CallHierarchyOutgoingCallsRequest","provideCallHierarchyOutgingCalls","CallHierarchyFeature","TextDocumentFeature","cap","dynamicRegistration","documentSelector","capabilities","getRegistration","callHierarchyProvider","register","messages","registerOptions","provider","languages","registerCallHierarchyProvider","c2p","p2c","async_1","UUID","progressPart_1","ConsoleLogger","ErrorAction","CloseAction","RevealOutputChannelOn","State","ClientState","DefaultErrorHandler","restarts","_error","Continue","Shutdown","Restart","window","showErrorMessage","DoNotRestart","SupportedSymbolKinds","SymbolKind","File","Module","Namespace","Package","Class","Method","Property","Field","Constructor","Enum","Interface","Function","Variable","Constant","Boolean","Key","Null","EnumMember","Struct","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Unit","Value","Keyword","Snippet","Color","Reference","Folder","DynamicFeature","unregister","DocumentNotifiactions","_middleware","_createParams","_selectorFilter","_selectors","selectors","textDocument","selector","_listener","notificationSent","_data","DidOpenTextDocumentFeature","_syncedDocuments","workspace","onDidOpenTextDocument","DidOpenTextDocumentNotification","didOpen","asOpenTextDocumentParams","textDocumentFilter","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","DidCloseTextDocumentFeature","onDidCloseTextDocument","DidCloseTextDocumentNotification","didClose","asCloseTextDocumentParams","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","DidChangeTextDocumentNotification","change","TextDocumentSyncKind","syncKind","onDidChangeTextDocument","contentChanges","changeData","Incremental","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","WillSaveTextDocumentWaitUntilRequest","willSaveWaitUntil","edits","vEdits","asTextEdits","waitUntil","DidSaveTextDocumentFeature","onDidSaveTextDocument","DidSaveTextDocumentNotification","didSave","asSaveTextDocumentParams","_includeText","save","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","DidChangeWatchedFilesNotification","_capabilities","_documentSelector","watchers","disposeables","watcher","globPattern","watchCreate","watchChange","watchDelete","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","onDidCreate","resource","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","_registrations","registration","registerLanguageProvider","capability","TextDocumentRegistrationOptions","StaticRegistrationOptions","hasId","WorkDoneProgressOptions","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","tagSupport","valueSet","CompletionItemTag","Deprecated","completionItemKind","getRegistrationOptions","completionProvider","triggerCharacters","provideCompletionItems","asCompletionParams","asCompletionResult","provideCompletionItem","resolveCompletionItem","resolveProvider","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","signatureInformation","parameterInformation","labelOffsetSupport","signatureHelpProvider","provideSignatureHelp","providerSignatureHelp","asSignatureHelpParams","asSignatureHelp","retriggerCharacters","registerSignatureHelpProvider","metaData","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","provideReferences","_providerReferences","asReferenceParams","asReferences","registerReferenceProvider","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","_provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","_provideDocumentSymbols","asDocumentSymbolParams","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","WorkspaceSymbolRequest","workspaceSymbolProvider","workDoneProgress","provideWorkspaceSymbols","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","isPreferredSupport","codeActionLiteralSupport","codeActionKind","CodeActionKind","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","provideCodeActions","_provideCodeActions","asTextDocumentIdentifier","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","codeActionKinds","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","provideOnTypeFormattingEdits","ch","asPosition","moreTriggerCharacter","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkCapabilities","tooltipSupport","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","_listeners","DidChangeConfigurationNotification","section","synchronize","configurationSection","onDidChangeConfiguration","sections","affectsConfiguration","didChangeConfiguration","settings","extractSettingsInformation","getMiddleware","ensurePath","workspaceFolder","getConfiguration","ExecuteCommandFeature","_commands","ExecuteCommandRequest","executeCommandProvider","executeCommand","commands","registerCommand","MessageTransports","reader","writer","OnReady","_resolve","_used","BaseLanguageClient","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","progressOnInitialization","errorHandler","uriConverters","Initial","_connectionPromise","_resolvedConnection","_initializeResult","outputChannel","_outputChannel","_disposeOutputChannel","_traceOutputChannel","traceOutputChannel","_providers","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","_stateChangeEmitter","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","_state","oldState","getPublicState","newState","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","createOutputChannel","_trace","onReady","resolveConnection","responseError","showNotification","appendLine","toLocaleTimeString","data2String","Info","showNotificationMessage","Warn","showInformationMessage","show","Stopping","isUsed","createDiagnosticCollection","onLogMessage","MessageType","onShowMessage","showWarningMessage","ShowMessageRequest","messageFunc","actions","onTelemetry","initialize","StartFailed","needsStop","stop","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","pid","clientInfo","rootUri","Uri","file","computeClientCapabilities","workspaceFolders","fillInitializeParams","part","ProgressPart","workDoneToken","doInitialize","done","textDocumentSync","onDiagnostics","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","retry","title","folders","folder","scheme","cleanUp","shutdown","exit","cleanUpChannel","diagnostics","_b","didChangeWatchedFile","didChangeWatchedFiles","changes","workSpaceMiddleware","asDiagnostics","setDiagnostics","handleConnectionError","handleConnectionClosed","createMessageTransports","transports","createProtocolConnection","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","LogMessageNotification","ShowMessageNotification","TelemetryEventNotification","didOpenTextDocument","didChangeTextDocument","didCloseTextDocument","didSaveTextDocument","PublishDiagnosticsNotification","action","closed","traceConfig","fileEvents","registerRaw","features","feature","registerFeature","notifyFileEvent","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","versionSupport","DiagnosticTag","Unnecessary","fillClientCapabilities","registrations","unregistration","unregisterations","edit","openTextDocuments","versionMismatch","TextDocumentEdit","applied","asPromise","proto","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","uriConverter","_uriConverter","asVersionedTextDocumentIdentifier","asTextDocumentSaveReason","reason","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","asCompletionTriggerKind","triggerKind","CompletionTriggerKind","TriggerCharacter","TriggerForIncompleteCompletions","Invoked","asSignatureHelpTriggerKind","SignatureHelpTriggerKind","Invoke","ContentChange","asParameterInformation","label","asSignatureInformation","parameters","asWorkerPosition","character","inserting","replacing","isInsertReplace","asLocation","Location","asDiagnosticSeverity","DiagnosticSeverity","Hint","asDiagnosticTag","tag","asRelatedInformation","location","asDiagnostic","Diagnostic","converted","asDiagnosticTags","asCompletionItemTag","asTextEdit","newText","asSymbolTag","languageId","getText","arg","isTextDocument","isTextDocumentChangeEvent","rangeLength","includeContent","triggerCharacter","isRetrigger","activeSignatureHelp","signatures","activeSignature","activeParameter","asPositions","protocolItem","default","original","documentation","asDocumentation","filterText","InsertTextFormat","textEdit","insertText","SnippetString","insertTextFormat","fromEdit","fillPrimaryInsertText","originalItemKind","sortText","additionalTextEdits","commitCharacters","preselect","asCompletionItemTags","deprecated","includeDeclaration","only","CodeActionContext","CodeLens","tabSize","insertSpaces","DocumentLink","tooltip","ColorProviderFeature","DocumentColorRequest","colorProvider","provideColorPresentations","color","requestParams","ColorPresentationRequest","asColorPresentations","provideDocumentColors","asColorInformations","registerColorProvider","red","green","blue","alpha","colorInformation","ci","ColorInformation","asColor","colorPresentations","cp","presentation","ColorPresentation","configuration","ConfigurationRequest","scopeUri","DeclarationFeature","DeclarationRequest","declarationSupport","declarationProvider","provideDeclaration","asDeclarationResult","registerDeclarationProvider","FoldingRangeFeature","FoldingRangeRequest","rangeLimit","lineFoldingOnly","foldingRangeProvider","provideFoldingRanges","asFoldingRanges","registerFoldingRangeProvider","FoldingRangeKind","Comment","Imports","Region","foldingRanges","FoldingRange","startLine","endLine","asFoldingRangeKind","ImplementationFeature","ImplementationRequest","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","colorProvider_1","configuration_1","implementation_1","typeDefinition_1","workspaceFolders_1","foldingRange_1","declaration_1","selectionRange_1","progress_1","callHierarchy_proposed_1","semanticTokens_proposed_1","processes_1","Executable","TransportKind","Transport","NodeModule","StreamInfo","ChildProcessInfo","ProposedFeatures","isSocket","detached","LanguageClient","arg1","arg2","arg3","arg4","arg5","serverOptions","forceDebug","_serverOptions","_forceDebug","checkVersion","codeVersion","_serverProcess","toCheck","_isDetached","checkProcessDied","childProcess","kill","terminate","getEnvironment","debugStartWith","debugEquals","assertStdio","stdin","runDebug","execArgv","startsWith","startedInDebugMode","_getServerWorkingDir","serverWorkingDir","transport","runtime","ipc","pipe","cwd","silent","sp","execOptions","serverProcess","registerFeatures","createAll","TypeDefinitionFeature","WorkspaceFoldersFeature","SelectionRangeFeature","ProgressFeature","_mainGetRootPath","SettingMonitor","_setting","primary","rest","needsStart","SemanticTokensFeature","WorkDoneProgressCreateRequest","_reported","WorkDoneProgress","begin","report","cancellable","ProgressLocation","Notification","Window","withProgress","async","progress","cancellationToken","_progress","_infinite","percentage","_cancellationToken","WorkDoneProgressCancelNotification","delta","increment","ProtocolCodeLens","ProtocolCompletionItem","CompletionItem","ls","CodeBlock","language","diagnostic","asDiagnosticRelatedInformation","information","DiagnosticRelatedInformation","Position","MarkdownString","asCompletionInsertText","itemKind","TextEdit","asSignatureInformations","SignatureInformation","asParameterInformations","ParameterInformation","asLocationLink","targetUri","targetRange","targetSelectionRange","originSelectionRange","asLocationResult","LocationLink","asDocumentHighlight","DocumentHighlight","asDocumentHighlightKind","DocumentHighlightKind","Read","Write","asSymbolInformation","SymbolInformation","containerName","asDocumentSymbol","children","child","kindMapping","asCodeActionKind","WorkspaceEdit","CreateFile","createFile","RenameFile","renameFile","oldUri","newUri","DeleteFile","deleteFile","asColorInformation","asColorPresentation","asFoldingRange","asSelectionRange","SelectionRange","parent","hover","Hover","appendCodeblock","appendMarkdown","appendText","asHoverContent","contents","CompletionList","isIncomplete","SignatureHelp","asCommands","CodeAction","isPreferred","asSelectionRanges","selectionRanges","ProtocolDocumentLink","SelectionRangeRequest","selectionRangeProvider","provideSelectionRanges","positions","ranges","registerSelectionRangeProvider","vscode","asSemanticTokensEdit","SemanticTokensEdit","deleteCount","Uint32Array","asSemanticTokens","SemanticTokens","resultId","asSemanticTokensEdits","SemanticTokensEdits","asLegend","SemanticTokensRequest","tokenTypes","SemanticTokenTypes","comment","keyword","regexp","namespace","struct","class","interface","enum","typeParameter","function","member","macro","variable","parameter","tokenModifiers","SemanticTokenModifiers","declaration","static","abstract","readonly","semanticTokensProvider","documentProvider","provideDocumentSemanticTokens","provideDocumentSemanticTokensEdits","previousResultId","SemanticTokensEditsRequest","rangeProvider","provideDocumentRangeSemanticTokens","SemanticTokensRangeRequest","legend","registerDocumentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","TypeDefinitionRequest","typeDefinitionSupport","typeDefinitionProvider","provideTypeDefinition","registerTypeDefinitionProvider","defaultDelay","completionPromise","task","delay","cancelTimeout","thenable","typedArray","resolved","isWindows","isMacintosh","isLinux","execFileSync","cmd","ValueUUID","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","_chars","v4","empty","_UUIDPattern","isUUID","access","arrayDiff","DidChangeWorkspaceFoldersNotification","initializeWithFolders","asProtocol","currentWorkspaceFolders","_initialFolders","WorkspaceFoldersRequest","removed","added","doSendEvent","addedFolders","removedFolders","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","sendInitialEvent","tokens","tok","COERCERTL","compareBuild","versionA","versionB","isSatisfiable","remainingComparators","testComparator","pop","otherComparator","anyX","rtl","lastIndex","vscode_jsonrpc_1","callHierarchy","st","ProtocolRequestType0","ProtocolRequestType","ProtocolNotificationType","ProtocolNotificationType0","resultType","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolders_1","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","protocol_progress_1","DocumentFilter","DocumentSelector","pattern","Abort","Transactional","Undo","objectLiteral","hasWorkDoneProgress","InitializeError","unknownProtocolVersion","Log","one","two","three","four","defined","startCharacter","endCharacter","insert","del","VersionedTextDocumentIdentifier","overwrite","ignoreIfExists","recursive","ignoreIfNotExists","TextDocumentIdentifier","TextDocumentItem","MarkupContent","MarkedString","SymbolTag","FormattingOptions","TextEditChangeImpl","all","WorkspaceChange","_textEditChanges","_workspaceEdit","textEditChange","getTextEditChange","textDocumentEdit","checkDocumentChanges","fromPlainText","plainText","SourceFixAll","commandOrEdit","TextDocument","EOL","mergeSort","leftIdx","rightIdx","content","FullTextDocument","lineCount","positionAt","offsetAt","applyEdits","sortedEdits","lastModifiedOffset","startOffset","endOffset","_uri","_languageId","_version","_content","_lineOffsets","update","getLineOffsets","lineOffsets","isLineStart","charAt","offset","mid","lineOffset","nextLineOffset","zoneSpec","_properties","_parent","_zoneDelegate","ZoneDelegate","assertZonePatched","ZoneAwarePromise","_currentZoneFrame","zone","_currentTask","getZoneWith","_callback","intercept","runGuarded","applyThis","applyArgs","ZoneFrame","runTask","runCount","previousTask","isPeriodic","cancelFn","invokeTask","scheduleMicroTask","customSchedule","scheduleTask","ZoneTask","scheduleMacroTask","customCancel","scheduleEventTask","cancelTask","__symbol__","parentDelegate","_taskCounts","microTask","macroTask","eventTask","_parentDelegate","_forkZS","onFork","_forkDlgt","_forkCurrZone","_interceptZS","onIntercept","_interceptDlgt","_interceptCurrZone","_invokeZS","onInvoke","_invokeDlgt","_invokeCurrZone","_handleErrorZS","onHandleError","_handleErrorDlgt","_handleErrorCurrZone","_scheduleTaskZS","onScheduleTask","_scheduleTaskDlgt","_scheduleTaskCurrZone","_invokeTaskZS","onInvokeTask","_invokeTaskDlgt","_invokeTaskCurrZone","_cancelTaskZS","onCancelTask","_cancelTaskDlgt","_cancelTaskCurrZone","_hasTaskZS","onHasTask","_hasTaskDlgt","_hasTaskCurrZone","targetZone","scheduleFn","scheduleQueueDrain","_microTaskQueue","_updateTaskCount","hasTask","counts","prev","self","_numberOfNestedTaskFrames","drainMicroTaskQueue","symbolSetTimeout","symbolPromise","symbolThen","_isDrainingMicrotaskQueue","_uncaughtPromiseErrors","consoleError","rejection","uncaughtPromiseError","isThenable","forwardResolution","forwardRejection","symbolState","symbolValue","UNRESOLVED","REJECTED","makeResolver","resolvePromise","clearRejectedNoCatch","scheduleResolveOrReject","error_1","currentTask","chainPromise","onFulfilled","onRejected","delegate","executor","race","rej","onResolve","onReject","values_1","resolvedValues","values_2","catch","FrameType","NativePromise","patchThen","NativePromiseProtototype","NativePromiseThen","nativePromise","fetchPromise","zoneAwareFrame","NativeError","blackListedStackFrames","ZoneAwareError","createProperty","error_2","createMethodProperty","errorMethod","errorProperties","pKeys","createErrorProperties","getErrorPropertiesForPrototype","newProps","cKeys","cKey","originalStack","frames_1","zoneFrame","frameType","blackList","transition","zoneAwareStack","defineProperties","getPrototypeOf","stackTraceLimit","targetObject","constructorOpt","captureStackTrace","structuredStackTrace","getFunctionName","detectZone","parentZoneDelegate","currentZone","parentZD","frames_2","runFrame","runGuardedFrame","runTaskFrame","fnName","zoneSymbol","_global$1","EVENT_TASKS","REMOVE_EVENT_LISTENER","findExistingRegisteredTask","capture","eventTasks","useCapturing","eventName","defaultListenerMetaCreator","invokeAddFunc","addFnSymbol","invokeRemoveFunc","removeFnSymbol","makeZoneAwareAddListener","addFnName","removeFnName","useCapturingParam","allowDuplicates","isPrepend","metaCreator","defaultUseCapturing","scheduleEventListener","attachRegisteredEvent","cancelEventListener","handleEvent","validZoneHandler","makeZoneAwareRemoveListener","symbol","patchMethod","patchFn","delegateName","createNamedFn","events","callAndReturnFirstParam","EE_ADD_LISTENER","EE_PREPEND_LISTENER","EE_REMOVE_LISTENER","EE_REMOVE_ALL_LISTENER","EE_LISTENERS","zoneAwareAddListener$1","zoneAwarePrependListener","zoneAwareRemoveListener$1","zoneAwareRemoveAllListeners","findAllExistingRegisteredTasks","makeZoneAwareRemoveAllListeners","zoneAwareListeners","patchTimer","setName","cancelName","nameSuffix","setNative","clearNative","tasksByHandleId","clearTask","ref","funcName","callbackIndex","patchMacroTask","crypto","httpClient","_global","timers","patchNextTick","nativeRandomBytes_1","nativePbkdf2_1","pbkdf2","ClientRequest","ClientRequest_1","factory","languageClient","SLDSContext","updateState","ContextKey","GLOBAL","DENSITY","UTILITY_CLASS","BEM","DEPRECATED","INVALID","OVERRIDE","DESIGN_TOKEN","AUTO_SUGGEST","SCOPE","SLDS_MOBILE_VALIDATION","SFDX_PROJECT_FILE","CLIENT_ID","SFDX_CORE_CONFIGURATION_NAME","STATUS_BAR_MSG_TIMEOUT_MS","SHOW_CLI_SUCCESS_INFO_MSG","APEX_CODE_DEBUG_LEVEL","VISUALFORCE_DEBUG_LEVEL","TELEMETRY_ENABLED","EXTENSION_NAME","TELEMETRY_GLOBAL_VALUE","TELEMETRY_OPT_OUT_LINK","PUSH_OR_DEPLOY_ON_SAVE_ENABLED","RETRIEVE_TEST_CODE_COVERAGE","SFDX_CLI_DOWNLOAD_LINK","CONFIG_KEY","MAPPINGS","upgradeContextConfiguration","syncContextWithServer","configurationChangeHandler","globalState","contextKey","isEnable","shouldNotifyServerOfContextChange","setGlobal","telemetryService","initializeService","showTelemetryMessage","extensionHRStart","createLanguageClient","subscriptions","Commands","componentsProvider","utilities","utilitiesProvider","varTokens","varTokensProvider","auraTokens","auraTokensProvider","sendExtensionActivationEvent","sendExtensionDeactivationEvent","sfdxCoreSettings","SfdxCoreSettings","getInstance","instance","getConfigValue","setConfigValue","defaultValue","Kind","triggerChars","kindMap","shouldExecuteForDocument","triggerRange","getWordRangeAtPosition","shouldTriggerCompletions","completions","auraToken","getCompletions","classes","cssClass","component","summary","DEBUG","v8debug","findBinPath","binname","workspaces","binpath","createServerOptions","createServerPromise","net","matcher","filteredDuplex","Transform","buf","shouldSendPayloadToServer","javaExecutablePath","correctBinname","javaApexConfig","findJavaExecutable","extensionPath","storagePath","globalStoragePath","logFile","logStream","createWriteStream","flags","createClientOptions","homedir","isCLITelemetryAllowed","SFDX_CONFIG_DISABLE_TELEMETRY","workspacePath","getRootWorkspacePath","localConfigPath","myLocalConfig","localValue","TelemetryService","sendException","envValue","ENV_SFDX_CLI_DISABLE_TELEMETRY","globalPath","globalConfig","globalValue","cliAllowsTelemetry","isDevMode","machineId","reporter","isTelemetryEnabled","getTelemetryEnabled","getHasTelemetryMessageBeenShown","showButtonText","showMessage","util","selection","setTelemetryMessageShowed","hrstart","startupTime","getEndHRTime","sendTelemetryEvent","extensionName","errorMsg","measures","sendExceptionEvent","callstack","errorStack","hrend","TelemetryReporter","extensionId","extensionVersion","enableUniqueMetrics","toDispose","userOptIn","uniqueUserMetrics","logFilePath","autoClose","updateUserOptIn","TELEMETRY_CONFIG_ID","TELEMETRY_CONFIG_ENABLED_ID","createAppInsightsClient","appInsights","appInsightsClient","getCommonProperties","totalmem","exceptionName","exceptionMessage","flushEventsToLogger","flushEventsToAI","getRootWorkspace","ws","hasRootWorkspace","sep","locationOfForceApp","__webpack_module_cache__","__webpack_require__","__webpack_modules__","definition","o","Symbol","toStringTag"],"mappings":"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","file":"extension.js","sourcesContent":["\"use strict\";\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar AutoCollectConsole = (function () {\n    function AutoCollectConsole(client) {\n        if (!!AutoCollectConsole.INSTANCE) {\n            throw new Error(\"Console logging adapter tracking should be configured from the applicationInsights object\");\n        }\n        this._client = client;\n        AutoCollectConsole.INSTANCE = this;\n    }\n    AutoCollectConsole.prototype.enable = function (isEnabled, collectConsoleLog) {\n        if (DiagChannel.IsInitialized) {\n            require(\"./diagnostic-channel/console.sub\").enable(isEnabled && collectConsoleLog, this._client);\n            require(\"./diagnostic-channel/bunyan.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/winston.sub\").enable(isEnabled, this._client);\n        }\n    };\n    AutoCollectConsole.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectConsole.prototype.dispose = function () {\n        AutoCollectConsole.INSTANCE = null;\n        this.enable(false, false);\n    };\n    AutoCollectConsole._methodNames = [\"debug\", \"info\", \"log\", \"warn\", \"error\"];\n    return AutoCollectConsole;\n}());\nmodule.exports = AutoCollectConsole;\n//# sourceMappingURL=Console.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Logging = require(\"../Library/Logging\");\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar CorrelationContextManager = (function () {\n    function CorrelationContextManager() {\n    }\n    /**\n     *  Provides the current Context.\n     *  The context is the most recent one entered into for the current\n     *  logical chain of execution, including across asynchronous calls.\n     */\n    CorrelationContextManager.getCurrentContext = function () {\n        if (!CorrelationContextManager.enabled) {\n            return null;\n        }\n        return Zone.current.get(\"context\");\n    };\n    /**\n     *  A helper to generate objects conforming to the CorrelationContext interface\n     */\n    CorrelationContextManager.generateContextObject = function (operationId, parentId, operationName, correlationContextHeader) {\n        parentId = parentId || operationId;\n        if (this.enabled) {\n            return {\n                operation: {\n                    name: operationName,\n                    id: operationId,\n                    parentId: parentId\n                },\n                customProperties: new CustomPropertiesImpl(correlationContextHeader)\n            };\n        }\n        return null;\n    };\n    /**\n     *  Runs a function inside a given Context.\n     *  All logical children of the execution path that entered this Context\n     *  will receive this Context object on calls to GetCurrentContext.\n     */\n    CorrelationContextManager.runWithContext = function (context, fn) {\n        if (CorrelationContextManager.enabled) {\n            var newZone = Zone.current.fork({\n                name: \"AI-\" + ((context && context.operation.parentId) || \"Unknown\"),\n                properties: { context: context }\n            });\n            newZone.run(fn);\n        }\n        else {\n            fn();\n        }\n    };\n    /**\n     *  Patches a callback to restore the correct Context when getCurrentContext\n     *  is run within it. This is necessary if automatic correlation fails to work\n     *  with user-included libraries.\n     *\n     *  The supplied callback will be given the same context that was present for\n     *  the call to wrapCallback.  */\n    CorrelationContextManager.wrapCallback = function (fn) {\n        if (CorrelationContextManager.enabled) {\n            return Zone.current.wrap(fn, \"User-wrapped method\");\n        }\n        return fn;\n    };\n    /**\n     *  Enables the CorrelationContextManager.\n     */\n    CorrelationContextManager.enable = function () {\n        if (this.enabled) {\n            return;\n        }\n        if (!this.isNodeVersionCompatible()) {\n            this.enabled = false;\n            return;\n        }\n        // Run patches for Zone.js\n        if (!CorrelationContextManager.hasEverEnabled) {\n            this.hasEverEnabled = true;\n            // Load in Zone.js\n            try {\n                // Require zone if we can't detect its presence - guarded because of issue #346\n                // Note that usually multiple requires of zone.js does not error - but we see reports of it happening\n                // in the Azure Functions environment.\n                // This indicates that the file is being included multiple times in the same global scope,\n                // averting require's cache somehow.\n                if (typeof Zone === \"undefined\") {\n                    require(\"zone.js\");\n                }\n            }\n            catch (e) {\n                // Zone was already loaded even though we couldn't find its global variable\n                Logging.warn(\"Failed to require zone.js\");\n            }\n            DiagChannel.registerContextPreservation(function (cb) {\n                return Zone.current.wrap(cb, \"AI-ContextPreservation\");\n            });\n            this.patchError();\n            this.patchTimers([\"setTimeout\", \"setInterval\"]);\n        }\n        this.enabled = true;\n    };\n    /**\n     *  Disables the CorrelationContextManager.\n     */\n    CorrelationContextManager.disable = function () {\n        this.enabled = false;\n    };\n    /**\n     *  Reports if the CorrelationContextManager is able to run in this environment\n     */\n    CorrelationContextManager.isNodeVersionCompatible = function () {\n        // Unit tests warn of errors < 3.3 from timer patching. All versions before 4 were 0.x\n        var nodeVer = process.versions.node.split(\".\");\n        return parseInt(nodeVer[0]) > 3 || (parseInt(nodeVer[0]) > 2 && parseInt(nodeVer[1]) > 2);\n    };\n    // Zone.js breaks concatenation of timer return values.\n    // This fixes that.\n    CorrelationContextManager.patchTimers = function (methodNames) {\n        methodNames.forEach(function (methodName) {\n            var orig = global[methodName];\n            global[methodName] = function () {\n                var ret = orig.apply(this, arguments);\n                ret.toString = function () {\n                    if (this.data && typeof this.data.handleId !== 'undefined') {\n                        return this.data.handleId.toString();\n                    }\n                    else {\n                        return Object.prototype.toString.call(this);\n                    }\n                };\n                return ret;\n            };\n        });\n    };\n    // Zone.js breaks deepEqual on error objects (by making internal properties enumerable).\n    // This fixes that by subclassing the error object and making all properties not enumerable\n    CorrelationContextManager.patchError = function () {\n        var orig = global.Error;\n        // New error handler\n        function AppInsightsAsyncCorrelatedErrorWrapper() {\n            if (!(this instanceof AppInsightsAsyncCorrelatedErrorWrapper)) {\n                return AppInsightsAsyncCorrelatedErrorWrapper.apply(Object.create(AppInsightsAsyncCorrelatedErrorWrapper.prototype), arguments);\n            }\n            // Is this object set to rewrite the stack?\n            // If so, we should turn off some Zone stuff that is prone to break\n            var stackRewrite = orig.stackRewrite;\n            if (orig.prepareStackTrace) {\n                orig.stackRewrite = false;\n                var stackTrace = orig.prepareStackTrace;\n                orig.prepareStackTrace = function (e, s) {\n                    // Remove some AI and Zone methods from the stack trace\n                    // Otherwise we leave side-effects\n                    // Algorithm is to find the first frame on the stack after the first instance(s)\n                    // of AutoCollection/CorrelationContextManager\n                    // Eg. this should return the User frame on an array like below:\n                    //  Zone | Zone | CorrelationContextManager | CorrelationContextManager | User\n                    var foundOne = false;\n                    for (var i = 0; i < s.length; i++) {\n                        var fileName = s[i].getFileName();\n                        if (fileName) {\n                            if (fileName.indexOf(\"AutoCollection/CorrelationContextManager\") === -1 &&\n                                fileName.indexOf(\"AutoCollection\\\\CorrelationContextManager\") === -1) {\n                                if (foundOne) {\n                                    break;\n                                }\n                            }\n                            else {\n                                foundOne = true;\n                            }\n                        }\n                    }\n                    // Loop above goes one extra step\n                    i = Math.max(0, i - 1);\n                    if (foundOne) {\n                        s.splice(0, i);\n                    }\n                    return stackTrace(e, s);\n                };\n            }\n            // Apply the error constructor\n            orig.apply(this, arguments);\n            // Restore Zone stack rewriting settings\n            orig.stackRewrite = stackRewrite;\n            // Remove unexpected bits from stack trace\n            if (this.stack && typeof this.stack === \"string\") {\n                var stackFrames = this.stack.split(\"\\n\");\n                // Remove this class\n                if (stackFrames.length > 3) {\n                    if (stackFrames[2].trim().indexOf(\"at Error.AppInsightsAsyncCorrelatedErrorWrapper\") === 0) {\n                        stackFrames.splice(2, 1);\n                    }\n                }\n                // Remove AI correlation ids\n                this.stack = stackFrames.map(function (v) {\n                    var startIndex = v.indexOf(\") [\");\n                    if (startIndex > -1) {\n                        v = v.substr(0, startIndex + 1);\n                    }\n                    return v;\n                }).join(\"\\n\");\n            }\n            // getOwnPropertyNames should be a superset of Object.keys...\n            // This appears to not always be the case\n            var props = Object.getOwnPropertyNames(this).concat(Object.keys(this));\n            // Zone.js will automatically create some hidden properties at read time.\n            // We need to proactively make those not enumerable as well as the currently visible properties\n            for (var i = 0; i < props.length; i++) {\n                var propertyName = props[i];\n                var hiddenPropertyName = Zone['__symbol__'](propertyName);\n                Object.defineProperty(this, propertyName, { enumerable: false });\n                Object.defineProperty(this, hiddenPropertyName, { enumerable: false, writable: true });\n            }\n            return this;\n        }\n        // Inherit from the Zone.js error handler\n        AppInsightsAsyncCorrelatedErrorWrapper.prototype = orig.prototype;\n        // We need this loop to copy outer methods like Error.captureStackTrace\n        var props = Object.getOwnPropertyNames(orig);\n        for (var i = 0; i < props.length; i++) {\n            var propertyName = props[i];\n            if (!AppInsightsAsyncCorrelatedErrorWrapper[propertyName]) {\n                Object.defineProperty(AppInsightsAsyncCorrelatedErrorWrapper, propertyName, Object.getOwnPropertyDescriptor(orig, propertyName));\n            }\n        }\n        // explicit cast to <any> required to avoid type error for captureStackTrace\n        // with latest node.d.ts (despite workaround above)\n        global.Error = AppInsightsAsyncCorrelatedErrorWrapper;\n    };\n    CorrelationContextManager.enabled = false;\n    CorrelationContextManager.hasEverEnabled = false;\n    return CorrelationContextManager;\n}());\nexports.CorrelationContextManager = CorrelationContextManager;\nvar CustomPropertiesImpl = (function () {\n    function CustomPropertiesImpl(header) {\n        this.props = [];\n        this.addHeaderData(header);\n    }\n    CustomPropertiesImpl.prototype.addHeaderData = function (header) {\n        var keyvals = header ? header.split(\", \") : [];\n        this.props = keyvals.map(function (keyval) {\n            var parts = keyval.split(\"=\");\n            return { key: parts[0], value: parts[1] };\n        }).concat(this.props);\n    };\n    CustomPropertiesImpl.prototype.serializeToHeader = function () {\n        return this.props.map(function (keyval) {\n            return keyval.key + \"=\" + keyval.value;\n        }).join(\", \");\n    };\n    CustomPropertiesImpl.prototype.getProperty = function (prop) {\n        for (var i = 0; i < this.props.length; ++i) {\n            var keyval = this.props[i];\n            if (keyval.key === prop) {\n                return keyval.value;\n            }\n        }\n        return;\n    };\n    // TODO: Strictly according to the spec, properties which are recieved from\n    // an incoming request should be left untouched, while we may add our own new\n    // properties. The logic here will need to change to track that.\n    CustomPropertiesImpl.prototype.setProperty = function (prop, val) {\n        if (CustomPropertiesImpl.bannedCharacters.test(prop) || CustomPropertiesImpl.bannedCharacters.test(val)) {\n            Logging.warn(\"Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: \" + prop + \" and value: \" + val);\n            return;\n        }\n        for (var i = 0; i < this.props.length; ++i) {\n            var keyval = this.props[i];\n            if (keyval.key === prop) {\n                keyval.value = val;\n                return;\n            }\n        }\n        this.props.push({ key: prop, value: val });\n    };\n    CustomPropertiesImpl.bannedCharacters = /[,=]/;\n    return CustomPropertiesImpl;\n}());\n//# sourceMappingURL=CorrelationContextManager.js.map","\"use strict\";\nvar AutoCollectExceptions = (function () {\n    function AutoCollectExceptions(client) {\n        if (!!AutoCollectExceptions.INSTANCE) {\n            throw new Error(\"Exception tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectExceptions.INSTANCE = this;\n        this._client = client;\n    }\n    Object.defineProperty(AutoCollectExceptions, \"UNCAUGHT_EXCEPTION_HANDLER_NAME\", {\n        get: function () { return \"uncaughtException\"; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AutoCollectExceptions, \"UNHANDLED_REJECTION_HANDLER_NAME\", {\n        get: function () { return \"unhandledRejection\"; },\n        enumerable: true,\n        configurable: true\n    });\n    AutoCollectExceptions.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectExceptions.prototype.enable = function (isEnabled) {\n        var _this = this;\n        if (isEnabled) {\n            this._isInitialized = true;\n            var self = this;\n            if (!this._exceptionListenerHandle) {\n                var handle = function (reThrow, error) {\n                    _this._client.trackException({ exception: error });\n                    _this._client.flush({ isAppCrashing: true });\n                    if (reThrow) {\n                        throw error;\n                    }\n                };\n                this._exceptionListenerHandle = handle.bind(this, true);\n                this._rejectionListenerHandle = handle.bind(this, false);\n                process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\n                process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\n            }\n        }\n        else {\n            if (this._exceptionListenerHandle) {\n                process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\n                process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\n                this._exceptionListenerHandle = undefined;\n                this._rejectionListenerHandle = undefined;\n                delete this._exceptionListenerHandle;\n                delete this._rejectionListenerHandle;\n            }\n        }\n    };\n    AutoCollectExceptions.prototype.dispose = function () {\n        AutoCollectExceptions.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectExceptions.INSTANCE = null;\n    return AutoCollectExceptions;\n}());\nmodule.exports = AutoCollectExceptions;\n//# sourceMappingURL=Exceptions.js.map","\"use strict\";\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Logging = require(\"../Library/Logging\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar HttpDependencyParser = require(\"./HttpDependencyParser\");\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar AutoCollectHttpDependencies = (function () {\n    function AutoCollectHttpDependencies(client) {\n        if (!!AutoCollectHttpDependencies.INSTANCE) {\n            throw new Error(\"Client request tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectHttpDependencies.INSTANCE = this;\n        this._client = client;\n    }\n    AutoCollectHttpDependencies.prototype.enable = function (isEnabled) {\n        this._isEnabled = isEnabled;\n        if (this._isEnabled && !this._isInitialized) {\n            this._initialize();\n        }\n        if (DiagChannel.IsInitialized) {\n            require(\"./diagnostic-channel/mongodb.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/mysql.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/redis.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/postgres.sub\").enable(isEnabled, this._client);\n        }\n    };\n    AutoCollectHttpDependencies.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectHttpDependencies.prototype._initialize = function () {\n        var _this = this;\n        this._isInitialized = true;\n        var originalGet = http.get;\n        var originalRequest = http.request;\n        var originalHttpsRequest = https.request;\n        var clientRequestPatch = function (request, options) {\n            var shouldCollect = !options[AutoCollectHttpDependencies.disableCollectionRequestOption] &&\n                !request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];\n            request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag] = true;\n            if (request && options && shouldCollect) {\n                AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\n            }\n        };\n        // On node >= v0.11.12 and < 9.0 (excluding 8.9.0) https.request just calls http.request (with additional options).\n        // On node < 0.11.12, 8.9.0, and 9.0 > https.request is handled separately\n        // Patch both and leave a flag to not double-count on versions that just call through\n        // We add the flag to both http and https to protect against strange double collection in other scenarios\n        http.request = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));\n            clientRequestPatch(request, options);\n            return request;\n        };\n        https.request = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = originalHttpsRequest.call.apply(originalHttpsRequest, [https, options].concat(requestArgs));\n            clientRequestPatch(request, options);\n            return request;\n        };\n        // Node 8 calls http.request from http.get using a local reference!\n        // We have to patch .get manually in this case and can't just assume request is enough\n        // We have to replace the entire method in this case. We can't call the original.\n        // This is because calling the original will give us no chance to set headers as it internally does .end().\n        http.get = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = (_a = http.request).call.apply(_a, [http, options].concat(requestArgs));\n            request.end();\n            return request;\n            var _a;\n        };\n        https.get = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = (_a = https.request).call.apply(_a, [https, options].concat(requestArgs));\n            request.end();\n            return request;\n            var _a;\n        };\n    };\n    /**\n     * Tracks an outgoing request. Because it may set headers this method must be called before\n     * writing content to or ending the request.\n     */\n    AutoCollectHttpDependencies.trackRequest = function (client, telemetry) {\n        if (!telemetry.options || !telemetry.request || !client) {\n            Logging.info(\"AutoCollectHttpDependencies.trackRequest was called with invalid parameters: \", !telemetry.options, !telemetry.request, !client);\n            return;\n        }\n        var requestParser = new HttpDependencyParser(telemetry.options, telemetry.request);\n        var currentContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var uniqueRequestId = currentContext && currentContext.operation && (currentContext.operation.parentId + AutoCollectHttpDependencies.requestNumber++ + '.');\n        // Add the source correlationId to the request headers, if a value was not already provided.\n        // The getHeader/setHeader methods aren't available on very old Node versions, and\n        // are not included in the v0.10 type declarations currently used. So check if the\n        // methods exist before invoking them.\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) && telemetry.request.getHeader && telemetry.request.setHeader) {\n            if (client.config && client.config.correlationId) {\n                var correlationHeader = telemetry.request.getHeader(RequestResponseHeaders.requestContextHeader);\n                if (correlationHeader) {\n                    var components = correlationHeader.split(\",\");\n                    var key_1 = RequestResponseHeaders.requestContextSourceKey + \"=\";\n                    if (!components.some(function (value) { return value.substring(0, key_1.length) === key_1; })) {\n                        telemetry.request.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\n                    }\n                }\n                else {\n                    telemetry.request.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\n                }\n            }\n            if (currentContext && currentContext.operation) {\n                telemetry.request.setHeader(RequestResponseHeaders.requestIdHeader, uniqueRequestId);\n                // Also set legacy headers\n                telemetry.request.setHeader(RequestResponseHeaders.parentIdHeader, currentContext.operation.id);\n                telemetry.request.setHeader(RequestResponseHeaders.rootIdHeader, uniqueRequestId);\n                var correlationContextHeader = currentContext.customProperties.serializeToHeader();\n                if (correlationContextHeader) {\n                    telemetry.request.setHeader(RequestResponseHeaders.correlationContextHeader, correlationContextHeader);\n                }\n            }\n        }\n        // Collect dependency telemetry about the request when it finishes.\n        if (telemetry.request.on) {\n            telemetry.request.on('response', function (response) {\n                requestParser.onResponse(response);\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\n                dependencyTelemetry.contextObjects[\"http.ClientResponse\"] = response;\n                client.trackDependency(dependencyTelemetry);\n            });\n            telemetry.request.on('error', function (e) {\n                requestParser.onError(e);\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\n                dependencyTelemetry.contextObjects[\"Error\"] = e;\n                client.trackDependency(dependencyTelemetry);\n            });\n        }\n    };\n    AutoCollectHttpDependencies.prototype.dispose = function () {\n        AutoCollectHttpDependencies.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectHttpDependencies.disableCollectionRequestOption = 'disableAppInsightsAutoCollection';\n    AutoCollectHttpDependencies.requestNumber = 1;\n    AutoCollectHttpDependencies.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\n    return AutoCollectHttpDependencies;\n}());\nmodule.exports = AutoCollectHttpDependencies;\n//# sourceMappingURL=HttpDependencies.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar url = require(\"url\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar RequestParser = require(\"./RequestParser\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\n/**\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\n */\nvar HttpDependencyParser = (function (_super) {\n    __extends(HttpDependencyParser, _super);\n    function HttpDependencyParser(requestOptions, request) {\n        var _this = _super.call(this) || this;\n        if (request && request.method && requestOptions) {\n            // The ClientRequest.method property isn't documented, but is always there.\n            _this.method = request.method;\n            _this.url = HttpDependencyParser._getUrlFromRequestOptions(requestOptions, request);\n            _this.startTime = +new Date();\n        }\n        return _this;\n    }\n    /**\n     * Called when the ClientRequest emits an error event.\n     */\n    HttpDependencyParser.prototype.onError = function (error) {\n        this._setStatus(undefined, error);\n    };\n    /**\n     * Called when the ClientRequest emits a response event.\n     */\n    HttpDependencyParser.prototype.onResponse = function (response) {\n        this._setStatus(response.statusCode, undefined);\n        this.correlationId = Util.getCorrelationContextTarget(response, RequestResponseHeaders.requestContextTargetKey);\n    };\n    /**\n     * Gets a dependency data contract object for a completed ClientRequest.\n     */\n    HttpDependencyParser.prototype.getDependencyTelemetry = function (baseTelemetry, dependencyId) {\n        var urlObject = url.parse(this.url);\n        urlObject.search = undefined;\n        urlObject.hash = undefined;\n        var dependencyName = this.method.toUpperCase() + \" \" + urlObject.pathname;\n        var remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\n        var remoteDependencyTarget = urlObject.hostname;\n        if (this.correlationId) {\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_AI;\n            if (this.correlationId !== CorrelationIdManager.correlationIdPrefix) {\n                remoteDependencyTarget = urlObject.hostname + \" | \" + this.correlationId;\n            }\n        }\n        else {\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\n        }\n        var dependencyTelemetry = {\n            id: dependencyId,\n            name: dependencyName,\n            data: this.url,\n            duration: this.duration,\n            success: this._isSuccess(),\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\n            properties: this.properties || {},\n            dependencyTypeName: remoteDependencyType,\n            target: remoteDependencyTarget\n        };\n        // We should keep any parameters the user passed in\n        // Except the fields defined above in requestTelemetry, which take priority\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\n        if (baseTelemetry) {\n            // Copy missing fields\n            for (var key in baseTelemetry) {\n                if (!dependencyTelemetry[key]) {\n                    dependencyTelemetry[key] = baseTelemetry[key];\n                }\n            }\n            // Merge properties\n            if (baseTelemetry.properties) {\n                for (var key in baseTelemetry.properties) {\n                    dependencyTelemetry.properties[key] = baseTelemetry.properties[key];\n                }\n            }\n        }\n        return dependencyTelemetry;\n    };\n    /**\n     * Builds a URL from request options, using the same logic as http.request(). This is\n     * necessary because a ClientRequest object does not expose a url property.\n     */\n    HttpDependencyParser._getUrlFromRequestOptions = function (options, request) {\n        if (typeof options === 'string') {\n            options = url.parse(options);\n        }\n        else {\n            // Avoid modifying the original options object.\n            var originalOptions_1 = options;\n            options = {};\n            if (originalOptions_1) {\n                Object.keys(originalOptions_1).forEach(function (key) {\n                    options[key] = originalOptions_1[key];\n                });\n            }\n        }\n        // Oddly, url.format ignores path and only uses pathname and search,\n        // so create them from the path, if path was specified\n        if (options.path) {\n            var parsedQuery = url.parse(options.path);\n            options.pathname = parsedQuery.pathname;\n            options.search = parsedQuery.search;\n        }\n        // Simiarly, url.format ignores hostname and port if host is specified,\n        // even if host doesn't have the port, but http.request does not work\n        // this way. It will use the port if one is not specified in host,\n        // effectively treating host as hostname, but will use the port specified\n        // in host if it exists.\n        if (options.host && options.port) {\n            // Force a protocol so it will parse the host as the host, not path.\n            // It is discarded and not used, so it doesn't matter if it doesn't match\n            var parsedHost = url.parse(\"http://\" + options.host);\n            if (!parsedHost.port && options.port) {\n                options.hostname = options.host;\n                delete options.host;\n            }\n        }\n        // Mix in default values used by http.request and others\n        options.protocol = options.protocol || (request.agent && request.agent.protocol) || undefined;\n        options.hostname = options.hostname || 'localhost';\n        return url.format(options);\n    };\n    return HttpDependencyParser;\n}(RequestParser));\nmodule.exports = HttpDependencyParser;\n//# sourceMappingURL=HttpDependencyParser.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar url = require(\"url\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar RequestParser = require(\"./RequestParser\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\n/**\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\n */\nvar HttpRequestParser = (function (_super) {\n    __extends(HttpRequestParser, _super);\n    function HttpRequestParser(request, requestId) {\n        var _this = _super.call(this) || this;\n        if (request) {\n            _this.method = request.method;\n            _this.url = _this._getAbsoluteUrl(request);\n            _this.startTime = +new Date();\n            _this.socketRemoteAddress = request.socket && request.socket.remoteAddress;\n            _this.parseHeaders(request, requestId);\n            if (request.connection) {\n                _this.connectionRemoteAddress = request.connection.remoteAddress;\n                _this.legacySocketRemoteAddress = request.connection[\"socket\"] && request.connection[\"socket\"].remoteAddress;\n            }\n        }\n        return _this;\n    }\n    HttpRequestParser.prototype.onError = function (error, ellapsedMilliseconds) {\n        this._setStatus(undefined, error);\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\n        if (ellapsedMilliseconds) {\n            this.duration = ellapsedMilliseconds;\n        }\n    };\n    HttpRequestParser.prototype.onResponse = function (response, ellapsedMilliseconds) {\n        this._setStatus(response.statusCode, undefined);\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\n        if (ellapsedMilliseconds) {\n            this.duration = ellapsedMilliseconds;\n        }\n    };\n    HttpRequestParser.prototype.getRequestTelemetry = function (baseTelemetry) {\n        var requestTelemetry = {\n            id: this.requestId,\n            name: this.method + \" \" + url.parse(this.url).pathname,\n            url: this.url,\n            /*\n            See https://github.com/Microsoft/ApplicationInsights-dotnet-server/blob/25d695e6a906fbe977f67be3966d25dbf1c50a79/Src/Web/Web.Shared.Net/RequestTrackingTelemetryModule.cs#L250\n            for reference\n            */\n            source: this.sourceCorrelationId,\n            duration: this.duration,\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\n            success: this._isSuccess(),\n            properties: this.properties\n        };\n        // We should keep any parameters the user passed in\n        // Except the fields defined above in requestTelemetry, which take priority\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\n        if (baseTelemetry) {\n            // Copy missing fields\n            for (var key in baseTelemetry) {\n                if (!requestTelemetry[key]) {\n                    requestTelemetry[key] = baseTelemetry[key];\n                }\n            }\n            // Merge properties\n            if (baseTelemetry.properties) {\n                for (var key in baseTelemetry.properties) {\n                    requestTelemetry.properties[key] = baseTelemetry.properties[key];\n                }\n            }\n        }\n        return requestTelemetry;\n    };\n    HttpRequestParser.prototype.getRequestTags = function (tags) {\n        // create a copy of the context for requests since client info will be used here\n        var newTags = {};\n        for (var key in tags) {\n            newTags[key] = tags[key];\n        }\n        // don't override tags if they are already set\n        newTags[HttpRequestParser.keys.locationIp] = tags[HttpRequestParser.keys.locationIp] || this._getIp();\n        newTags[HttpRequestParser.keys.sessionId] = tags[HttpRequestParser.keys.sessionId] || this._getId(\"ai_session\");\n        newTags[HttpRequestParser.keys.userId] = tags[HttpRequestParser.keys.userId] || this._getId(\"ai_user\");\n        newTags[HttpRequestParser.keys.userAuthUserId] = tags[HttpRequestParser.keys.userAuthUserId] || this._getId(\"ai_authUser\");\n        newTags[HttpRequestParser.keys.operationName] = this.getOperationName(tags);\n        newTags[HttpRequestParser.keys.operationParentId] = this.getOperationParentId(tags);\n        newTags[HttpRequestParser.keys.operationId] = this.getOperationId(tags);\n        return newTags;\n    };\n    HttpRequestParser.prototype.getOperationId = function (tags) {\n        return tags[HttpRequestParser.keys.operationId] || this.operationId;\n    };\n    HttpRequestParser.prototype.getOperationParentId = function (tags) {\n        return tags[HttpRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);\n    };\n    HttpRequestParser.prototype.getOperationName = function (tags) {\n        return tags[HttpRequestParser.keys.operationName] || this.method + \" \" + url.parse(this.url).pathname;\n    };\n    HttpRequestParser.prototype.getRequestId = function () {\n        return this.requestId;\n    };\n    HttpRequestParser.prototype.getCorrelationContextHeader = function () {\n        return this.correlationContextHeader;\n    };\n    HttpRequestParser.prototype._getAbsoluteUrl = function (request) {\n        if (!request.headers) {\n            return request.url;\n        }\n        var encrypted = request.connection ? request.connection.encrypted : null;\n        var requestUrl = url.parse(request.url);\n        var pathName = requestUrl.pathname;\n        var search = requestUrl.search;\n        var absoluteUrl = url.format({\n            protocol: encrypted ? \"https\" : \"http\",\n            host: request.headers.host,\n            pathname: pathName,\n            search: search\n        });\n        return absoluteUrl;\n    };\n    HttpRequestParser.prototype._getIp = function () {\n        // regex to match ipv4 without port\n        // Note: including the port would cause the payload to be rejected by the data collector\n        var ipMatch = /[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;\n        var check = function (str) {\n            var results = ipMatch.exec(str);\n            if (results) {\n                return results[0];\n            }\n        };\n        var ip = check(this.rawHeaders[\"x-forwarded-for\"])\n            || check(this.rawHeaders[\"x-client-ip\"])\n            || check(this.rawHeaders[\"x-real-ip\"])\n            || check(this.connectionRemoteAddress)\n            || check(this.socketRemoteAddress)\n            || check(this.legacySocketRemoteAddress);\n        // node v12 returns this if the address is \"localhost\"\n        if (!ip\n            && this.connectionRemoteAddress\n            && this.connectionRemoteAddress.substr\n            && this.connectionRemoteAddress.substr(0, 2) === \"::\") {\n            ip = \"127.0.0.1\";\n        }\n        return ip;\n    };\n    HttpRequestParser.prototype._getId = function (name) {\n        var cookie = (this.rawHeaders && this.rawHeaders[\"cookie\"] &&\n            typeof this.rawHeaders[\"cookie\"] === 'string' && this.rawHeaders[\"cookie\"]) || \"\";\n        var value = HttpRequestParser.parseId(Util.getCookie(name, cookie));\n        return value;\n    };\n    HttpRequestParser.prototype.parseHeaders = function (request, requestId) {\n        this.rawHeaders = request.headers || request.rawHeaders;\n        this.userAgent = request.headers && request.headers[\"user-agent\"];\n        this.sourceCorrelationId = Util.getCorrelationContextTarget(request, RequestResponseHeaders.requestContextSourceKey);\n        if (request.headers) {\n            this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\n            if (request.headers[RequestResponseHeaders.requestIdHeader]) {\n                this.parentId = request.headers[RequestResponseHeaders.requestIdHeader];\n                this.requestId = CorrelationIdManager.generateRequestId(this.parentId);\n                this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\n            }\n            else {\n                // Legacy fallback\n                var rootId = request.headers[RequestResponseHeaders.rootIdHeader];\n                this.parentId = request.headers[RequestResponseHeaders.parentIdHeader];\n                this.requestId = CorrelationIdManager.generateRequestId(rootId || this.parentId);\n                this.correlationContextHeader = null;\n            }\n            if (requestId) {\n                // For the scenarios that don't guarantee an AI-created context,\n                // override the requestId with the provided one.\n                this.requestId = requestId;\n            }\n            this.operationId = CorrelationIdManager.getRootId(this.requestId);\n        }\n    };\n    HttpRequestParser.parseId = function (cookieValue) {\n        return cookieValue.substr(0, cookieValue.indexOf('|'));\n    };\n    HttpRequestParser.keys = new Contracts.ContextTagKeys();\n    return HttpRequestParser;\n}(RequestParser));\nmodule.exports = HttpRequestParser;\n//# sourceMappingURL=HttpRequestParser.js.map","\"use strict\";\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Logging = require(\"../Library/Logging\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar HttpRequestParser = require(\"./HttpRequestParser\");\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\nvar AutoCollectPerformance = require(\"./Performance\");\nvar AutoCollectHttpRequests = (function () {\n    function AutoCollectHttpRequests(client) {\n        if (!!AutoCollectHttpRequests.INSTANCE) {\n            throw new Error(\"Server request tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectHttpRequests.INSTANCE = this;\n        this._client = client;\n    }\n    AutoCollectHttpRequests.prototype.enable = function (isEnabled) {\n        this._isEnabled = isEnabled;\n        // Autocorrelation requires automatic monitoring of incoming server requests\n        // Disabling autocollection but enabling autocorrelation will still enable\n        // request monitoring but will not produce request events\n        if ((this._isAutoCorrelating || this._isEnabled || AutoCollectPerformance.isEnabled()) && !this._isInitialized) {\n            this.useAutoCorrelation(this._isAutoCorrelating);\n            this._initialize();\n        }\n    };\n    AutoCollectHttpRequests.prototype.useAutoCorrelation = function (isEnabled) {\n        if (isEnabled && !this._isAutoCorrelating) {\n            CorrelationContextManager_1.CorrelationContextManager.enable();\n        }\n        else if (!isEnabled && this._isAutoCorrelating) {\n            CorrelationContextManager_1.CorrelationContextManager.disable();\n        }\n        this._isAutoCorrelating = isEnabled;\n    };\n    AutoCollectHttpRequests.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectHttpRequests.prototype.isAutoCorrelating = function () {\n        return this._isAutoCorrelating;\n    };\n    AutoCollectHttpRequests.prototype._generateCorrelationContext = function (requestParser) {\n        if (!this._isAutoCorrelating) {\n            return;\n        }\n        return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getOperationId(this._client.context.tags), requestParser.getRequestId(), requestParser.getOperationName(this._client.context.tags), requestParser.getCorrelationContextHeader());\n    };\n    AutoCollectHttpRequests.prototype._initialize = function () {\n        var _this = this;\n        this._isInitialized = true;\n        var wrapOnRequestHandler = function (onRequest) {\n            if (!onRequest) {\n                return undefined;\n            }\n            if (typeof onRequest !== 'function') {\n                throw new Error('onRequest handler must be a function');\n            }\n            return function (request, response) {\n                var shouldCollect = request && !request[AutoCollectHttpRequests.alreadyAutoCollectedFlag];\n                if (request && shouldCollect) {\n                    // Set up correlation context\n                    var requestParser_1 = new HttpRequestParser(request);\n                    var correlationContext = _this._generateCorrelationContext(requestParser_1);\n                    // Note: Check for if correlation is enabled happens within this method.\n                    // If not enabled, function will directly call the callback.\n                    CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\n                        if (_this._isEnabled) {\n                            // Mark as auto collected\n                            request[AutoCollectHttpRequests.alreadyAutoCollectedFlag] = true;\n                            // Auto collect request\n                            AutoCollectHttpRequests.trackRequest(_this._client, { request: request, response: response }, requestParser_1);\n                        }\n                        // Add this request to the performance counter\n                        // Note: Check for if perf counters are enabled happens within this method.\n                        // TODO: Refactor common bits between trackRequest and countRequest so they can\n                        // be used together, even when perf counters are on, and request tracking is off\n                        AutoCollectPerformance.countRequest(request, response);\n                        if (typeof onRequest === \"function\") {\n                            onRequest(request, response);\n                        }\n                    });\n                }\n                else {\n                    if (typeof onRequest === \"function\") {\n                        onRequest(request, response);\n                    }\n                }\n            };\n        };\n        // The `http.createServer` function will instantiate a new http.Server object.\n        // Inside the Server's constructor, it is using addListener to register the\n        // onRequest handler. So there are two ways to inject the wrapped onRequest handler:\n        // 1) Overwrite Server.prototype.addListener (and .on()) globally and not patching\n        //    the http.createServer call. Or\n        // 2) Overwrite the http.createServer method and add a patched addListener to the\n        //    fresh server instance. This seems more stable for possible future changes as\n        //    it also covers the case where the Server might not use addListener to manage\n        //    the callback internally.\n        //    And also as long as the constructor uses addListener to add the handle, it is\n        //    ok to patch the addListener after construction only. Because if we would patch\n        //    the prototype one and the createServer method, we would wrap the handler twice\n        //    in case of the constructor call.\n        var wrapServerEventHandler = function (server) {\n            var originalAddListener = server.addListener.bind(server);\n            server.addListener = function (eventType, eventHandler) {\n                switch (eventType) {\n                    case 'request':\n                    case 'checkContinue':\n                        return originalAddListener(eventType, wrapOnRequestHandler(eventHandler));\n                    default:\n                        return originalAddListener(eventType, eventHandler);\n                }\n            };\n            // on is an alias to addListener only\n            server.on = server.addListener;\n        };\n        var originalHttpServer = http.createServer;\n        http.createServer = function (onRequest) {\n            // todo: get a pointer to the server so the IP address can be read from server.address\n            var server = originalHttpServer(wrapOnRequestHandler(onRequest));\n            wrapServerEventHandler(server);\n            return server;\n        };\n        var originalHttpsServer = https.createServer;\n        https.createServer = function (options, onRequest) {\n            var server = originalHttpsServer(options, wrapOnRequestHandler(onRequest));\n            wrapServerEventHandler(server);\n            return server;\n        };\n    };\n    /**\n     * Tracks a request synchronously (doesn't wait for response 'finish' event)\n     */\n    AutoCollectHttpRequests.trackRequestSync = function (client, telemetry) {\n        if (!telemetry.request || !telemetry.response || !client) {\n            Logging.info(\"AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\n            return;\n        }\n        AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\n        // store data about the request\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var requestParser = new HttpRequestParser(telemetry.request, (correlationContext && correlationContext.operation.parentId));\n        // Overwrite correlation context with request parser results\n        if (correlationContext) {\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\n            correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\n        }\n        AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, telemetry.duration, telemetry.error);\n    };\n    /**\n     * Tracks a request by listening to the response 'finish' event\n     */\n    AutoCollectHttpRequests.trackRequest = function (client, telemetry, _requestParser) {\n        if (!telemetry.request || !telemetry.response || !client) {\n            Logging.info(\"AutoCollectHttpRequests.trackRequest was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\n            return;\n        }\n        // store data about the request\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var requestParser = _requestParser || new HttpRequestParser(telemetry.request, correlationContext && correlationContext.operation.parentId);\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {\n            AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\n        }\n        // Overwrite correlation context with request parser results (if not an automatic track. we've already precalculated the correlation context in that case)\n        if (correlationContext && !_requestParser) {\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\n            correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation.parentId;\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\n        }\n        // response listeners\n        if (telemetry.response.once) {\n            telemetry.response.once(\"finish\", function () {\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, null);\n            });\n        }\n        // track a failed request if an error is emitted\n        if (telemetry.request.on) {\n            telemetry.request.on(\"error\", function (error) {\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, error);\n            });\n        }\n    };\n    /**\n     * Add the target correlationId to the response headers, if not already provided.\n     */\n    AutoCollectHttpRequests.addResponseCorrelationIdHeader = function (client, response) {\n        if (client.config && client.config.correlationId &&\n            response.getHeader && response.setHeader && !response.headersSent) {\n            var correlationHeader = response.getHeader(RequestResponseHeaders.requestContextHeader);\n            if (correlationHeader) {\n                var components = correlationHeader.split(\",\");\n                var key_1 = RequestResponseHeaders.requestContextSourceKey + \"=\";\n                if (!components.some(function (value) { return value.substring(0, key_1.length) === key_1; })) {\n                    response.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\n                }\n            }\n            else {\n                response.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\n            }\n        }\n    };\n    AutoCollectHttpRequests.endRequest = function (client, requestParser, telemetry, ellapsedMilliseconds, error) {\n        if (error) {\n            requestParser.onError(error, ellapsedMilliseconds);\n        }\n        else {\n            requestParser.onResponse(telemetry.response, ellapsedMilliseconds);\n        }\n        var requestTelemetry = requestParser.getRequestTelemetry(telemetry);\n        requestTelemetry.tagOverrides = requestParser.getRequestTags(client.context.tags);\n        if (telemetry.tagOverrides) {\n            for (var key in telemetry.tagOverrides) {\n                requestTelemetry.tagOverrides[key] = telemetry.tagOverrides[key];\n            }\n        }\n        requestTelemetry.contextObjects = requestTelemetry.contextObjects || {};\n        requestTelemetry.contextObjects[\"http.ServerRequest\"] = telemetry.request;\n        requestTelemetry.contextObjects[\"http.ServerResponse\"] = telemetry.response;\n        client.trackRequest(requestTelemetry);\n    };\n    AutoCollectHttpRequests.prototype.dispose = function () {\n        AutoCollectHttpRequests.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectHttpRequests.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\n    return AutoCollectHttpRequests;\n}());\nmodule.exports = AutoCollectHttpRequests;\n//# sourceMappingURL=HttpRequests.js.map","\"use strict\";\nvar os = require(\"os\");\nvar Logging = require(\"../Library/Logging\");\nvar AutoCollectPerformance = (function () {\n    function AutoCollectPerformance(client) {\n        if (!!AutoCollectPerformance.INSTANCE) {\n            throw new Error(\"Performance tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectPerformance.INSTANCE = this;\n        this._isInitialized = false;\n        this._client = client;\n    }\n    AutoCollectPerformance.prototype.enable = function (isEnabled) {\n        var _this = this;\n        this._isEnabled = isEnabled;\n        if (this._isEnabled && !this._isInitialized) {\n            this._isInitialized = true;\n        }\n        if (isEnabled) {\n            if (!this._handle) {\n                this._lastCpus = os.cpus();\n                this._lastRequests = {\n                    totalRequestCount: AutoCollectPerformance._totalRequestCount,\n                    totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\n                    time: +new Date\n                };\n                this._handle = setInterval(function () { return _this.trackPerformance(); }, 60000);\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\n            }\n        }\n        else {\n            if (this._handle) {\n                clearInterval(this._handle);\n                this._handle = undefined;\n            }\n        }\n    };\n    AutoCollectPerformance.countRequest = function (request, response) {\n        var _this = this;\n        if (!AutoCollectPerformance.isEnabled()) {\n            return;\n        }\n        var start = +new Date;\n        if (!request || !response) {\n            Logging.warn(\"AutoCollectPerformance.countRequest was called with invalid parameters: \", !!request, !!response);\n            return;\n        }\n        // response listeners\n        if (typeof response.once === \"function\") {\n            response.once(\"finish\", function () {\n                var end = +new Date;\n                _this._lastRequestExecutionTime = end - start;\n                AutoCollectPerformance._totalRequestCount++;\n                if (response.statusCode >= 400) {\n                    AutoCollectPerformance._totalFailedRequestCount++;\n                }\n            });\n        }\n    };\n    AutoCollectPerformance.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectPerformance.isEnabled = function () {\n        return AutoCollectPerformance.INSTANCE && AutoCollectPerformance.INSTANCE._isEnabled;\n    };\n    AutoCollectPerformance.prototype.trackPerformance = function () {\n        this._trackCpu();\n        this._trackMemory();\n        this._trackNetwork();\n    };\n    AutoCollectPerformance.prototype._trackCpu = function () {\n        // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary\n        // to find the delta since the last measurement\n        var cpus = os.cpus();\n        if (cpus && cpus.length && this._lastCpus && cpus.length === this._lastCpus.length) {\n            var totalUser = 0;\n            var totalSys = 0;\n            var totalNice = 0;\n            var totalIdle = 0;\n            var totalIrq = 0;\n            for (var i = 0; !!cpus && i < cpus.length; i++) {\n                var cpu = cpus[i];\n                var lastCpu = this._lastCpus[i];\n                var name = \"% cpu(\" + i + \") \";\n                var model = cpu.model;\n                var speed = cpu.speed;\n                var times = cpu.times;\n                var lastTimes = lastCpu.times;\n                // user cpu time (or) % CPU time spent in user space\n                var user = (times.user - lastTimes.user) || 0;\n                totalUser += user;\n                // system cpu time (or) % CPU time spent in kernel space\n                var sys = (times.sys - lastTimes.sys) || 0;\n                totalSys += sys;\n                // user nice cpu time (or) % CPU time spent on low priority processes\n                var nice = (times.nice - lastTimes.nice) || 0;\n                totalNice += nice;\n                // idle cpu time (or) % CPU time spent idle\n                var idle = (times.idle - lastTimes.idle) || 0;\n                totalIdle += idle;\n                // irq (or) % CPU time spent servicing/handling hardware interrupts\n                var irq = (times.irq - lastTimes.irq) || 0;\n                totalIrq += irq;\n            }\n            var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;\n            this._client.trackMetric({ name: \"\\\\Processor(_Total)\\\\% Processor Time\", value: ((combinedTotal - totalIdle) / combinedTotal) * 100 });\n            this._client.trackMetric({ name: \"\\\\Process(??APP_WIN32_PROC??)\\\\% Processor Time\", value: (totalUser / combinedTotal) * 100 });\n        }\n        this._lastCpus = cpus;\n    };\n    AutoCollectPerformance.prototype._trackMemory = function () {\n        var freeMem = os.freemem();\n        var usedMem = process.memoryUsage().rss;\n        this._client.trackMetric({ name: \"\\\\Process(??APP_WIN32_PROC??)\\\\Private Bytes\", value: usedMem });\n        this._client.trackMetric({ name: \"\\\\Memory\\\\Available Bytes\", value: freeMem });\n    };\n    AutoCollectPerformance.prototype._trackNetwork = function () {\n        // track total request counters\n        var lastRequests = this._lastRequests;\n        var requests = {\n            totalRequestCount: AutoCollectPerformance._totalRequestCount,\n            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\n            time: +new Date\n        };\n        var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;\n        var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;\n        var elapsedMs = requests.time - lastRequests.time;\n        var elapsedSeconds = elapsedMs / 1000;\n        if (elapsedMs > 0) {\n            var requestsPerSec = intervalRequests / elapsedSeconds;\n            var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;\n            this._client.trackMetric({ name: \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Requests/Sec\", value: requestsPerSec });\n            this._client.trackMetric({ name: \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Request Execution Time\", value: AutoCollectPerformance._lastRequestExecutionTime });\n        }\n        this._lastRequests = requests;\n    };\n    AutoCollectPerformance.prototype.dispose = function () {\n        AutoCollectPerformance.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectPerformance._totalRequestCount = 0;\n    AutoCollectPerformance._totalFailedRequestCount = 0;\n    AutoCollectPerformance._lastRequestExecutionTime = 0;\n    return AutoCollectPerformance;\n}());\nmodule.exports = AutoCollectPerformance;\n//# sourceMappingURL=Performance.js.map","\"use strict\";\n/**\n * Base class for helpers that read data from HTTP requst/response objects and convert them\n * into the telemetry contract objects.\n */\nvar RequestParser = (function () {\n    function RequestParser() {\n    }\n    /**\n     * Gets a url parsed out from request options\n     */\n    RequestParser.prototype.getUrl = function () {\n        return this.url;\n    };\n    RequestParser.prototype.RequestParser = function () {\n        this.startTime = +new Date();\n    };\n    RequestParser.prototype._setStatus = function (status, error) {\n        var endTime = +new Date();\n        this.duration = endTime - this.startTime;\n        this.statusCode = status;\n        var properties = this.properties || {};\n        if (error) {\n            if (typeof error === \"string\") {\n                properties[\"error\"] = error;\n            }\n            else if (error instanceof Error) {\n                properties[\"error\"] = error.message;\n            }\n            else if (typeof error === \"object\") {\n                for (var key in error) {\n                    properties[key] = error[key] && error[key].toString && error[key].toString();\n                }\n            }\n        }\n        this.properties = properties;\n    };\n    RequestParser.prototype._isSuccess = function () {\n        return (0 < this.statusCode) && (this.statusCode < 400);\n    };\n    return RequestParser;\n}());\nmodule.exports = RequestParser;\n//# sourceMappingURL=RequestParser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\n// Mapping from bunyan levels defined at https://github.com/trentm/node-bunyan/blob/master/lib/bunyan.js#L256\nvar bunyanToAILevelMap = {\n    10: Contracts_1.SeverityLevel.Verbose,\n    20: Contracts_1.SeverityLevel.Verbose,\n    30: Contracts_1.SeverityLevel.Information,\n    40: Contracts_1.SeverityLevel.Warning,\n    50: Contracts_1.SeverityLevel.Error,\n    60: Contracts_1.SeverityLevel.Critical,\n};\nvar subscriber = function (event) {\n    clients.forEach(function (client) {\n        var AIlevel = bunyanToAILevelMap[event.data.level];\n        client.trackTrace({ message: event.data.result, severity: AIlevel });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"bunyan\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=bunyan.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nvar subscriber = function (event) {\n    clients.forEach(function (client) {\n        // Message can have a trailing newline\n        var message = event.data.message;\n        if (message.lastIndexOf(\"\\n\") == message.length - 1) {\n            message = message.substring(0, message.length - 1);\n        }\n        client.trackTrace({ message: message, severity: (event.data.stderr ? Contracts_1.SeverityLevel.Warning : Contracts_1.SeverityLevel.Information) });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"console\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=console.sub.js.map","\"use strict\";\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IsInitialized = !process.env[\"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\"];\nif (exports.IsInitialized) {\n    var publishers = require(\"diagnostic-channel-publishers\");\n    var individualOptOuts = process.env[\"APPLICATION_INSIGHTS_NO_PATCH_MODULES\"] || \"\";\n    var unpatchedModules = individualOptOuts.split(\",\");\n    var modules = {\n        bunyan: publishers.bunyan,\n        console: publishers.console,\n        mongodb: publishers.mongodb,\n        mongodbCore: publishers.mongodbCore,\n        mysql: publishers.mysql,\n        redis: publishers.redis,\n        pg: publishers.pg,\n        pgPool: publishers.pgPool,\n        winston: publishers.winston\n    };\n    for (var mod in modules) {\n        if (unpatchedModules.indexOf(mod) === -1) {\n            modules[mod].enable();\n        }\n    }\n}\nfunction registerContextPreservation(cb) {\n    if (!exports.IsInitialized) {\n        return;\n    }\n    require(\"diagnostic-channel\").channel.addContextPreservation(cb);\n}\nexports.registerContextPreservation = registerContextPreservation;\n//# sourceMappingURL=initialization.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        var dbName = (event.data.startedData && event.data.startedData.databaseName) || \"Unknown database\";\n        client.trackDependency({\n            target: dbName,\n            data: event.data.event.commandName,\n            name: event.data.event.commandName,\n            duration: event.data.event.duration,\n            success: event.data.succeeded,\n            /* TODO: transmit result code from mongo */\n            resultCode: event.data.succeeded ? \"0\" : \"1\",\n            dependencyTypeName: 'mongodb'\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"mongodb\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"mongodb\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        var queryObj = event.data.query || {};\n        var sqlString = queryObj.sql || \"Unknown query\";\n        var success = !event.data.err;\n        var connection = queryObj._connection || {};\n        var connectionConfig = connection.config || {};\n        var dbName = connectionConfig.socketPath ? connectionConfig.socketPath : (connectionConfig.host || \"localhost\") + \":\" + connectionConfig.port;\n        client.trackDependency({\n            target: dbName,\n            data: sqlString,\n            name: sqlString,\n            duration: event.data.duration,\n            success: success,\n            /* TODO: transmit result code from mysql */\n            resultCode: success ? \"0\" : \"1\",\n            dependencyTypeName: \"mysql\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"mysql\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"mysql\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=mysql.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        var q = event.data.query;\n        var sql = (q.preparable && q.preparable.text) || q.plan || q.text || \"unknown query\";\n        var success = !event.data.error;\n        var conn = event.data.database.host + \":\" + event.data.database.port;\n        client.trackDependency({\n            target: conn,\n            data: sql,\n            name: sql,\n            duration: event.data.duration,\n            success: success,\n            resultCode: success ? \"0\" : \"1\",\n            dependencyTypeName: \"postgres\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"postgres\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"postgres\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=postgres.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        if (event.data.commandObj.command === \"info\") {\n            // We don't want to report 'info', it's irrelevant\n            return;\n        }\n        client.trackDependency({\n            target: event.data.address,\n            name: event.data.commandObj.command,\n            data: event.data.commandObj.command,\n            duration: event.data.duration,\n            success: !event.data.err,\n            /* TODO: transmit result code from redis */\n            resultCode: event.data.err ? \"1\" : \"0\",\n            dependencyTypeName: \"redis\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"redis\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"redis\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=redis.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nvar winstonToAILevelMap = {\n    syslog: function (og) {\n        var map = {\n            emerg: Contracts_1.SeverityLevel.Critical,\n            alert: Contracts_1.SeverityLevel.Critical,\n            crit: Contracts_1.SeverityLevel.Critical,\n            error: Contracts_1.SeverityLevel.Error,\n            warning: Contracts_1.SeverityLevel.Warning,\n            notice: Contracts_1.SeverityLevel.Information,\n            info: Contracts_1.SeverityLevel.Information,\n            debug: Contracts_1.SeverityLevel.Verbose\n        };\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\n    },\n    npm: function (og) {\n        var map = {\n            error: Contracts_1.SeverityLevel.Error,\n            warn: Contracts_1.SeverityLevel.Warning,\n            info: Contracts_1.SeverityLevel.Information,\n            verbose: Contracts_1.SeverityLevel.Verbose,\n            debug: Contracts_1.SeverityLevel.Verbose,\n            silly: Contracts_1.SeverityLevel.Verbose\n        };\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\n    },\n    unknown: function (og) {\n        return Contracts_1.SeverityLevel.Information;\n    }\n};\nvar subscriber = function (event) {\n    clients.forEach(function (client) {\n        var AIlevel = winstonToAILevelMap[event.data.levelKind](event.data.level);\n        client.trackTrace({\n            message: event.data.message,\n            severity: AIlevel,\n            properties: event.data.meta\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"winston\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=winston.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Generated_1 = require(\"./Generated\");\nvar RemoteDependencyDataConstants = (function () {\n    function RemoteDependencyDataConstants() {\n    }\n    RemoteDependencyDataConstants.TYPE_HTTP = \"Http\";\n    RemoteDependencyDataConstants.TYPE_AI = \"Http (tracked component)\";\n    return RemoteDependencyDataConstants;\n}());\nexports.RemoteDependencyDataConstants = RemoteDependencyDataConstants;\nfunction domainSupportsProperties(domain) {\n    return \"properties\" in domain ||\n        domain instanceof Generated_1.EventData ||\n        domain instanceof Generated_1.ExceptionData ||\n        domain instanceof Generated_1.MessageData ||\n        domain instanceof Generated_1.MetricData ||\n        domain instanceof Generated_1.PageViewData ||\n        domain instanceof Generated_1.RemoteDependencyData ||\n        domain instanceof Generated_1.RequestData;\n}\nexports.domainSupportsProperties = domainSupportsProperties;\n//# sourceMappingURL=Constants.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of AvailabilityData represent the result of executing an availability test.\n */\nvar AvailabilityData = (function (_super) {\n    __extends(AvailabilityData, _super);\n    function AvailabilityData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return AvailabilityData;\n}(Domain));\nmodule.exports = AvailabilityData;\n//# sourceMappingURL=AvailabilityData.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Data struct to contain only C section with custom fields.\n */\nvar Base = (function () {\n    function Base() {\n    }\n    return Base;\n}());\nmodule.exports = Base;\n//# sourceMappingURL=Base.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\nvar ContextTagKeys = (function () {\n    function ContextTagKeys() {\n        this.applicationVersion = \"ai.application.ver\";\n        this.deviceId = \"ai.device.id\";\n        this.deviceLocale = \"ai.device.locale\";\n        this.deviceModel = \"ai.device.model\";\n        this.deviceOEMName = \"ai.device.oemName\";\n        this.deviceOSVersion = \"ai.device.osVersion\";\n        this.deviceType = \"ai.device.type\";\n        this.locationIp = \"ai.location.ip\";\n        this.operationId = \"ai.operation.id\";\n        this.operationName = \"ai.operation.name\";\n        this.operationParentId = \"ai.operation.parentId\";\n        this.operationSyntheticSource = \"ai.operation.syntheticSource\";\n        this.operationCorrelationVector = \"ai.operation.correlationVector\";\n        this.sessionId = \"ai.session.id\";\n        this.sessionIsFirst = \"ai.session.isFirst\";\n        this.userAccountId = \"ai.user.accountId\";\n        this.userId = \"ai.user.id\";\n        this.userAuthUserId = \"ai.user.authUserId\";\n        this.cloudRole = \"ai.cloud.role\";\n        this.cloudRoleInstance = \"ai.cloud.roleInstance\";\n        this.internalSdkVersion = \"ai.internal.sdkVersion\";\n        this.internalAgentVersion = \"ai.internal.agentVersion\";\n        this.internalNodeName = \"ai.internal.nodeName\";\n    }\n    return ContextTagKeys;\n}());\nmodule.exports = ContextTagKeys;\n//# sourceMappingURL=ContextTagKeys.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Base = require(\"./Base\");\n\"use strict\";\n/**\n * Data struct to contain both B and C sections.\n */\nvar Data = (function (_super) {\n    __extends(Data, _super);\n    function Data() {\n        return _super.call(this) || this;\n    }\n    return Data;\n}(Base));\nmodule.exports = Data;\n//# sourceMappingURL=Data.js.map","\"use strict\";\n// THIS FILE WAS AUTOGENERATED\nvar DataPointType = require(\"./DataPointType\");\n\"use strict\";\n/**\n * Metric data single measurement.\n */\nvar DataPoint = (function () {\n    function DataPoint() {\n        this.kind = DataPointType.Measurement;\n    }\n    return DataPoint;\n}());\nmodule.exports = DataPoint;\n//# sourceMappingURL=DataPoint.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Type of the metric data measurement.\n */\nvar DataPointType;\n(function (DataPointType) {\n    DataPointType[DataPointType[\"Measurement\"] = 0] = \"Measurement\";\n    DataPointType[DataPointType[\"Aggregation\"] = 1] = \"Aggregation\";\n})(DataPointType || (DataPointType = {}));\nmodule.exports = DataPointType;\n//# sourceMappingURL=DataPointType.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * The abstract common base of all domains.\n */\nvar Domain = (function () {\n    function Domain() {\n    }\n    return Domain;\n}());\nmodule.exports = Domain;\n//# sourceMappingURL=Domain.js.map","\"use strict\";\n/**\n * System variables for a telemetry item.\n */\nvar Envelope = (function () {\n    function Envelope() {\n        this.ver = 1;\n        this.sampleRate = 100.0;\n        this.tags = {};\n    }\n    return Envelope;\n}());\nmodule.exports = Envelope;\n//# sourceMappingURL=Envelope.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of Event represent structured event records that can be grouped and searched by their properties. Event data item also creates a metric of event count by name.\n */\nvar EventData = (function (_super) {\n    __extends(EventData, _super);\n    function EventData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return EventData;\n}(Domain));\nmodule.exports = EventData;\n//# sourceMappingURL=EventData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Exception represents a handled or unhandled exception that occurred during execution of the monitored application.\n */\nvar ExceptionData = (function (_super) {\n    __extends(ExceptionData, _super);\n    function ExceptionData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.exceptions = [];\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return ExceptionData;\n}(Domain));\nmodule.exports = ExceptionData;\n//# sourceMappingURL=ExceptionData.js.map","\"use strict\";\n/**\n * Exception details of the exception in a chain.\n */\nvar ExceptionDetails = (function () {\n    function ExceptionDetails() {\n        this.hasFullStack = true;\n        this.parsedStack = [];\n    }\n    return ExceptionDetails;\n}());\nmodule.exports = ExceptionDetails;\n//# sourceMappingURL=ExceptionDetails.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of Message represent printf-like trace statements that are text-searched. Log4Net, NLog and other text-based log file entries are translated into intances of this type. The message does not have measurements.\n */\nvar MessageData = (function (_super) {\n    __extends(MessageData, _super);\n    function MessageData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        return _this;\n    }\n    return MessageData;\n}(Domain));\nmodule.exports = MessageData;\n//# sourceMappingURL=MessageData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of the Metric item is a list of measurements (single data points) and/or aggregations.\n */\nvar MetricData = (function (_super) {\n    __extends(MetricData, _super);\n    function MetricData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.metrics = [];\n        _this.properties = {};\n        return _this;\n    }\n    return MetricData;\n}(Domain));\nmodule.exports = MetricData;\n//# sourceMappingURL=MetricData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar EventData = require(\"./EventData\");\n\"use strict\";\n/**\n * An instance of PageView represents a generic action on a page like a button click. It is also the base type for PageView.\n */\nvar PageViewData = (function (_super) {\n    __extends(PageViewData, _super);\n    function PageViewData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return PageViewData;\n}(EventData));\nmodule.exports = PageViewData;\n//# sourceMappingURL=PageViewData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Remote Dependency represents an interaction of the monitored component with a remote component/service like SQL or an HTTP endpoint.\n */\nvar RemoteDependencyData = (function (_super) {\n    __extends(RemoteDependencyData, _super);\n    function RemoteDependencyData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.success = true;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return RemoteDependencyData;\n}(Domain));\nmodule.exports = RemoteDependencyData;\n//# sourceMappingURL=RemoteDependencyData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Request represents completion of an external request to the application to do work and contains a summary of that request execution and the results.\n */\nvar RequestData = (function (_super) {\n    __extends(RequestData, _super);\n    function RequestData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return RequestData;\n}(Domain));\nmodule.exports = RequestData;\n//# sourceMappingURL=RequestData.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Defines the level of severity for the event.\n */\nvar SeverityLevel;\n(function (SeverityLevel) {\n    SeverityLevel[SeverityLevel[\"Verbose\"] = 0] = \"Verbose\";\n    SeverityLevel[SeverityLevel[\"Information\"] = 1] = \"Information\";\n    SeverityLevel[SeverityLevel[\"Warning\"] = 2] = \"Warning\";\n    SeverityLevel[SeverityLevel[\"Error\"] = 3] = \"Error\";\n    SeverityLevel[SeverityLevel[\"Critical\"] = 4] = \"Critical\";\n})(SeverityLevel || (SeverityLevel = {}));\nmodule.exports = SeverityLevel;\n//# sourceMappingURL=SeverityLevel.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Stack frame information.\n */\nvar StackFrame = (function () {\n    function StackFrame() {\n    }\n    return StackFrame;\n}());\nmodule.exports = StackFrame;\n//# sourceMappingURL=StackFrame.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AvailabilityData = require(\"./AvailabilityData\");\nexports.Base = require(\"./Base\");\nexports.ContextTagKeys = require(\"./ContextTagKeys\");\nexports.Data = require(\"./Data\");\nexports.DataPoint = require(\"./DataPoint\");\nexports.DataPointType = require(\"./DataPointType\");\nexports.Domain = require(\"./Domain\");\nexports.Envelope = require(\"./Envelope\");\nexports.EventData = require(\"./EventData\");\nexports.ExceptionData = require(\"./ExceptionData\");\nexports.ExceptionDetails = require(\"./ExceptionDetails\");\nexports.MessageData = require(\"./MessageData\");\nexports.MetricData = require(\"./MetricData\");\nexports.PageViewData = require(\"./PageViewData\");\nexports.RemoteDependencyData = require(\"./RemoteDependencyData\");\nexports.RequestData = require(\"./RequestData\");\nexports.SeverityLevel = require(\"./SeverityLevel\");\nexports.StackFrame = require(\"./StackFrame\");\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Converts the user-friendly enumeration TelemetryType to the underlying schema baseType value\n * @param type Type to convert to BaseData string\n */\nfunction telemetryTypeToBaseType(type) {\n    switch (type) {\n        case TelemetryType.Event:\n            return \"EventData\";\n        case TelemetryType.Exception:\n            return \"ExceptionData\";\n        case TelemetryType.Trace:\n            return \"MessageData\";\n        case TelemetryType.Metric:\n            return \"MetricData\";\n        case TelemetryType.Request:\n            return \"RequestData\";\n        case TelemetryType.Dependency:\n            return \"RemoteDependencyData\";\n    }\n    return undefined;\n}\nexports.telemetryTypeToBaseType = telemetryTypeToBaseType;\n/**\n * Converts the schema baseType value to the user-friendly enumeration TelemetryType\n * @param baseType BaseData string to convert to TelemetryType\n */\nfunction baseTypeToTelemetryType(baseType) {\n    switch (baseType) {\n        case \"EventData\":\n            return TelemetryType.Event;\n        case \"ExceptionData\":\n            return TelemetryType.Exception;\n        case \"MessageData\":\n            return TelemetryType.Trace;\n        case \"MetricData\":\n            return TelemetryType.Metric;\n        case \"RequestData\":\n            return TelemetryType.Request;\n        case \"RemoteDependencyData\":\n            return TelemetryType.Dependency;\n    }\n    return undefined;\n}\nexports.baseTypeToTelemetryType = baseTypeToTelemetryType;\n/**\n * Telemetry types supported by this SDK\n */\nvar TelemetryType;\n(function (TelemetryType) {\n    TelemetryType[TelemetryType[\"Event\"] = 0] = \"Event\";\n    TelemetryType[TelemetryType[\"Exception\"] = 1] = \"Exception\";\n    TelemetryType[TelemetryType[\"Trace\"] = 2] = \"Trace\";\n    TelemetryType[TelemetryType[\"Metric\"] = 3] = \"Metric\";\n    TelemetryType[TelemetryType[\"Request\"] = 4] = \"Request\";\n    TelemetryType[TelemetryType[\"Dependency\"] = 5] = \"Dependency\";\n})(TelemetryType = exports.TelemetryType || (exports.TelemetryType = {}));\n//# sourceMappingURL=TelemetryType.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./TelemetryType\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./Constants\"));\n__export(require(\"./Generated\"));\n__export(require(\"./TelemetryTypes\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar Logging = require(\"./Logging\");\nvar Channel = (function () {\n    function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {\n        this._buffer = [];\n        this._lastSend = 0;\n        this._isDisabled = isDisabled;\n        this._getBatchSize = getBatchSize;\n        this._getBatchIntervalMs = getBatchIntervalMs;\n        this._sender = sender;\n    }\n    /**\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\n     * @param value if true events that occured while client is offline will be cached on disk\n     * @param resendInterval The wait interval for resending cached events.\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\n     * @returns {Configuration} this class\n     */\n    Channel.prototype.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\n        this._sender.setDiskRetryMode(value, resendInterval, maxBytesOnDisk);\n    };\n    /**\n     * Add a telemetry item to the send buffer\n     */\n    Channel.prototype.send = function (envelope) {\n        var _this = this;\n        // if master off switch is set, don't send any data\n        if (this._isDisabled()) {\n            // Do not send/save data\n            return;\n        }\n        // validate input\n        if (!envelope) {\n            Logging.warn(\"Cannot send null/undefined telemetry\");\n            return;\n        }\n        // check if the incoming payload is too large, truncate if necessary\n        var payload = this._stringify(envelope);\n        if (typeof payload !== \"string\") {\n            return;\n        }\n        // enqueue the payload\n        this._buffer.push(payload);\n        // flush if we would exceed the max-size limit by adding this item\n        if (this._buffer.length >= this._getBatchSize()) {\n            this.triggerSend(false);\n            return;\n        }\n        // ensure an invocation timeout is set if anything is in the buffer\n        if (!this._timeoutHandle && this._buffer.length > 0) {\n            this._timeoutHandle = setTimeout(function () {\n                _this._timeoutHandle = null;\n                _this.triggerSend(false);\n            }, this._getBatchIntervalMs());\n        }\n    };\n    /**\n     * Immediately send buffered data\n     */\n    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {\n        var bufferIsEmpty = this._buffer.length < 1;\n        if (!bufferIsEmpty) {\n            // compose an array of payloads\n            var batch = this._buffer.join(\"\\n\");\n            // invoke send\n            if (isNodeCrashing) {\n                this._sender.saveOnCrash(batch);\n                if (typeof callback === \"function\") {\n                    callback(\"data saved on crash\");\n                }\n            }\n            else {\n                this._sender.send(new Buffer(batch), callback);\n            }\n        }\n        // update lastSend time to enable throttling\n        this._lastSend = +new Date;\n        // clear buffer\n        this._buffer.length = 0;\n        clearTimeout(this._timeoutHandle);\n        this._timeoutHandle = null;\n        if (bufferIsEmpty && typeof callback === \"function\") {\n            callback(\"no data to send\");\n        }\n    };\n    Channel.prototype._stringify = function (envelope) {\n        try {\n            return JSON.stringify(envelope);\n        }\n        catch (error) {\n            Logging.warn(\"Failed to serialize payload\", error, envelope);\n        }\n    };\n    return Channel;\n}());\nmodule.exports = Channel;\n//# sourceMappingURL=Channel.js.map","\"use strict\";\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\nvar Config = (function () {\n    function Config(instrumentationKey) {\n        var _this = this;\n        this.endpointBase = \"https://dc.services.visualstudio.com\";\n        this.instrumentationKey = instrumentationKey || Config._getInstrumentationKey();\n        this.endpointUrl = this.endpointBase + \"/v2/track\";\n        this.maxBatchSize = 250;\n        this.maxBatchIntervalMs = 15000;\n        this.disableAppInsights = false;\n        this.samplingPercentage = 100;\n        this.correlationIdRetryIntervalMs = 30 * 1000;\n        this.correlationHeaderExcludedDomains = [\n            \"*.core.windows.net\",\n            \"*.core.chinacloudapi.cn\",\n            \"*.core.cloudapi.de\",\n            \"*.core.usgovcloudapi.net\"\n        ];\n        this.setCorrelationId = function (correlationId) { return _this.correlationId = correlationId; };\n        this.profileQueryEndpoint = process.env[Config.ENV_profileQueryEndpoint] || this.endpointBase;\n        this.proxyHttpUrl = process.env[Config.ENV_http_proxy] || undefined;\n        this.proxyHttpsUrl = process.env[Config.ENV_https_proxy] || undefined;\n        this.httpAgent = undefined;\n        this.httpsAgent = undefined;\n    }\n    Object.defineProperty(Config.prototype, \"profileQueryEndpoint\", {\n        get: function () {\n            return this._profileQueryEndpoint;\n        },\n        set: function (endpoint) {\n            CorrelationIdManager.cancelCorrelationIdQuery(this, this.setCorrelationId);\n            this._profileQueryEndpoint = endpoint;\n            this.correlationId = CorrelationIdManager.correlationIdPrefix; // Reset the correlationId while we wait for the new query\n            CorrelationIdManager.queryCorrelationId(this, this.setCorrelationId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Config._getInstrumentationKey = function () {\n        // check for both the documented env variable and the azure-prefixed variable\n        var iKey = process.env[Config.ENV_iKey]\n            || process.env[Config.ENV_azurePrefix + Config.ENV_iKey]\n            || process.env[Config.legacy_ENV_iKey]\n            || process.env[Config.ENV_azurePrefix + Config.legacy_ENV_iKey];\n        if (!iKey || iKey == \"\") {\n            throw new Error(\"Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server\");\n        }\n        return iKey;\n    };\n    // Azure adds this prefix to all environment variables\n    Config.ENV_azurePrefix = \"APPSETTING_\";\n    // This key is provided in the readme\n    Config.ENV_iKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\";\n    Config.legacy_ENV_iKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\n    Config.ENV_profileQueryEndpoint = \"APPINSIGHTS_PROFILE_QUERY_ENDPOINT\";\n    Config.ENV_http_proxy = \"http_proxy\";\n    Config.ENV_https_proxy = \"https_proxy\";\n    return Config;\n}());\nmodule.exports = Config;\n//# sourceMappingURL=Config.js.map","\"use strict\";\nvar os = require(\"os\");\nvar fs = require(\"fs\");\nvar path = require(\"path\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Logging = require(\"./Logging\");\nvar Context = (function () {\n    function Context(packageJsonPath) {\n        this.keys = new Contracts.ContextTagKeys();\n        this.tags = {};\n        this._loadApplicationContext();\n        this._loadDeviceContext();\n        this._loadInternalContext();\n    }\n    Context.prototype._loadApplicationContext = function (packageJsonPath) {\n        // note: this should return the host package.json\n        packageJsonPath = packageJsonPath || path.resolve(__dirname, \"../../../../package.json\");\n        if (!Context.appVersion[packageJsonPath]) {\n            Context.appVersion[packageJsonPath] = \"unknown\";\n            try {\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\n                if (packageJson && typeof packageJson.version === \"string\") {\n                    Context.appVersion[packageJsonPath] = packageJson.version;\n                }\n            }\n            catch (exception) {\n                Logging.info(\"unable to read app version: \", exception);\n            }\n        }\n        this.tags[this.keys.applicationVersion] = Context.appVersion[packageJsonPath];\n    };\n    Context.prototype._loadDeviceContext = function () {\n        this.tags[this.keys.deviceId] = \"\";\n        this.tags[this.keys.cloudRoleInstance] = os && os.hostname();\n        this.tags[this.keys.deviceOSVersion] = os && (os.type() + \" \" + os.release());\n        this.tags[this.keys.cloudRole] = Context.DefaultRoleName;\n        // not yet supported tags\n        this.tags[\"ai.device.osArchitecture\"] = os && os.arch();\n        this.tags[\"ai.device.osPlatform\"] = os && os.platform();\n    };\n    Context.prototype._loadInternalContext = function () {\n        // note: this should return the sdk package.json\n        var packageJsonPath = path.resolve(__dirname, \"../../package.json\");\n        if (!Context.sdkVersion) {\n            Context.sdkVersion = \"unknown\";\n            try {\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\n                if (packageJson && typeof packageJson.version === \"string\") {\n                    Context.sdkVersion = packageJson.version;\n                }\n            }\n            catch (exception) {\n                Logging.info(\"unable to read app version: \", exception);\n            }\n        }\n        this.tags[this.keys.internalSdkVersion] = \"node:\" + Context.sdkVersion;\n    };\n    Context.DefaultRoleName = \"Web\";\n    Context.appVersion = {};\n    Context.sdkVersion = null;\n    return Context;\n}());\nmodule.exports = Context;\n//# sourceMappingURL=Context.js.map","\"use strict\";\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar CorrelationIdManager = (function () {\n    function CorrelationIdManager() {\n    }\n    CorrelationIdManager.queryCorrelationId = function (config, callback) {\n        // GET request to `${this.endpointBase}/api/profiles/${this.instrumentationKey}/appId`\n        // If it 404s, the iKey is bad and we should give up\n        // If it fails otherwise, try again later\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\n        if (CorrelationIdManager.completedLookups.hasOwnProperty(appIdUrlString)) {\n            callback(CorrelationIdManager.completedLookups[appIdUrlString]);\n            return;\n        }\n        else if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\n            CorrelationIdManager.pendingLookups[appIdUrlString].push(callback);\n            return;\n        }\n        CorrelationIdManager.pendingLookups[appIdUrlString] = [callback];\n        var fetchAppId = function () {\n            if (!CorrelationIdManager.pendingLookups[appIdUrlString]) {\n                // This query has been cancelled.\n                return;\n            }\n            var requestOptions = {\n                method: 'GET',\n                // Ensure this request is not captured by auto-collection.\n                // Note: we don't refer to the property in HttpDependencyParser because that would cause a cyclical dependency\n                disableAppInsightsAutoCollection: true\n            };\n            Logging.info(CorrelationIdManager.TAG, requestOptions);\n            var req = Util.makeRequest(config, appIdUrlString, requestOptions, function (res) {\n                if (res.statusCode === 200) {\n                    // Success; extract the appId from the body\n                    var appId_1 = \"\";\n                    res.setEncoding(\"utf-8\");\n                    res.on('data', function (data) {\n                        appId_1 += data;\n                    });\n                    res.on('end', function () {\n                        Logging.info(CorrelationIdManager.TAG, appId_1);\n                        var result = CorrelationIdManager.correlationIdPrefix + appId_1;\n                        CorrelationIdManager.completedLookups[appIdUrlString] = result;\n                        if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\n                            CorrelationIdManager.pendingLookups[appIdUrlString].forEach(function (cb) { return cb(result); });\n                        }\n                        delete CorrelationIdManager.pendingLookups[appIdUrlString];\n                    });\n                }\n                else if (res.statusCode >= 400 && res.statusCode < 500) {\n                    // Not found, probably a bad key. Do not try again.\n                    CorrelationIdManager.completedLookups[appIdUrlString] = undefined;\n                    delete CorrelationIdManager.pendingLookups[appIdUrlString];\n                }\n                else {\n                    // Retry after timeout.\n                    setTimeout(fetchAppId, config.correlationIdRetryIntervalMs);\n                }\n            });\n            if (req) {\n                req.on('error', function (error) {\n                    // Unable to contact endpoint.\n                    // Do nothing for now.\n                    Logging.warn(CorrelationIdManager.TAG, error);\n                });\n                req.end();\n            }\n        };\n        setTimeout(fetchAppId, 0);\n    };\n    CorrelationIdManager.cancelCorrelationIdQuery = function (config, callback) {\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\n        var pendingLookups = CorrelationIdManager.pendingLookups[appIdUrlString];\n        if (pendingLookups) {\n            CorrelationIdManager.pendingLookups[appIdUrlString] = pendingLookups.filter(function (cb) { return cb != callback; });\n            if (CorrelationIdManager.pendingLookups[appIdUrlString].length == 0) {\n                delete CorrelationIdManager.pendingLookups[appIdUrlString];\n            }\n        }\n    };\n    /**\n     * Generate a request Id according to https://github.com/lmolkova/correlation/blob/master/hierarchical_request_id.md\n     * @param parentId\n     */\n    CorrelationIdManager.generateRequestId = function (parentId) {\n        if (parentId) {\n            parentId = parentId[0] == '|' ? parentId : '|' + parentId;\n            if (parentId[parentId.length - 1] !== '.') {\n                parentId += '.';\n            }\n            var suffix = (CorrelationIdManager.currentRootId++).toString(16);\n            return CorrelationIdManager.appendSuffix(parentId, suffix, '_');\n        }\n        else {\n            return CorrelationIdManager.generateRootId();\n        }\n    };\n    /**\n     * Given a hierarchical identifier of the form |X.*\n     * return the root identifier X\n     * @param id\n     */\n    CorrelationIdManager.getRootId = function (id) {\n        var endIndex = id.indexOf('.');\n        if (endIndex < 0) {\n            endIndex = id.length;\n        }\n        var startIndex = id[0] === '|' ? 1 : 0;\n        return id.substring(startIndex, endIndex);\n    };\n    CorrelationIdManager.generateRootId = function () {\n        return '|' + Util.w3cTraceId() + '.';\n    };\n    CorrelationIdManager.appendSuffix = function (parentId, suffix, delimiter) {\n        if (parentId.length + suffix.length < CorrelationIdManager.requestIdMaxLength) {\n            return parentId + suffix + delimiter;\n        }\n        // Combined identifier would be too long, so we must truncate it.\n        // We need 9 characters of space: 8 for the overflow ID, 1 for the\n        // overflow delimiter '#'\n        var trimPosition = CorrelationIdManager.requestIdMaxLength - 9;\n        if (parentId.length > trimPosition) {\n            for (; trimPosition > 1; --trimPosition) {\n                var c = parentId[trimPosition - 1];\n                if (c === '.' || c === '_') {\n                    break;\n                }\n            }\n        }\n        if (trimPosition <= 1) {\n            // parentId is not a valid ID\n            return CorrelationIdManager.generateRootId();\n        }\n        suffix = Util.randomu32().toString(16);\n        while (suffix.length < 8) {\n            suffix = '0' + suffix;\n        }\n        return parentId.substring(0, trimPosition) + suffix + '#';\n    };\n    CorrelationIdManager.TAG = \"CorrelationIdManager\";\n    CorrelationIdManager.correlationIdPrefix = \"cid-v1:\";\n    // To avoid extraneous HTTP requests, we maintain a queue of callbacks waiting on a particular appId lookup,\n    // as well as a cache of completed lookups so future requests can be resolved immediately.\n    CorrelationIdManager.pendingLookups = {};\n    CorrelationIdManager.completedLookups = {};\n    CorrelationIdManager.requestIdMaxLength = 1024;\n    CorrelationIdManager.currentRootId = Util.randomu32();\n    return CorrelationIdManager;\n}());\nmodule.exports = CorrelationIdManager;\n//# sourceMappingURL=CorrelationIdManager.js.map","\"use strict\";\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"./Util\");\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\n/**\n * Manages the logic of creating envelopes from Telemetry objects\n */\nvar EnvelopeFactory = (function () {\n    function EnvelopeFactory() {\n    }\n    /**\n     * Creates envelope ready to be sent by Channel\n     * @param telemetry Telemetry data\n     * @param telemetryType Type of telemetry\n     * @param commonProperties Bag of custom common properties to be added to the envelope\n     * @param context Client context\n     * @param config Client configuration\n     */\n    EnvelopeFactory.createEnvelope = function (telemetry, telemetryType, commonProperties, context, config) {\n        var data = null;\n        switch (telemetryType) {\n            case Contracts.TelemetryType.Trace:\n                data = EnvelopeFactory.createTraceData(telemetry);\n                break;\n            case Contracts.TelemetryType.Dependency:\n                data = EnvelopeFactory.createDependencyData(telemetry);\n                break;\n            case Contracts.TelemetryType.Event:\n                data = EnvelopeFactory.createEventData(telemetry);\n                break;\n            case Contracts.TelemetryType.Exception:\n                data = EnvelopeFactory.createExceptionData(telemetry);\n                break;\n            case Contracts.TelemetryType.Request:\n                data = EnvelopeFactory.createRequestData(telemetry);\n                break;\n            case Contracts.TelemetryType.Metric:\n                data = EnvelopeFactory.createMetricData(telemetry);\n                break;\n        }\n        if (commonProperties && Contracts.domainSupportsProperties(data.baseData)) {\n            if (data && data.baseData) {\n                // if no properties are specified just add the common ones\n                if (!data.baseData.properties) {\n                    data.baseData.properties = commonProperties;\n                }\n                else {\n                    // otherwise, check each of the common ones\n                    for (var name in commonProperties) {\n                        // only override if the property `name` has not been set on this item\n                        if (!data.baseData.properties[name]) {\n                            data.baseData.properties[name] = commonProperties[name];\n                        }\n                    }\n                }\n            }\n            // sanitize properties\n            data.baseData.properties = Util.validateStringMap(data.baseData.properties);\n        }\n        var iKey = config ? config.instrumentationKey || \"\" : \"\";\n        var envelope = new Contracts.Envelope();\n        envelope.data = data;\n        envelope.iKey = iKey;\n        // this is kind of a hack, but the envelope name is always the same as the data name sans the chars \"data\"\n        envelope.name =\n            \"Microsoft.ApplicationInsights.\" +\n                iKey.replace(/-/g, \"\") +\n                \".\" +\n                data.baseType.substr(0, data.baseType.length - 4);\n        envelope.tags = this.getTags(context, telemetry.tagOverrides);\n        envelope.time = (new Date()).toISOString();\n        envelope.ver = 1;\n        envelope.sampleRate = config ? config.samplingPercentage : 100;\n        // Exclude metrics from sampling by default\n        if (telemetryType === Contracts.TelemetryType.Metric) {\n            envelope.sampleRate = 100;\n        }\n        return envelope;\n    };\n    EnvelopeFactory.createTraceData = function (telemetry) {\n        var trace = new Contracts.MessageData();\n        trace.message = telemetry.message;\n        trace.properties = telemetry.properties;\n        if (!isNaN(telemetry.severity)) {\n            trace.severityLevel = telemetry.severity;\n        }\n        else {\n            trace.severityLevel = Contracts.SeverityLevel.Information;\n        }\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Trace);\n        data.baseData = trace;\n        return data;\n    };\n    EnvelopeFactory.createDependencyData = function (telemetry) {\n        var remoteDependency = new Contracts.RemoteDependencyData();\n        remoteDependency.name = telemetry.name;\n        remoteDependency.data = telemetry.data;\n        remoteDependency.target = telemetry.target;\n        remoteDependency.duration = Util.msToTimeSpan(telemetry.duration);\n        remoteDependency.success = telemetry.success;\n        remoteDependency.type = telemetry.dependencyTypeName;\n        remoteDependency.properties = telemetry.properties;\n        remoteDependency.resultCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\n        if (telemetry.id) {\n            remoteDependency.id = telemetry.id;\n        }\n        else {\n            remoteDependency.id = Util.w3cTraceId();\n        }\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Dependency);\n        data.baseData = remoteDependency;\n        return data;\n    };\n    EnvelopeFactory.createEventData = function (telemetry) {\n        var event = new Contracts.EventData();\n        event.name = telemetry.name;\n        event.properties = telemetry.properties;\n        event.measurements = telemetry.measurements;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Event);\n        data.baseData = event;\n        return data;\n    };\n    EnvelopeFactory.createExceptionData = function (telemetry) {\n        var exception = new Contracts.ExceptionData();\n        exception.properties = telemetry.properties;\n        exception.severityLevel = Contracts.SeverityLevel.Error;\n        exception.measurements = telemetry.measurements;\n        exception.exceptions = [];\n        var stack = telemetry.exception[\"stack\"];\n        var exceptionDetails = new Contracts.ExceptionDetails();\n        exceptionDetails.message = telemetry.exception.message;\n        exceptionDetails.typeName = telemetry.exception.name;\n        exceptionDetails.parsedStack = this.parseStack(stack);\n        exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) && exceptionDetails.parsedStack.length > 0;\n        exception.exceptions.push(exceptionDetails);\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Exception);\n        data.baseData = exception;\n        return data;\n    };\n    EnvelopeFactory.createRequestData = function (telemetry) {\n        var requestData = new Contracts.RequestData();\n        if (telemetry.id) {\n            requestData.id = telemetry.id;\n        }\n        else {\n            requestData.id = Util.w3cTraceId();\n        }\n        requestData.name = telemetry.name;\n        requestData.url = telemetry.url;\n        requestData.source = telemetry.source;\n        requestData.duration = Util.msToTimeSpan(telemetry.duration);\n        requestData.responseCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\n        requestData.success = telemetry.success;\n        requestData.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Request);\n        data.baseData = requestData;\n        return data;\n    };\n    EnvelopeFactory.createMetricData = function (telemetry) {\n        var metrics = new Contracts.MetricData(); // todo: enable client-batching of these\n        metrics.metrics = [];\n        var metric = new Contracts.DataPoint();\n        metric.count = !isNaN(telemetry.count) ? telemetry.count : 1;\n        metric.kind = Contracts.DataPointType.Aggregation;\n        metric.max = !isNaN(telemetry.max) ? telemetry.max : telemetry.value;\n        metric.min = !isNaN(telemetry.min) ? telemetry.min : telemetry.value;\n        metric.name = telemetry.name;\n        metric.stdDev = !isNaN(telemetry.stdDev) ? telemetry.stdDev : 0;\n        metric.value = telemetry.value;\n        metrics.metrics.push(metric);\n        metrics.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Metric);\n        data.baseData = metrics;\n        return data;\n    };\n    EnvelopeFactory.getTags = function (context, tagOverrides) {\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        // Make a copy of context tags so we don't alter the actual object\n        // Also perform tag overriding\n        var newTags = {};\n        if (context && context.tags) {\n            for (var key in context.tags) {\n                newTags[key] = context.tags[key];\n            }\n        }\n        if (tagOverrides) {\n            for (var key in tagOverrides) {\n                newTags[key] = tagOverrides[key];\n            }\n        }\n        // Fill in internally-populated values if not already set\n        if (correlationContext) {\n            newTags[context.keys.operationId] = newTags[context.keys.operationId] || correlationContext.operation.id;\n            newTags[context.keys.operationName] = newTags[context.keys.operationName] || correlationContext.operation.name;\n            newTags[context.keys.operationParentId] = newTags[context.keys.operationParentId] || correlationContext.operation.parentId;\n        }\n        return newTags;\n    };\n    EnvelopeFactory.parseStack = function (stack) {\n        var parsedStack = undefined;\n        if (typeof stack === \"string\") {\n            var frames = stack.split(\"\\n\");\n            parsedStack = [];\n            var level = 0;\n            var totalSizeInBytes = 0;\n            for (var i = 0; i <= frames.length; i++) {\n                var frame = frames[i];\n                if (_StackFrame.regex.test(frame)) {\n                    var parsedFrame = new _StackFrame(frames[i], level++);\n                    totalSizeInBytes += parsedFrame.sizeInBytes;\n                    parsedStack.push(parsedFrame);\n                }\n            }\n            // DP Constraint - exception parsed stack must be < 32KB\n            // remove frames from the middle to meet the threshold\n            var exceptionParsedStackThreshold = 32 * 1024;\n            if (totalSizeInBytes > exceptionParsedStackThreshold) {\n                var left = 0;\n                var right = parsedStack.length - 1;\n                var size = 0;\n                var acceptedLeft = left;\n                var acceptedRight = right;\n                while (left < right) {\n                    // check size\n                    var lSize = parsedStack[left].sizeInBytes;\n                    var rSize = parsedStack[right].sizeInBytes;\n                    size += lSize + rSize;\n                    if (size > exceptionParsedStackThreshold) {\n                        // remove extra frames from the middle\n                        var howMany = acceptedRight - acceptedLeft + 1;\n                        parsedStack.splice(acceptedLeft, howMany);\n                        break;\n                    }\n                    // update pointers\n                    acceptedLeft = left;\n                    acceptedRight = right;\n                    left++;\n                    right--;\n                }\n            }\n        }\n        return parsedStack;\n    };\n    return EnvelopeFactory;\n}());\nvar _StackFrame = (function () {\n    function _StackFrame(frame, level) {\n        this.sizeInBytes = 0;\n        this.level = level;\n        this.method = \"<no_method>\";\n        this.assembly = Util.trim(frame);\n        var matches = frame.match(_StackFrame.regex);\n        if (matches && matches.length >= 5) {\n            this.method = Util.trim(matches[2]) || this.method;\n            this.fileName = Util.trim(matches[4]) || \"<no_filename>\";\n            this.line = parseInt(matches[5]) || 0;\n        }\n        this.sizeInBytes += this.method.length;\n        this.sizeInBytes += this.fileName.length;\n        this.sizeInBytes += this.assembly.length;\n        // todo: these might need to be removed depending on how the back-end settles on their size calculation\n        this.sizeInBytes += _StackFrame.baseSize;\n        this.sizeInBytes += this.level.toString().length;\n        this.sizeInBytes += this.line.toString().length;\n    }\n    // regex to match stack frames from ie/chrome/ff\n    // methodName=$2, fileName=$4, lineNo=$5, column=$6\n    _StackFrame.regex = /^([\\s]+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\@\\n]+):([0-9]+):([0-9]+)(\\)?)$/;\n    _StackFrame.baseSize = 58; //'{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\n    return _StackFrame;\n}());\nmodule.exports = EnvelopeFactory;\n//# sourceMappingURL=EnvelopeFactory.js.map","\"use strict\";\nvar Logging = (function () {\n    function Logging() {\n    }\n    Logging.info = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (Logging.enableDebug) {\n            console.info(Logging.TAG + message, optionalParams);\n        }\n    };\n    Logging.warn = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (!Logging.disableWarnings) {\n            console.warn(Logging.TAG + message, optionalParams);\n        }\n    };\n    Logging.enableDebug = false;\n    Logging.disableWarnings = false;\n    Logging.TAG = \"ApplicationInsights:\";\n    return Logging;\n}());\nmodule.exports = Logging;\n//# sourceMappingURL=Logging.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar TelemetryClient = require(\"./TelemetryClient\");\nvar ServerRequestTracking = require(\"../AutoCollection/HttpRequests\");\nvar ClientRequestTracking = require(\"../AutoCollection/HttpDependencies\");\nvar Logging = require(\"./Logging\");\n/**\n * Application Insights Telemetry Client for Node.JS. Provides the Application Insights TelemetryClient API\n * in addition to Node-specific helper functions.\n * Construct a new TelemetryClient to have an instance with a different configuration than the default client.\n * In most cases, `appInsights.defaultClient` should be used instead.\n */\nvar NodeClient = (function (_super) {\n    __extends(NodeClient, _super);\n    function NodeClient() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Log RequestTelemetry from HTTP request and response. This method will log immediately without waitng for request completion\n     * and it requires duration parameter to be specified on NodeHttpRequestTelemetry object.\n     * Use trackNodeHttpRequest function to log the telemetry after request completion\n     * @param telemetry Object encapsulating incoming request, response and duration information\n     */\n    NodeClient.prototype.trackNodeHttpRequestSync = function (telemetry) {\n        if (telemetry && telemetry.request && telemetry.response && telemetry.duration) {\n            ServerRequestTracking.trackRequestSync(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.\");\n        }\n    };\n    /**\n     * Log RequestTelemetry from HTTP request and response. This method will `follow` the request to completion.\n     * Use trackNodeHttpRequestSync function to log telemetry immediately without waiting for request completion\n     * @param telemetry Object encapsulating incoming request and response information\n     */\n    NodeClient.prototype.trackNodeHttpRequest = function (telemetry) {\n        if (telemetry.duration || telemetry.error) {\n            Logging.warn(\"trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects.\");\n        }\n        if (telemetry && telemetry.request && telemetry.response) {\n            ServerRequestTracking.trackRequest(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.\");\n        }\n    };\n    /**\n     * Log DependencyTelemetry from outgoing HTTP request. This method will instrument the outgoing request and append\n     * the specified headers and will log the telemetry when outgoing request is complete\n     * @param telemetry Object encapsulating outgoing request information\n     */\n    NodeClient.prototype.trackNodeHttpDependency = function (telemetry) {\n        if (telemetry && telemetry.request) {\n            ClientRequestTracking.trackRequest(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.\");\n        }\n    };\n    return NodeClient;\n}(TelemetryClient));\nmodule.exports = NodeClient;\n//# sourceMappingURL=NodeClient.js.map","\"use strict\";\nmodule.exports = {\n    /**\n     * Request-Context header\n     */\n    requestContextHeader: \"request-context\",\n    /**\n     * Source instrumentation header that is added by an application while making http\n     * requests and retrieved by the other application when processing incoming requests.\n     */\n    requestContextSourceKey: \"appId\",\n    /**\n     * Target instrumentation header that is added to the response and retrieved by the\n     * calling application when processing incoming responses.\n     */\n    requestContextTargetKey: \"appId\",\n    /**\n     * Request-Id header\n     */\n    requestIdHeader: \"request-id\",\n    /**\n     * Legacy Header containing the id of the immidiate caller\n     */\n    parentIdHeader: \"x-ms-request-id\",\n    /**\n     * Legacy Header containing the correlation id that kept the same for every telemetry item\n     * accross transactions\n     */\n    rootIdHeader: \"x-ms-request-root-id\",\n    /**\n     * Correlation-Context header\n     *\n     * Not currently actively used, but the contents should be passed from incoming to outgoing requests\n     */\n    correlationContextHeader: \"correlation-context\"\n};\n//# sourceMappingURL=RequestResponseHeaders.js.map","\"use strict\";\nvar fs = require(\"fs\");\nvar os = require(\"os\");\nvar path = require(\"path\");\nvar zlib = require(\"zlib\");\nvar child_process = require(\"child_process\");\nvar Logging = require(\"./Logging\");\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\nvar Util = require(\"./Util\");\nvar Sender = (function () {\n    function Sender(config, onSuccess, onError) {\n        this._config = config;\n        this._onSuccess = onSuccess;\n        this._onError = onError;\n        this._enableDiskRetryMode = false;\n        this._resendInterval = Sender.WAIT_BETWEEN_RESEND;\n        this._maxBytesOnDisk = Sender.MAX_BYTES_ON_DISK;\n        this._numConsecutiveFailures = 0;\n        if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\n            // Node's chmod levels do not appropriately restrict file access on Windows\n            // Use the built-in command line tool ICACLS on Windows to properly restrict\n            // access to the temporary directory used for disk retry mode.\n            if (Sender.USE_ICACLS) {\n                // This should be async - but it's currently safer to have this synchronous\n                // This guarantees we can immediately fail setDiskRetryMode if we need to\n                try {\n                    Sender.OS_PROVIDES_FILE_PROTECTION = fs.existsSync(Sender.ICACLS_PATH);\n                }\n                catch (e) { }\n                if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\n                    Logging.warn(Sender.TAG, \"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.\");\n                }\n            }\n            else {\n                // chmod works everywhere else\n                Sender.OS_PROVIDES_FILE_PROTECTION = true;\n            }\n        }\n    }\n    /**\n    * Enable or disable offline mode\n    */\n    Sender.prototype.setDiskRetryMode = function (value, resendInterval, maxBytesOnDisk) {\n        this._enableDiskRetryMode = Sender.OS_PROVIDES_FILE_PROTECTION && value;\n        if (typeof resendInterval === 'number' && resendInterval >= 0) {\n            this._resendInterval = Math.floor(resendInterval);\n        }\n        if (typeof maxBytesOnDisk === 'number' && maxBytesOnDisk >= 0) {\n            this._maxBytesOnDisk = Math.floor(maxBytesOnDisk);\n        }\n        if (value && !Sender.OS_PROVIDES_FILE_PROTECTION) {\n            this._enableDiskRetryMode = false;\n            Logging.warn(Sender.TAG, \"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.\");\n        }\n    };\n    Sender.prototype.send = function (payload, callback) {\n        var _this = this;\n        var endpointUrl = this._config.endpointUrl;\n        // todo: investigate specifying an agent here: https://nodejs.org/api/http.html#http_class_http_agent\n        var options = {\n            method: \"POST\",\n            withCredentials: false,\n            headers: {\n                \"Content-Type\": \"application/x-json-stream\"\n            }\n        };\n        zlib.gzip(payload, function (err, buffer) {\n            var dataToSend = buffer;\n            if (err) {\n                Logging.warn(err);\n                dataToSend = payload; // something went wrong so send without gzip\n                options.headers[\"Content-Length\"] = payload.length.toString();\n            }\n            else {\n                options.headers[\"Content-Encoding\"] = \"gzip\";\n                options.headers[\"Content-Length\"] = buffer.length;\n            }\n            Logging.info(Sender.TAG, options);\n            // Ensure this request is not captured by auto-collection.\n            options[AutoCollectHttpDependencies.disableCollectionRequestOption] = true;\n            var requestCallback = function (res) {\n                res.setEncoding(\"utf-8\");\n                //returns empty if the data is accepted\n                var responseString = \"\";\n                res.on(\"data\", function (data) {\n                    responseString += data;\n                });\n                res.on(\"end\", function () {\n                    _this._numConsecutiveFailures = 0;\n                    Logging.info(Sender.TAG, responseString);\n                    if (typeof _this._onSuccess === \"function\") {\n                        _this._onSuccess(responseString);\n                    }\n                    if (typeof callback === \"function\") {\n                        callback(responseString);\n                    }\n                    if (_this._enableDiskRetryMode) {\n                        // try to send any cached events if the user is back online\n                        if (res.statusCode === 200) {\n                            setTimeout(function () { return _this._sendFirstFileOnDisk(); }, _this._resendInterval);\n                            // store to disk in case of burst throttling\n                        }\n                        else if (res.statusCode === 408 ||\n                            res.statusCode === 429 ||\n                            res.statusCode === 439 ||\n                            res.statusCode === 500 ||\n                            res.statusCode === 503) {\n                            // TODO: Do not support partial success (206) until _sendFirstFileOnDisk checks payload age\n                            _this._storeToDisk(payload);\n                        }\n                    }\n                });\n            };\n            var req = Util.makeRequest(_this._config, endpointUrl, options, requestCallback);\n            req.on(\"error\", function (error) {\n                // todo: handle error codes better (group to recoverable/non-recoverable and persist)\n                _this._numConsecutiveFailures++;\n                // Only use warn level if retries are disabled or we've had some number of consecutive failures sending data\n                // This is because warn level is printed in the console by default, and we don't want to be noisy for transient and self-recovering errors\n                // Continue informing on each failure if verbose logging is being used\n                if (!_this._enableDiskRetryMode || _this._numConsecutiveFailures > 0 && _this._numConsecutiveFailures % Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN === 0) {\n                    var notice = \"Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:\";\n                    if (_this._enableDiskRetryMode) {\n                        notice = \"Ingestion endpoint could not be reached \" + _this._numConsecutiveFailures + \" consecutive times. There may be resulting telemetry loss. Most recent error:\";\n                    }\n                    Logging.warn(Sender.TAG, notice, error);\n                }\n                else {\n                    var notice = \"Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:\";\n                    Logging.info(Sender.TAG, notice, error);\n                }\n                _this._onErrorHelper(error);\n                if (typeof callback === \"function\") {\n                    var errorMessage = \"error sending telemetry\";\n                    if (error && (typeof error.toString === \"function\")) {\n                        errorMessage = error.toString();\n                    }\n                    callback(errorMessage);\n                }\n                if (_this._enableDiskRetryMode) {\n                    _this._storeToDisk(payload);\n                }\n            });\n            req.write(dataToSend);\n            req.end();\n        });\n    };\n    Sender.prototype.saveOnCrash = function (payload) {\n        if (this._enableDiskRetryMode) {\n            this._storeToDiskSync(payload);\n        }\n    };\n    Sender.prototype._runICACLS = function (args, callback) {\n        var aclProc = child_process.spawn(Sender.ICACLS_PATH, args, { windowsHide: true });\n        aclProc.on(\"error\", function (e) { return callback(e); });\n        aclProc.on(\"close\", function (code, signal) {\n            return callback(code === 0 ? null : new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + code + \")\"));\n        });\n    };\n    Sender.prototype._runICACLSSync = function (args) {\n        // Some very old versions of Node (< 0.11) don't have this\n        if (child_process.spawnSync) {\n            var aclProc = child_process.spawnSync(Sender.ICACLS_PATH, args, { windowsHide: true });\n            if (aclProc.error) {\n                throw aclProc.error;\n            }\n            else if (aclProc.status !== 0) {\n                throw new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + aclProc.status + \")\");\n            }\n        }\n        else {\n            throw new Error(\"Could not synchronously call ICACLS under current version of Node.js\");\n        }\n    };\n    Sender.prototype._getACLIdentity = function (callback) {\n        if (Sender.ACL_IDENTITY) {\n            return callback(null, Sender.ACL_IDENTITY);\n        }\n        var psProc = child_process.spawn(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\n            windowsHide: true,\n            stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\n        });\n        var data = \"\";\n        psProc.stdout.on(\"data\", function (d) { return data += d; });\n        psProc.on(\"error\", function (e) { return callback(e, null); });\n        psProc.on(\"close\", function (code, signal) {\n            Sender.ACL_IDENTITY = data && data.trim();\n            return callback(code === 0 ? null : new Error(\"Getting ACL identity did not succeed (PS returned code \" + code + \")\"), Sender.ACL_IDENTITY);\n        });\n    };\n    Sender.prototype._getACLIdentitySync = function () {\n        if (Sender.ACL_IDENTITY) {\n            return Sender.ACL_IDENTITY;\n        }\n        // Some very old versions of Node (< 0.11) don't have this\n        if (child_process.spawnSync) {\n            var psProc = child_process.spawnSync(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\n                windowsHide: true,\n                stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\n            });\n            if (psProc.error) {\n                throw psProc.error;\n            }\n            else if (psProc.status !== 0) {\n                throw new Error(\"Getting ACL identity did not succeed (PS returned code \" + psProc.status + \")\");\n            }\n            Sender.ACL_IDENTITY = psProc.stdout && psProc.stdout.toString().trim();\n            return Sender.ACL_IDENTITY;\n        }\n        else {\n            throw new Error(\"Could not synchronously get ACL identity under current version of Node.js\");\n        }\n    };\n    Sender.prototype._getACLArguments = function (directory, identity) {\n        return [directory,\n            \"/grant\", \"*S-1-5-32-544:(OI)(CI)F\",\n            \"/grant\", identity + \":(OI)(CI)F\",\n            \"/inheritance:r\"]; // Remove all inherited permissions\n    };\n    Sender.prototype._applyACLRules = function (directory, callback) {\n        var _this = this;\n        if (!Sender.USE_ICACLS) {\n            return callback(null);\n        }\n        // For performance, only run ACL rules if we haven't already during this session\n        if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\n            // Avoid multiple calls race condition by setting ACLED_DIRECTORIES to false for this directory immediately\n            // If batches are being failed faster than the processes spawned below return, some data won't be stored to disk\n            // This is better than the alternative of potentially infinitely spawned processes\n            Sender.ACLED_DIRECTORIES[directory] = false;\n            // Restrict this directory to only current user and administrator access\n            this._getACLIdentity(function (err, identity) {\n                if (err) {\n                    Sender.ACLED_DIRECTORIES[directory] = false; // false is used to cache failed (vs undefined which is \"not yet tried\")\n                    return callback(err);\n                }\n                else {\n                    _this._runICACLS(_this._getACLArguments(directory, identity), function (err) {\n                        Sender.ACLED_DIRECTORIES[directory] = !err;\n                        return callback(err);\n                    });\n                }\n            });\n        }\n        else {\n            return callback(Sender.ACLED_DIRECTORIES[directory] ? null :\n                new Error(\"Setting ACL restrictions did not succeed (cached result)\"));\n        }\n    };\n    Sender.prototype._applyACLRulesSync = function (directory) {\n        if (Sender.USE_ICACLS) {\n            // For performance, only run ACL rules if we haven't already during this session\n            if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\n                this._runICACLSSync(this._getACLArguments(directory, this._getACLIdentitySync()));\n                Sender.ACLED_DIRECTORIES[directory] = true; // If we get here, it succeeded. _runIACLSSync will throw on failures\n                return;\n            }\n            else if (!Sender.ACLED_DIRECTORIES[directory]) {\n                throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\n            }\n        }\n    };\n    Sender.prototype._confirmDirExists = function (directory, callback) {\n        var _this = this;\n        fs.lstat(directory, function (err, stats) {\n            if (err && err.code === 'ENOENT') {\n                fs.mkdir(directory, function (err) {\n                    if (err && err.code !== 'EEXIST') {\n                        callback(err);\n                    }\n                    else {\n                        _this._applyACLRules(directory, callback);\n                    }\n                });\n            }\n            else if (!err && stats.isDirectory()) {\n                _this._applyACLRules(directory, callback);\n            }\n            else {\n                callback(err || new Error(\"Path existed but was not a directory\"));\n            }\n        });\n    };\n    /**\n     * Computes the size (in bytes) of all files in a directory at the root level. Asynchronously.\n     */\n    Sender.prototype._getShallowDirectorySize = function (directory, callback) {\n        // Get the directory listing\n        fs.readdir(directory, function (err, files) {\n            if (err) {\n                return callback(err, -1);\n            }\n            var error = null;\n            var totalSize = 0;\n            var count = 0;\n            if (files.length === 0) {\n                callback(null, 0);\n                return;\n            }\n            // Query all file sizes\n            for (var i = 0; i < files.length; i++) {\n                fs.stat(path.join(directory, files[i]), function (err, fileStats) {\n                    count++;\n                    if (err) {\n                        error = err;\n                    }\n                    else {\n                        if (fileStats.isFile()) {\n                            totalSize += fileStats.size;\n                        }\n                    }\n                    if (count === files.length) {\n                        // Did we get an error?\n                        if (error) {\n                            callback(error, -1);\n                        }\n                        else {\n                            callback(error, totalSize);\n                        }\n                    }\n                });\n            }\n        });\n    };\n    /**\n     * Computes the size (in bytes) of all files in a directory at the root level. Synchronously.\n     */\n    Sender.prototype._getShallowDirectorySizeSync = function (directory) {\n        var files = fs.readdirSync(directory);\n        var totalSize = 0;\n        for (var i = 0; i < files.length; i++) {\n            totalSize += fs.statSync(path.join(directory, files[i])).size;\n        }\n        return totalSize;\n    };\n    /**\n     * Stores the payload as a json file on disk in the temp directory\n     */\n    Sender.prototype._storeToDisk = function (payload) {\n        var _this = this;\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        // This will create the dir if it does not exist\n        // Default permissions on *nix are directory listing from other users but no file creations\n        Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\n        this._confirmDirExists(directory, function (error) {\n            if (error) {\n                Logging.warn(Sender.TAG, \"Error while checking/creating directory: \" + (error && error.message));\n                _this._onErrorHelper(error);\n                return;\n            }\n            _this._getShallowDirectorySize(directory, function (err, size) {\n                if (err || size < 0) {\n                    Logging.warn(Sender.TAG, \"Error while checking directory size: \" + (err && err.message));\n                    _this._onErrorHelper(err);\n                    return;\n                }\n                else if (size > _this._maxBytesOnDisk) {\n                    Logging.warn(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + size);\n                    return;\n                }\n                //create file - file name for now is the timestamp, a better approach would be a UUID but that\n                //would require an external dependency\n                var fileName = new Date().getTime() + \".ai.json\";\n                var fileFullPath = path.join(directory, fileName);\n                // Mode 600 is w/r for creator and no read access for others (only applies on *nix)\n                // For Windows, ACL rules are applied to the entire directory (see logic in _confirmDirExists and _applyACLRules)\n                Logging.info(Sender.TAG, \"saving data to disk at: \" + fileFullPath);\n                fs.writeFile(fileFullPath, payload, { mode: 384 }, function (error) { return _this._onErrorHelper(error); });\n            });\n        });\n    };\n    /**\n     * Stores the payload as a json file on disk using sync file operations\n     * this is used when storing data before crashes\n     */\n    Sender.prototype._storeToDiskSync = function (payload) {\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        try {\n            Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\n            if (!fs.existsSync(directory)) {\n                fs.mkdirSync(directory);\n            }\n            // Make sure permissions are valid\n            this._applyACLRulesSync(directory);\n            var dirSize = this._getShallowDirectorySizeSync(directory);\n            if (dirSize > this._maxBytesOnDisk) {\n                Logging.info(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + dirSize);\n                return;\n            }\n            //create file - file name for now is the timestamp, a better approach would be a UUID but that\n            //would require an external dependency\n            var fileName = new Date().getTime() + \".ai.json\";\n            var fileFullPath = path.join(directory, fileName);\n            // Mode 600 is w/r for creator and no access for anyone else (only applies on *nix)\n            Logging.info(Sender.TAG, \"saving data before crash to disk at: \" + fileFullPath);\n            fs.writeFileSync(fileFullPath, payload, { mode: 384 });\n        }\n        catch (error) {\n            Logging.warn(Sender.TAG, \"Error while saving data to disk: \" + (error && error.message));\n            this._onErrorHelper(error);\n        }\n    };\n    /**\n     * Check for temp telemetry files\n     * reads the first file if exist, deletes it and tries to send its load\n     */\n    Sender.prototype._sendFirstFileOnDisk = function () {\n        var _this = this;\n        var tempDir = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        fs.exists(tempDir, function (exists) {\n            if (exists) {\n                fs.readdir(tempDir, function (error, files) {\n                    if (!error) {\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\n                        if (files.length > 0) {\n                            var firstFile = files[0];\n                            var filePath = path.join(tempDir, firstFile);\n                            fs.readFile(filePath, function (error, payload) {\n                                if (!error) {\n                                    // delete the file first to prevent double sending\n                                    fs.unlink(filePath, function (error) {\n                                        if (!error) {\n                                            _this.send(payload);\n                                        }\n                                        else {\n                                            _this._onErrorHelper(error);\n                                        }\n                                    });\n                                }\n                                else {\n                                    _this._onErrorHelper(error);\n                                }\n                            });\n                        }\n                    }\n                    else {\n                        _this._onErrorHelper(error);\n                    }\n                });\n            }\n        });\n    };\n    Sender.prototype._onErrorHelper = function (error) {\n        if (typeof this._onError === \"function\") {\n            this._onError(error);\n        }\n    };\n    Sender.TAG = \"Sender\";\n    Sender.ICACLS_PATH = process.env.systemdrive + \"/windows/system32/icacls.exe\";\n    Sender.POWERSHELL_PATH = process.env.systemdrive + \"/windows/system32/windowspowershell/v1.0/powershell.exe\";\n    Sender.ACLED_DIRECTORIES = {};\n    Sender.ACL_IDENTITY = null;\n    // the amount of time the SDK will wait between resending cached data, this buffer is to avoid any throtelling from the service side\n    Sender.WAIT_BETWEEN_RESEND = 60 * 1000;\n    Sender.MAX_BYTES_ON_DISK = 50 * 1000 * 1000;\n    Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN = 5;\n    Sender.TEMPDIR_PREFIX = \"appInsights-node\";\n    Sender.OS_PROVIDES_FILE_PROTECTION = false;\n    Sender.USE_ICACLS = os.type() === \"Windows_NT\";\n    return Sender;\n}());\nmodule.exports = Sender;\n//# sourceMappingURL=Sender.js.map","\"use strict\";\nvar url = require(\"url\");\nvar Config = require(\"./Config\");\nvar Context = require(\"./Context\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Channel = require(\"./Channel\");\nvar TelemetryProcessors = require(\"../TelemetryProcessors\");\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\nvar Sender = require(\"./Sender\");\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar EnvelopeFactory = require(\"./EnvelopeFactory\");\n/**\n * Application Insights telemetry client provides interface to track telemetry items, register telemetry initializers and\n * and manually trigger immediate sending (flushing)\n */\nvar TelemetryClient = (function () {\n    /**\n     * Constructs a new client of the client\n     * @param iKey the instrumentation key to use (read from environment variable if not specified)\n     */\n    function TelemetryClient(iKey) {\n        this._telemetryProcessors = [];\n        var config = new Config(iKey);\n        this.config = config;\n        this.context = new Context();\n        this.commonProperties = {};\n        var sender = new Sender(this.config);\n        this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function () { return config.maxBatchIntervalMs; }, sender);\n    }\n    /**\n     * Log a trace message\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackTrace = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Trace);\n    };\n    /**\n     * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators.\n     * To send a single measurement, use just the first two parameters. If you take measurements very frequently, you can reduce the\n     * telemetry bandwidth by aggregating multiple measurements and sending the resulting average at intervals.\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackMetric = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Metric);\n    };\n    /**\n     * Log an exception\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackException = function (telemetry) {\n        if (telemetry && telemetry.exception && !Util.isError(telemetry.exception)) {\n            telemetry.exception = new Error(telemetry.exception.toString());\n        }\n        this.track(telemetry, Contracts.TelemetryType.Exception);\n    };\n    /**\n     * Log a user action or other occurrence.\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackEvent = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Event);\n    };\n    /**\n     * Log a request. Note that the default client will attempt to collect HTTP requests automatically so only use this for requests\n     * that aren't automatically captured or if you've disabled automatic request collection.\n     *\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackRequest = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Request);\n    };\n    /**\n     * Log a dependency. Note that the default client will attempt to collect dependencies automatically so only use this for dependencies\n     * that aren't automatically captured or if you've disabled automatic dependency collection.\n     *\n     * @param telemetry      Object encapsulating tracking option\n     * */\n    TelemetryClient.prototype.trackDependency = function (telemetry) {\n        if (telemetry && !telemetry.target && telemetry.data) {\n            // url.parse().host returns null for non-urls,\n            // making this essentially a no-op in those cases\n            // If this logic is moved, update jsdoc in DependencyTelemetry.target\n            telemetry.target = url.parse(telemetry.data).host;\n        }\n        this.track(telemetry, Contracts.TelemetryType.Dependency);\n    };\n    /**\n     * Immediately send all queued telemetry.\n     * @param options Flush options, including indicator whether app is crashing and callback\n     */\n    TelemetryClient.prototype.flush = function (options) {\n        this.channel.triggerSend(options ? !!options.isAppCrashing : false, options ? options.callback : undefined);\n    };\n    /**\n     * Generic track method for all telemetry types\n     * @param data the telemetry to send\n     * @param telemetryType specify the type of telemetry you are tracking from the list of Contracts.DataTypes\n     */\n    TelemetryClient.prototype.track = function (telemetry, telemetryType) {\n        if (telemetry && Contracts.telemetryTypeToBaseType(telemetryType)) {\n            var envelope = EnvelopeFactory.createEnvelope(telemetry, telemetryType, this.commonProperties, this.context, this.config);\n            // Set time on the envelope if it was set on the telemetry item\n            if (telemetry.time) {\n                envelope.time = telemetry.time.toISOString();\n            }\n            var accepted = this.runTelemetryProcessors(envelope, telemetry.contextObjects);\n            // Ideally we would have a central place for \"internal\" telemetry processors and users can configure which ones are in use.\n            // This will do for now. Otherwise clearTelemetryProcessors() would be problematic.\n            accepted = accepted && TelemetryProcessors.samplingTelemetryProcessor(envelope, { correlationContext: CorrelationContextManager_1.CorrelationContextManager.getCurrentContext() });\n            if (accepted) {\n                this.channel.send(envelope);\n            }\n        }\n        else {\n            Logging.warn(\"track() requires telemetry object and telemetryType to be specified.\");\n        }\n    };\n    /**\n     * Adds telemetry processor to the collection. Telemetry processors will be called one by one\n     * before telemetry item is pushed for sending and in the order they were added.\n     *\n     * @param telemetryProcessor function, takes Envelope, and optional context object and returns boolean\n     */\n    TelemetryClient.prototype.addTelemetryProcessor = function (telemetryProcessor) {\n        this._telemetryProcessors.push(telemetryProcessor);\n    };\n    /*\n     * Removes all telemetry processors\n     */\n    TelemetryClient.prototype.clearTelemetryProcessors = function () {\n        this._telemetryProcessors = [];\n    };\n    TelemetryClient.prototype.runTelemetryProcessors = function (envelope, contextObjects) {\n        var accepted = true;\n        var telemetryProcessorsCount = this._telemetryProcessors.length;\n        if (telemetryProcessorsCount === 0) {\n            return accepted;\n        }\n        contextObjects = contextObjects || {};\n        contextObjects['correlationContext'] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        for (var i = 0; i < telemetryProcessorsCount; ++i) {\n            try {\n                var processor = this._telemetryProcessors[i];\n                if (processor) {\n                    if (processor.apply(null, [envelope, contextObjects]) === false) {\n                        accepted = false;\n                        break;\n                    }\n                }\n            }\n            catch (error) {\n                accepted = true;\n                Logging.warn(\"One of telemetry processors failed, telemetry item will be sent.\", error, envelope);\n            }\n        }\n        return accepted;\n    };\n    return TelemetryClient;\n}());\nmodule.exports = TelemetryClient;\n//# sourceMappingURL=TelemetryClient.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar url = require(\"url\");\nvar constants = require(\"constants\");\nvar Logging = require(\"./Logging\");\nvar RequestResponseHeaders = require(\"./RequestResponseHeaders\");\nvar Util = (function () {\n    function Util() {\n    }\n    /**\n     * helper method to access userId and sessionId cookie\n     */\n    Util.getCookie = function (name, cookie) {\n        var value = \"\";\n        if (name && name.length && typeof cookie === \"string\") {\n            var cookieName = name + \"=\";\n            var cookies = cookie.split(\";\");\n            for (var i = 0; i < cookies.length; i++) {\n                var cookie = cookies[i];\n                cookie = Util.trim(cookie);\n                if (cookie && cookie.indexOf(cookieName) === 0) {\n                    value = cookie.substring(cookieName.length, cookies[i].length);\n                    break;\n                }\n            }\n        }\n        return value;\n    };\n    /**\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\n     */\n    Util.trim = function (str) {\n        if (typeof str === \"string\") {\n            return str.replace(/^\\s+|\\s+$/g, \"\");\n        }\n        else {\n            return \"\";\n        }\n    };\n    /**\n     * Convert an array of int32 to Base64 (no '==' at the end).\n     * MSB first.\n     */\n    Util.int32ArrayToBase64 = function (array) {\n        var toChar = function (v, i) {\n            return String.fromCharCode((v >> i) & 0xFF);\n        };\n        var int32AsString = function (v) {\n            return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);\n        };\n        var x = array.map(int32AsString).join(\"\");\n        var s = new Buffer(x, \"binary\").toString(\"base64\");\n        return s.substr(0, s.indexOf(\"=\"));\n    };\n    /**\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\n     */\n    Util.random32 = function () {\n        return (0x100000000 * Math.random()) | 0;\n    };\n    /**\n     * generate a random 32bit number (0x00000000..0xFFFFFFFF).\n     */\n    Util.randomu32 = function () {\n        return Util.random32() + 0x80000000;\n    };\n    /**\n     * generate W3C-compatible trace id\n     * https://github.com/w3c/distributed-tracing/blob/master/trace_context/HTTP_HEADER_FORMAT.md#trace-id\n     */\n    Util.w3cTraceId = function () {\n        var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\n        var oct = \"\", tmp;\n        for (var a = 0; a < 4; a++) {\n            tmp = Util.random32();\n            oct +=\n                hexValues[tmp & 0xF] +\n                    hexValues[tmp >> 4 & 0xF] +\n                    hexValues[tmp >> 8 & 0xF] +\n                    hexValues[tmp >> 12 & 0xF] +\n                    hexValues[tmp >> 16 & 0xF] +\n                    hexValues[tmp >> 20 & 0xF] +\n                    hexValues[tmp >> 24 & 0xF] +\n                    hexValues[tmp >> 28 & 0xF];\n        }\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\n        var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\n    };\n    /**\n     * Check if an object is of type Array\n     */\n    Util.isArray = function (obj) {\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\n    };\n    /**\n     * Check if an object is of type Error\n     */\n    Util.isError = function (obj) {\n        return obj instanceof Error;\n    };\n    Util.isPrimitive = function (input) {\n        var propType = typeof input;\n        return propType === \"string\" || propType === \"number\" || propType === \"boolean\";\n    };\n    /**\n     * Check if an object is of type Date\n     */\n    Util.isDate = function (obj) {\n        return Object.prototype.toString.call(obj) === \"[object Date]\";\n    };\n    /**\n     * Convert ms to c# time span format\n     */\n    Util.msToTimeSpan = function (totalms) {\n        if (isNaN(totalms) || totalms < 0) {\n            totalms = 0;\n        }\n        var sec = ((totalms / 1000) % 60).toFixed(7).replace(/0{0,4}$/, \"\");\n        var min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\n        var hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\n        var days = Math.floor(totalms / (1000 * 60 * 60 * 24));\n        sec = sec.indexOf(\".\") < 2 ? \"0\" + sec : sec;\n        min = min.length < 2 ? \"0\" + min : min;\n        hour = hour.length < 2 ? \"0\" + hour : hour;\n        var daysText = days > 0 ? days + \".\" : \"\";\n        return daysText + hour + \":\" + min + \":\" + sec;\n    };\n    /**\n     * Using JSON.stringify, by default Errors do not serialize to something useful:\n     * Simplify a generic Node Error into a simpler map for customDimensions\n     * Custom errors can still implement toJSON to override this functionality\n     */\n    Util.extractError = function (err) {\n        // Error is often subclassed so may have code OR id properties:\n        // https://nodejs.org/api/errors.html#errors_error_code\n        var looseError = err;\n        return {\n            message: err.message,\n            code: looseError.code || looseError.id || \"\",\n        };\n    };\n    /**\n     * Manually call toJSON if available to pre-convert the value.\n     * If a primitive is returned, then the consumer of this function can skip JSON.stringify.\n     * This avoids double escaping of quotes for Date objects, for example.\n     */\n    Util.extractObject = function (origProperty) {\n        if (origProperty instanceof Error) {\n            return Util.extractError(origProperty);\n        }\n        if (typeof origProperty.toJSON === \"function\") {\n            return origProperty.toJSON();\n        }\n        return origProperty;\n    };\n    /**\n     * Validate that an object is of type { [key: string]: string }\n     */\n    Util.validateStringMap = function (obj) {\n        if (typeof obj !== \"object\") {\n            Logging.info(\"Invalid properties dropped from payload\");\n            return;\n        }\n        var map = {};\n        for (var field in obj) {\n            var property = '';\n            var origProperty = obj[field];\n            var propType = typeof origProperty;\n            if (Util.isPrimitive(origProperty)) {\n                property = origProperty.toString();\n            }\n            else if (origProperty === null || propType === \"undefined\") {\n                property = \"\";\n            }\n            else if (propType === \"function\") {\n                Logging.info(\"key: \" + field + \" was function; will not serialize\");\n                continue;\n            }\n            else {\n                var stringTarget = Util.isArray(origProperty) ? origProperty : Util.extractObject(origProperty);\n                try {\n                    if (Util.isPrimitive(stringTarget)) {\n                        property = stringTarget;\n                    }\n                    else {\n                        property = JSON.stringify(stringTarget);\n                    }\n                }\n                catch (e) {\n                    property = origProperty.constructor.name.toString() + \" (Error: \" + e.message + \")\";\n                    Logging.info(\"key: \" + field + \", could not be serialized\");\n                }\n            }\n            map[field] = property.substring(0, Util.MAX_PROPERTY_LENGTH);\n        }\n        return map;\n    };\n    /**\n     * Checks if a request url is not on a excluded domain list\n     * and if it is safe to add correlation headers\n     */\n    Util.canIncludeCorrelationHeader = function (client, requestUrl) {\n        var excludedDomains = client && client.config && client.config.correlationHeaderExcludedDomains;\n        if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {\n            return true;\n        }\n        for (var i = 0; i < excludedDomains.length; i++) {\n            var regex = new RegExp(excludedDomains[i].replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\n            if (regex.test(url.parse(requestUrl).hostname)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Util.getCorrelationContextTarget = function (response, key) {\n        var contextHeaders = response.headers && response.headers[RequestResponseHeaders.requestContextHeader];\n        if (contextHeaders) {\n            var keyValues = contextHeaders.split(\",\");\n            for (var i = 0; i < keyValues.length; ++i) {\n                var keyValue = keyValues[i].split(\"=\");\n                if (keyValue.length == 2 && keyValue[0] == key) {\n                    return keyValue[1];\n                }\n            }\n        }\n    };\n    /**\n     * Generate request\n     *\n     * Proxify the request creation to handle proxy http\n     *\n     * @param {string} requestUrl url endpoint\n     * @param {Object} requestOptions Request option\n     * @param {Function} requestCallback callback on request\n     * @returns {http.ClientRequest} request object\n     */\n    Util.makeRequest = function (config, requestUrl, requestOptions, requestCallback) {\n        if (requestUrl && requestUrl.indexOf('//') === 0) {\n            requestUrl = 'https:' + requestUrl;\n        }\n        var requestUrlParsed = url.parse(requestUrl);\n        var options = __assign({}, requestOptions, { host: requestUrlParsed.hostname, port: requestUrlParsed.port, path: requestUrlParsed.pathname });\n        var proxyUrl = undefined;\n        if (requestUrlParsed.protocol === 'https:') {\n            proxyUrl = config.proxyHttpsUrl || undefined;\n        }\n        if (requestUrlParsed.protocol === 'http:') {\n            proxyUrl = config.proxyHttpUrl || undefined;\n        }\n        if (proxyUrl) {\n            if (proxyUrl.indexOf('//') === 0) {\n                proxyUrl = 'http:' + proxyUrl;\n            }\n            var proxyUrlParsed = url.parse(proxyUrl);\n            // https is not supported at the moment\n            if (proxyUrlParsed.protocol === 'https:') {\n                Logging.info(\"Proxies that use HTTPS are not supported\");\n                proxyUrl = undefined;\n            }\n            else {\n                options = __assign({}, options, { host: proxyUrlParsed.hostname, port: proxyUrlParsed.port || \"80\", path: requestUrl, headers: __assign({}, options.headers, { Host: requestUrlParsed.hostname }) });\n            }\n        }\n        var isHttps = requestUrlParsed.protocol === 'https:' && !proxyUrl;\n        if (isHttps && config.httpsAgent !== undefined) {\n            options.agent = config.httpsAgent;\n        }\n        else if (!isHttps && config.httpAgent !== undefined) {\n            options.agent = config.httpAgent;\n        }\n        else if (isHttps) {\n            // HTTPS without a passed in agent. Use one that enforces our TLS rules\n            options.agent = Util.tlsRestrictedAgent;\n        }\n        if (isHttps) {\n            return https.request(options, requestCallback);\n        }\n        else {\n            return http.request(options, requestCallback);\n        }\n    };\n    ;\n    Util.MAX_PROPERTY_LENGTH = 8192;\n    Util.tlsRestrictedAgent = new https.Agent({\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\n    });\n    return Util;\n}());\nmodule.exports = Util;\n//# sourceMappingURL=Util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts = require(\"../Declarations/Contracts\");\n/**\n *  A telemetry processor that handles sampling.\n */\nfunction samplingTelemetryProcessor(envelope, contextObjects) {\n    var samplingPercentage = envelope.sampleRate; // Set for us in Client.getEnvelope\n    var isSampledIn = false;\n    if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\n        return true;\n    }\n    else if (envelope.data && Contracts.TelemetryType.Metric === Contracts.baseTypeToTelemetryType(envelope.data.baseType)) {\n        // Exclude MetricData telemetry from sampling\n        return true;\n    }\n    else if (contextObjects.correlationContext && contextObjects.correlationContext.operation) {\n        // If we're using dependency correlation, sampling should retain all telemetry from a given request \n        isSampledIn = getSamplingHashCode(contextObjects.correlationContext.operation.id) < samplingPercentage;\n    }\n    else {\n        // If we're not using dependency correlation, sampling should use a random distribution on each item\n        isSampledIn = (Math.random() * 100) < samplingPercentage;\n    }\n    return isSampledIn;\n}\nexports.samplingTelemetryProcessor = samplingTelemetryProcessor;\n/** Ported from AI .NET SDK */\nfunction getSamplingHashCode(input) {\n    var csharpMin = -2147483648;\n    var csharpMax = 2147483647;\n    var hash = 5381;\n    if (!input) {\n        return 0;\n    }\n    while (input.length < 8) {\n        input = input + input;\n    }\n    for (var i = 0; i < input.length; i++) {\n        // JS doesn't respond to integer overflow by wrapping around. Simulate it with bitwise operators ( | 0)\n        hash = ((((hash << 5) + hash) | 0) + input.charCodeAt(i) | 0);\n    }\n    hash = hash <= csharpMin ? csharpMax : Math.abs(hash);\n    return (hash / csharpMax) * 100;\n}\nexports.getSamplingHashCode = getSamplingHashCode;\n//# sourceMappingURL=SamplingTelemetryProcessor.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./SamplingTelemetryProcessor\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first\nvar AutoCollectConsole = require(\"./AutoCollection/Console\");\nvar AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");\nvar AutoCollectPerformance = require(\"./AutoCollection/Performance\");\nvar AutoCollectHttpDependencies = require(\"./AutoCollection/HttpDependencies\");\nvar AutoCollectHttpRequests = require(\"./AutoCollection/HttpRequests\");\nvar Logging = require(\"./Library/Logging\");\n// We export these imports so that SDK users may use these classes directly.\n// They're exposed using \"export import\" so that types are passed along as expected\nexports.TelemetryClient = require(\"./Library/NodeClient\");\nexports.Contracts = require(\"./Declarations/Contracts\");\n// Default autocollection configuration\nvar _isConsole = true;\nvar _isConsoleLog = false;\nvar _isExceptions = true;\nvar _isPerformance = true;\nvar _isRequests = true;\nvar _isDependencies = true;\nvar _isDiskRetry = true;\nvar _isCorrelating = true;\nvar _diskRetryInterval = undefined;\nvar _diskRetryMaxBytes = undefined;\nvar _console;\nvar _exceptions;\nvar _performance;\nvar _serverRequests;\nvar _clientRequests;\nvar _isStarted = false;\n/**\n * Initializes the default client. Should be called after setting\n * configuration options.\n *\n * @param instrumentationKey the instrumentation key to use. Optional, if\n * this is not specified, the value will be read from the environment\n * variable APPINSIGHTS_INSTRUMENTATIONKEY.\n * @returns {Configuration} the configuration class to initialize\n * and start the SDK.\n */\nfunction setup(instrumentationKey) {\n    if (!exports.defaultClient) {\n        exports.defaultClient = new exports.TelemetryClient(instrumentationKey);\n        _console = new AutoCollectConsole(exports.defaultClient);\n        _exceptions = new AutoCollectExceptions(exports.defaultClient);\n        _performance = new AutoCollectPerformance(exports.defaultClient);\n        _serverRequests = new AutoCollectHttpRequests(exports.defaultClient);\n        _clientRequests = new AutoCollectHttpDependencies(exports.defaultClient);\n    }\n    else {\n        Logging.info(\"The default client is already setup\");\n    }\n    if (exports.defaultClient && exports.defaultClient.channel) {\n        exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\n    }\n    return Configuration;\n}\nexports.setup = setup;\n/**\n * Starts automatic collection of telemetry. Prior to calling start no\n * telemetry will be *automatically* collected, though manual collection\n * is enabled.\n * @returns {ApplicationInsights} this class\n */\nfunction start() {\n    if (!!exports.defaultClient) {\n        _isStarted = true;\n        _console.enable(_isConsole, _isConsoleLog);\n        _exceptions.enable(_isExceptions);\n        _performance.enable(_isPerformance);\n        _serverRequests.useAutoCorrelation(_isCorrelating);\n        _serverRequests.enable(_isRequests);\n        _clientRequests.enable(_isDependencies);\n    }\n    else {\n        Logging.warn(\"Start cannot be called before setup\");\n    }\n    return Configuration;\n}\nexports.start = start;\n/**\n * Returns an object that is shared across all code handling a given request.\n * This can be used similarly to thread-local storage in other languages.\n * Properties set on this object will be available to telemetry processors.\n *\n * Do not store sensitive information here.\n * Custom properties set on this object can be exposed in a future SDK\n * release via outgoing HTTP headers.\n * This is to allow for correlating data cross-component.\n *\n * This method will return null if automatic dependency correlation is disabled.\n * @returns A plain object for request storage or null if automatic dependency correlation is disabled.\n */\nfunction getCorrelationContext() {\n    if (_isCorrelating) {\n        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();\n    }\n    return null;\n}\nexports.getCorrelationContext = getCorrelationContext;\n/**\n * Returns a function that will get the same correlation context within its\n * function body as the code executing this function.\n * Use this method if automatic dependency correlation is not propagating\n * correctly to an asynchronous callback.\n */\nfunction wrapWithCorrelationContext(fn) {\n    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn);\n}\nexports.wrapWithCorrelationContext = wrapWithCorrelationContext;\n/**\n * The active configuration for global SDK behaviors, such as autocollection.\n */\nvar Configuration = (function () {\n    function Configuration() {\n    }\n    /**\n     * Sets the state of console and logger tracking (enabled by default for third-party loggers only)\n     * @param value if true logger activity will be sent to Application Insights\n     * @param collectConsoleLog if true, logger autocollection will include console.log calls (default false)\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectConsole = function (value, collectConsoleLog) {\n        if (collectConsoleLog === void 0) { collectConsoleLog = false; }\n        _isConsole = value;\n        _isConsoleLog = collectConsoleLog;\n        if (_isStarted) {\n            _console.enable(value, collectConsoleLog);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of exception tracking (enabled by default)\n     * @param value if true uncaught exceptions will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectExceptions = function (value) {\n        _isExceptions = value;\n        if (_isStarted) {\n            _exceptions.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of performance tracking (enabled by default)\n     * @param value if true performance counters will be collected every second and sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectPerformance = function (value) {\n        _isPerformance = value;\n        if (_isStarted) {\n            _performance.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of request tracking (enabled by default)\n     * @param value if true requests will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectRequests = function (value) {\n        _isRequests = value;\n        if (_isStarted) {\n            _serverRequests.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of dependency tracking (enabled by default)\n     * @param value if true dependencies will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectDependencies = function (value) {\n        _isDependencies = value;\n        if (_isStarted) {\n            _clientRequests.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of automatic dependency correlation (enabled by default)\n     * @param value if true dependencies will be correlated with requests\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoDependencyCorrelation = function (value) {\n        _isCorrelating = value;\n        if (_isStarted) {\n            _serverRequests.useAutoCorrelation(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\n     * Note that this method only applies to the default client. Disk-backed retry caching is disabled by default for additional clients.\n     * For enable for additional clients, use client.channel.setUseDiskRetryCaching(true).\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\n     * @param value if true events that occured while client is offline will be cached on disk\n     * @param resendInterval The wait interval for resending cached events.\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\n     * @returns {Configuration} this class\n     */\n    Configuration.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\n        _isDiskRetry = value;\n        _diskRetryInterval = resendInterval;\n        _diskRetryMaxBytes = maxBytesOnDisk;\n        if (exports.defaultClient && exports.defaultClient.channel) {\n            exports.defaultClient.channel.setUseDiskRetryCaching(value, resendInterval, maxBytesOnDisk);\n        }\n        return Configuration;\n    };\n    /**\n     * Enables debug and warning logging for AppInsights itself.\n     * @param enableDebugLogging if true, enables debug logging\n     * @param enableWarningLogging if true, enables warning logging\n     * @returns {Configuration} this class\n     */\n    Configuration.setInternalLogging = function (enableDebugLogging, enableWarningLogging) {\n        if (enableDebugLogging === void 0) { enableDebugLogging = false; }\n        if (enableWarningLogging === void 0) { enableWarningLogging = true; }\n        Logging.enableDebug = enableDebugLogging;\n        Logging.disableWarnings = !enableWarningLogging;\n        return Configuration;\n    };\n    // Convenience shortcut to ApplicationInsights.start\n    Configuration.start = start;\n    return Configuration;\n}());\nexports.Configuration = Configuration;\n/**\n * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration\n*/\nfunction dispose() {\n    exports.defaultClient = null;\n    _isStarted = false;\n    if (_console) {\n        _console.dispose();\n    }\n    if (_exceptions) {\n        _exceptions.dispose();\n    }\n    if (_performance) {\n        _performance.dispose();\n    }\n    if (_serverRequests) {\n        _serverRequests.dispose();\n    }\n    if (_clientRequests) {\n        _clientRequests.dispose();\n    }\n}\nexports.dispose = dispose;\n//# sourceMappingURL=applicationinsights.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar bunyanPatchFunction = function (originalBunyan) {\r\n    var originalEmit = originalBunyan.prototype._emit;\r\n    originalBunyan.prototype._emit = function (rec, noemit) {\r\n        var ret = originalEmit.apply(this, arguments);\r\n        if (!noemit) {\r\n            var str = ret;\r\n            if (!str) {\r\n                str = originalEmit.call(this, rec, true);\r\n            }\r\n            diagnostic_channel_1.channel.publish(\"bunyan\", { level: rec.level, result: str });\r\n        }\r\n        return ret;\r\n    };\r\n    return originalBunyan;\r\n};\r\nexports.bunyan = {\r\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\r\n    patch: bunyanPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"bunyan\", exports.bunyan);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=bunyan.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar stream_1 = require(\"stream\");\r\nvar consolePatchFunction = function (originalConsole) {\r\n    var aiLoggingOutStream = new stream_1.Writable();\r\n    var aiLoggingErrStream = new stream_1.Writable();\r\n    // Default console is roughly equivalent to `new Console(process.stdout, process.stderr)`\r\n    // We create a version which publishes to the channel and also to stdout/stderr\r\n    aiLoggingOutStream.write = function (chunk) {\r\n        if (!chunk) {\r\n            return true;\r\n        }\r\n        var message = chunk.toString();\r\n        diagnostic_channel_1.channel.publish(\"console\", { message: message });\r\n        return true;\r\n    };\r\n    aiLoggingErrStream.write = function (chunk) {\r\n        if (!chunk) {\r\n            return true;\r\n        }\r\n        var message = chunk.toString();\r\n        diagnostic_channel_1.channel.publish(\"console\", { message: message, stderr: true });\r\n        return true;\r\n    };\r\n    var aiLoggingConsole = new originalConsole.Console(aiLoggingOutStream, aiLoggingErrStream);\r\n    var consoleMethods = [\"log\", \"info\", \"warn\", \"error\", \"dir\", \"time\", \"timeEnd\", \"trace\", \"assert\"];\r\n    var _loop_1 = function (method) {\r\n        var originalMethod = originalConsole[method];\r\n        if (originalMethod) {\r\n            originalConsole[method] = function () {\r\n                if (aiLoggingConsole[method]) {\r\n                    try {\r\n                        aiLoggingConsole[method].apply(aiLoggingConsole, arguments);\r\n                    }\r\n                    catch (e) {\r\n                        // Ignore errors; allow the original method to throw if necessary\r\n                    }\r\n                }\r\n                return originalMethod.apply(originalConsole, arguments);\r\n            };\r\n        }\r\n    };\r\n    for (var _i = 0, consoleMethods_1 = consoleMethods; _i < consoleMethods_1.length; _i++) {\r\n        var method = consoleMethods_1[_i];\r\n        _loop_1(method);\r\n    }\r\n    return originalConsole;\r\n};\r\nexports.console = {\r\n    versionSpecifier: \">= 4.0.0\",\r\n    patch: consolePatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"console\", exports.console);\r\n    // Force patching of console\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    require(\"console\");\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=console.pub.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar bunyan = require(\"./bunyan.pub\");\r\nexports.bunyan = bunyan;\r\nvar consolePub = require(\"./console.pub\");\r\nexports.console = consolePub;\r\nvar mongodbCore = require(\"./mongodb-core.pub\");\r\nexports.mongodbCore = mongodbCore;\r\nvar mongodb = require(\"./mongodb.pub\");\r\nexports.mongodb = mongodb;\r\nvar mysql = require(\"./mysql.pub\");\r\nexports.mysql = mysql;\r\nvar pgPool = require(\"./pg-pool.pub\");\r\nexports.pgPool = pgPool;\r\nvar pg = require(\"./pg.pub\");\r\nexports.pg = pg;\r\nvar redis = require(\"./redis.pub\");\r\nexports.redis = redis;\r\nvar winston = require(\"./winston.pub\");\r\nexports.winston = winston;\r\nfunction enable() {\r\n    bunyan.enable();\r\n    consolePub.enable();\r\n    mongodbCore.enable();\r\n    mongodb.enable();\r\n    mysql.enable();\r\n    pg.enable();\r\n    pgPool.enable();\r\n    redis.enable();\r\n    winston.enable();\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar mongodbcorePatchFunction = function (originalMongoCore) {\r\n    var originalConnect = originalMongoCore.Server.prototype.connect;\r\n    originalMongoCore.Server.prototype.connect = function contextPreservingConnect() {\r\n        var ret = originalConnect.apply(this, arguments);\r\n        // Messages sent to mongo progress through a pool\r\n        // This can result in context getting mixed between different responses\r\n        // so we wrap the callbacks to restore appropriate state\r\n        var originalWrite = this.s.pool.write;\r\n        this.s.pool.write = function contextPreservingWrite() {\r\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\r\n            if (typeof arguments[cbidx] === \"function\") {\r\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\r\n            }\r\n            return originalWrite.apply(this, arguments);\r\n        };\r\n        // Logout is a special case, it doesn't call the write function but instead\r\n        // directly calls into connection.write\r\n        var originalLogout = this.s.pool.logout;\r\n        this.s.pool.logout = function contextPreservingLogout() {\r\n            if (typeof arguments[1] === \"function\") {\r\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\r\n            }\r\n            return originalLogout.apply(this, arguments);\r\n        };\r\n        return ret;\r\n    };\r\n    return originalMongoCore;\r\n};\r\nexports.mongoCore2 = {\r\n    versionSpecifier: \">= 2.0.0 < 2.2.0\",\r\n    patch: mongodbcorePatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb-core\", exports.mongoCore2);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb-core.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar mongodbPatchFunction = function (originalMongo) {\r\n    var listener = originalMongo.instrument({\r\n        operationIdGenerator: {\r\n            next: function () {\r\n                return diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\r\n            },\r\n        },\r\n    });\r\n    var eventMap = {};\r\n    listener.on(\"started\", function (event) {\r\n        if (eventMap[event.requestId]) {\r\n            // Note: Mongo can generate 2 completely separate requests\r\n            // which share the same requestId, if a certain race condition is triggered.\r\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\r\n            return;\r\n        }\r\n        eventMap[event.requestId] = event;\r\n    });\r\n    listener.on(\"succeeded\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\r\n    });\r\n    listener.on(\"failed\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\r\n    });\r\n    return originalMongo;\r\n};\r\nexports.mongo2 = {\r\n    versionSpecifier: \">= 2.0.0 <= 2.2.x\",\r\n    patch: mongodbPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo2);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar path = require(\"path\");\r\nvar mysqlPatchFunction = function (originalMysql, originalMysqlPath) {\r\n    // The `name` passed in here is for debugging purposes,\r\n    // to help distinguish which object is being patched.\r\n    var patchObjectFunction = function (obj, name) {\r\n        return function (func, cbWrapper) {\r\n            var originalFunc = obj[func];\r\n            if (originalFunc) {\r\n                obj[func] = function mysqlContextPreserver() {\r\n                    // Find the callback, if there is one\r\n                    var cbidx = arguments.length - 1;\r\n                    for (var i = arguments.length - 1; i >= 0; --i) {\r\n                        if (typeof arguments[i] === \"function\") {\r\n                            cbidx = i;\r\n                            break;\r\n                        }\r\n                        else if (typeof arguments[i] !== \"undefined\") {\r\n                            break;\r\n                        }\r\n                    }\r\n                    var cb = arguments[cbidx];\r\n                    var resultContainer = { result: null, startTime: null };\r\n                    if (typeof cb === \"function\") {\r\n                        // Preserve context on the callback.\r\n                        // If this is one of the functions that we want to track,\r\n                        // then wrap the callback with the tracking wrapper\r\n                        if (cbWrapper) {\r\n                            resultContainer.startTime = process.hrtime();\r\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cbWrapper(resultContainer, cb));\r\n                        }\r\n                        else {\r\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cb);\r\n                        }\r\n                    }\r\n                    var result = originalFunc.apply(this, arguments);\r\n                    resultContainer.result = result;\r\n                    return result;\r\n                };\r\n            }\r\n        };\r\n    };\r\n    var patchClassMemberFunction = function (classObject, name) {\r\n        return patchObjectFunction(classObject.prototype, name + \".prototype\");\r\n    };\r\n    var connectionCallbackFunctions = [\r\n        \"connect\", \"changeUser\",\r\n        \"ping\", \"statistics\", \"end\",\r\n    ];\r\n    var connectionClass = require(path.dirname(originalMysqlPath) + \"/lib/Connection\");\r\n    connectionCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(connectionClass, \"Connection\")(value); });\r\n    // Connection.createQuery is a static method\r\n    patchObjectFunction(connectionClass, \"Connection\")(\"createQuery\", function (resultContainer, cb) {\r\n        return function (err) {\r\n            var hrDuration = process.hrtime(resultContainer.startTime);\r\n            /* tslint:disable-next-line:no-bitwise */\r\n            var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\r\n            diagnostic_channel_1.channel.publish(\"mysql\", { query: resultContainer.result, callbackArgs: arguments, err: err, duration: duration });\r\n            cb.apply(this, arguments);\r\n        };\r\n    });\r\n    var poolCallbackFunctions = [\r\n        \"_enqueueCallback\",\r\n    ];\r\n    var poolClass = require(path.dirname(originalMysqlPath) + \"/lib/Pool\");\r\n    poolCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(poolClass, \"Pool\")(value); });\r\n    return originalMysql;\r\n};\r\nexports.mysql = {\r\n    versionSpecifier: \">= 2.0.0 <= 2.14.x\",\r\n    patch: mysqlPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mysql\", exports.mysql);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mysql.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nfunction postgresPool1PatchFunction(originalPgPool) {\r\n    var originalConnect = originalPgPool.prototype.connect;\r\n    originalPgPool.prototype.connect = function connect(callback) {\r\n        if (callback) {\r\n            arguments[0] = diagnostic_channel_1.channel.bindToContext(callback);\r\n        }\r\n        originalConnect.apply(this, arguments);\r\n    };\r\n    return originalPgPool;\r\n}\r\nexports.postgresPool1 = {\r\n    versionSpecifier: \"1.x\",\r\n    patch: postgresPool1PatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg-pool\", exports.postgresPool1);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=pg-pool.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar events_1 = require(\"events\");\r\nfunction postgres6PatchFunction(originalPg, originalPgPath) {\r\n    var originalClientQuery = originalPg.Client.prototype.query;\r\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\r\n    // wherever the callback is passed, find it, save it, and remove it from the call\r\n    // to the the original .query() function\r\n    originalPg.Client.prototype.query = function query(config, values, callback) {\r\n        var data = {\r\n            query: {},\r\n            database: {\r\n                host: this.connectionParameters.host,\r\n                port: this.connectionParameters.port,\r\n            },\r\n            result: null,\r\n            error: null,\r\n            duration: 0,\r\n        };\r\n        var start = process.hrtime();\r\n        var queryResult;\r\n        function patchCallback(cb) {\r\n            if (cb && cb[diagnosticOriginalFunc]) {\r\n                cb = cb[diagnosticOriginalFunc];\r\n            }\r\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\r\n                var end = process.hrtime(start);\r\n                data.result = res && { rowCount: res.rowCount, command: res.command };\r\n                data.error = err;\r\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\r\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\r\n                // emulate weird internal behavior in pg@6\r\n                // on success, the callback is called *before* query events are emitted\r\n                // on failure, the callback is called *instead of* the query emitting events\r\n                // with no events, that means no promises (since the promise is resolved/rejected in an event handler)\r\n                // since we are always inserting ourselves as a callback, we have to restore the original\r\n                // behavior if the user didn't provide one themselves\r\n                if (err) {\r\n                    if (cb) {\r\n                        return cb.apply(this, arguments);\r\n                    }\r\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\r\n                        queryResult.emit(\"error\", err);\r\n                    }\r\n                }\r\n                else if (cb) {\r\n                    cb.apply(this, arguments);\r\n                }\r\n            });\r\n            try {\r\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\r\n                return trackingCallback;\r\n            }\r\n            catch (e) {\r\n                // this should never happen, but bailout in case it does\r\n                return cb;\r\n            }\r\n        }\r\n        // this function takes too many variations of arguments.\r\n        // this patches any provided callback or creates a new callback if one wasn't provided.\r\n        // since the callback is always called (if provided) in addition to always having a Promisified\r\n        // EventEmitter returned (well, sometimes -- see above), its safe to insert a callback if none was given\r\n        try {\r\n            if (typeof config === \"string\") {\r\n                if (values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config,\r\n                        args: values,\r\n                    };\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else {\r\n                    data.query.text = config;\r\n                    // pg v6 will, for some reason, accept both\r\n                    // client.query(\"...\", undefined, () => {...})\r\n                    // **and**\r\n                    // client.query(\"...\", () => {...});\r\n                    // Internally, precedence is given to the callback argument\r\n                    if (callback) {\r\n                        callback = patchCallback(callback);\r\n                    }\r\n                    else {\r\n                        values = patchCallback(values);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (typeof config.name === \"string\") {\r\n                    data.query.plan = config.name;\r\n                }\r\n                else if (config.values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config.text,\r\n                        args: config.values,\r\n                    };\r\n                }\r\n                else {\r\n                    data.query.text = config.text;\r\n                }\r\n                if (callback) {\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else if (values) {\r\n                    values = patchCallback(values);\r\n                }\r\n                else {\r\n                    config.callback = patchCallback(config.callback);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // if our logic here throws, bail out and just let pg do its thing\r\n            return originalClientQuery.apply(this, arguments);\r\n        }\r\n        arguments[0] = config;\r\n        arguments[1] = values;\r\n        arguments[2] = callback;\r\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\r\n        queryResult = originalClientQuery.apply(this, arguments);\r\n        return queryResult;\r\n    };\r\n    return originalPg;\r\n}\r\nexports.postgres6 = {\r\n    versionSpecifier: \"6.x\",\r\n    patch: postgres6PatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres6);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=pg.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar redisPatchFunction = function (originalRedis) {\r\n    var originalSend = originalRedis.RedisClient.prototype.internal_send_command;\r\n    // Note: This is mixing together both context tracking and dependency tracking\r\n    originalRedis.RedisClient.prototype.internal_send_command = function (commandObj) {\r\n        if (commandObj) {\r\n            var cb_1 = commandObj.callback;\r\n            if (!cb_1 || !cb_1.pubsubBound) {\r\n                var address_1 = this.address;\r\n                var startTime_1 = process.hrtime();\r\n                // Note: augmenting the callback on internal_send_command is correct for context\r\n                // tracking, but may be too low-level for dependency tracking. There are some 'errors'\r\n                // which higher levels expect in some cases\r\n                // However, the only other option is to intercept every individual command.\r\n                commandObj.callback = diagnostic_channel_1.channel.bindToContext(function (err, result) {\r\n                    var hrDuration = process.hrtime(startTime_1);\r\n                    /* tslint:disable-next-line:no-bitwise */\r\n                    var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\r\n                    diagnostic_channel_1.channel.publish(\"redis\", { duration: duration, address: address_1, commandObj: commandObj, err: err, result: result });\r\n                    if (typeof cb_1 === \"function\") {\r\n                        cb_1.apply(this, arguments);\r\n                    }\r\n                });\r\n                commandObj.callback.pubsubBound = true;\r\n            }\r\n        }\r\n        return originalSend.call(this, commandObj);\r\n    };\r\n    return originalRedis;\r\n};\r\nexports.redis = {\r\n    versionSpecifier: \">= 2.0.0 < 3.0.0\",\r\n    patch: redisPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"redis\", exports.redis);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=redis.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\n// register a \"filter\" with each logger that publishes the data about to be logged\r\nvar winstonPatchFunction = function (originalWinston) {\r\n    var originalLog = originalWinston.Logger.prototype.log;\r\n    var curLevels;\r\n    var loggingFilter = function (level, message, meta) {\r\n        var levelKind;\r\n        if (curLevels === originalWinston.config.npm.levels) {\r\n            levelKind = \"npm\";\r\n        }\r\n        else if (curLevels === originalWinston.config.syslog.levels) {\r\n            levelKind = \"syslog\";\r\n        }\r\n        else {\r\n            levelKind = \"unknown\";\r\n        }\r\n        diagnostic_channel_1.channel.publish(\"winston\", { level: level, message: message, meta: meta, levelKind: levelKind });\r\n        return message;\r\n    };\r\n    // whenever someone logs, ensure our filter comes last\r\n    originalWinston.Logger.prototype.log = function log() {\r\n        curLevels = this.levels;\r\n        if (!this.filters || this.filters.length === 0) {\r\n            this.filters = [loggingFilter];\r\n        }\r\n        else if (this.filters[this.filters.length - 1] !== loggingFilter) {\r\n            this.filters = this.filters.filter(function (f) { return f !== loggingFilter; });\r\n            this.filters.push(loggingFilter);\r\n        }\r\n        return originalLog.apply(this, arguments);\r\n    };\r\n    return originalWinston;\r\n};\r\nexports.winston = {\r\n    versionSpecifier: \"2.x\",\r\n    patch: winstonPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=winston.pub.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => [];\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 918;\nmodule.exports = webpackEmptyContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => [];\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 7101;\nmodule.exports = webpackEmptyContext;","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar patchRequire_1 = require(\"./patchRequire\");\r\nvar patchRequire_2 = require(\"./patchRequire\");\r\nexports.makePatchingRequire = patchRequire_2.makePatchingRequire;\r\nvar trueFilter = function (publishing) { return true; };\r\nvar ContextPreservingEventEmitter = (function () {\r\n    function ContextPreservingEventEmitter() {\r\n        this.version = require(\"./../../package.json\").version; // Allow for future versions to replace things?\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        this.knownPatches = {};\r\n        this.currentlyPublishing = false;\r\n    }\r\n    ContextPreservingEventEmitter.prototype.shouldPublish = function (name) {\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            return listeners.some(function (_a) {\r\n                var filter = _a.filter;\r\n                return !filter || filter(false);\r\n            });\r\n        }\r\n        return false;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.publish = function (name, event) {\r\n        if (this.currentlyPublishing) {\r\n            return; // Avoid reentrancy\r\n        }\r\n        var listeners = this.subscribers[name];\r\n        // Note: Listeners called synchronously to preserve context\r\n        if (listeners) {\r\n            var standardEvent_1 = {\r\n                timestamp: Date.now(),\r\n                data: event,\r\n            };\r\n            this.currentlyPublishing = true;\r\n            listeners.forEach(function (_a) {\r\n                var listener = _a.listener, filter = _a.filter;\r\n                try {\r\n                    if (filter && filter(true)) {\r\n                        listener(standardEvent_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // Subscriber threw an error\r\n                }\r\n            });\r\n            this.currentlyPublishing = false;\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.subscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        if (!this.subscribers[name]) {\r\n            this.subscribers[name] = [];\r\n        }\r\n        this.subscribers[name].push({ listener: listener, filter: filter });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.unsubscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            for (var index = 0; index < listeners.length; ++index) {\r\n                if (listeners[index].listener === listener && listeners[index].filter === filter) {\r\n                    listeners.splice(index, 1);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    // Used for tests\r\n    ContextPreservingEventEmitter.prototype.reset = function () {\r\n        var _this = this;\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        // Modify the knownPatches object rather than replace, since a reference will be used in the require patcher\r\n        Object.getOwnPropertyNames(this.knownPatches).forEach(function (prop) { return delete _this.knownPatches[prop]; });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.bindToContext = function (cb) {\r\n        return this.contextPreservationFunction(cb);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addContextPreservation = function (preserver) {\r\n        var previousPreservationStack = this.contextPreservationFunction;\r\n        this.contextPreservationFunction = (function (cb) { return preserver(previousPreservationStack(cb)); });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.registerMonkeyPatch = function (packageName, patcher) {\r\n        if (!this.knownPatches[packageName]) {\r\n            this.knownPatches[packageName] = [];\r\n        }\r\n        this.knownPatches[packageName].push(patcher);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.getPatchesObject = function () {\r\n        return this.knownPatches;\r\n    };\r\n    return ContextPreservingEventEmitter;\r\n}());\r\nif (!global.diagnosticsSource) {\r\n    global.diagnosticsSource = new ContextPreservingEventEmitter();\r\n    // TODO: should this only patch require after at least one monkey patch is registered?\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    var moduleModule = require(\"module\");\r\n    // Note: We pass in the object now before any patches are registered, but the object is passed by reference\r\n    // so any updates made to the object will be visible in the patcher.\r\n    moduleModule.prototype.require = patchRequire_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject());\r\n}\r\nexports.channel = global.diagnosticsSource;\r\n//# sourceMappingURL=channel.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar semver = require(\"semver\");\r\n/* tslint:disable-next-line:no-var-requires */\r\nvar moduleModule = require(\"module\");\r\nvar nativeModules = Object.keys(process.binding(\"natives\"));\r\nvar originalRequire = moduleModule.prototype.require;\r\nfunction makePatchingRequire(knownPatches) {\r\n    var patchedModules = {};\r\n    return function patchedRequire(moduleId) {\r\n        var originalModule = originalRequire.apply(this, arguments);\r\n        if (knownPatches[moduleId]) {\r\n            // Fetch the specific path of the module\r\n            var modulePath = moduleModule._resolveFilename(moduleId, this);\r\n            if (patchedModules.hasOwnProperty(modulePath)) {\r\n                // This module has already been patched, no need to reapply\r\n                return patchedModules[modulePath];\r\n            }\r\n            var moduleVersion = void 0;\r\n            if (nativeModules.indexOf(moduleId) < 0) {\r\n                try {\r\n                    moduleVersion = originalRequire.call(this, path.join(moduleId, \"package.json\")).version;\r\n                }\r\n                catch (e) {\r\n                    // This should only happen if moduleId is actually a path rather than a module\r\n                    // This is not a supported scenario\r\n                    return originalModule;\r\n                }\r\n            }\r\n            else {\r\n                // This module is implemented natively so we cannot find a package.json\r\n                // Instead, take the version of node itself\r\n                moduleVersion = process.version.substring(1);\r\n            }\r\n            var prereleaseTagIndex = moduleVersion.indexOf(\"-\");\r\n            if (prereleaseTagIndex >= 0) {\r\n                // We ignore prerelease tags to avoid impossible to fix gaps in support\r\n                // e.g. supporting console in >= 4.0.0 would otherwise not include\r\n                // 8.0.0-pre\r\n                moduleVersion = moduleVersion.substring(0, prereleaseTagIndex);\r\n            }\r\n            var modifiedModule = originalModule;\r\n            for (var _i = 0, _a = knownPatches[moduleId]; _i < _a.length; _i++) {\r\n                var modulePatcher = _a[_i];\r\n                if (semver.satisfies(moduleVersion, modulePatcher.versionSpecifier)) {\r\n                    modifiedModule = modulePatcher.patch(modifiedModule, modulePath);\r\n                }\r\n            }\r\n            return patchedModules[modulePath] = modifiedModule;\r\n        }\r\n        return originalModule;\r\n    };\r\n}\r\nexports.makePatchingRequire = makePatchingRequire;\r\n//# sourceMappingURL=patchRequire.js.map","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-console\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Emitter = Emitter;\r\nEmitter._noop = function () { };\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"../typings/thenable.d.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        if (!Is.string(value)) {\r\n            return Trace.Off;\r\n        }\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            // eslint-disable-next-line no-console\r\n            console.log('inspect');\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n *\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\n/**\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar protocol2code;\r\n(function (protocol2code) {\r\n    function asCallHierarchyItem(converter, item) {\r\n        if (item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new vscode_1.CallHierarchyItem(converter.asSymbolKind(item.kind), item.name, item.detail || '', converter.asUri(item.uri), converter.asRange(item.range), converter.asRange(item.selectionRange));\r\n        if (item.tags !== undefined) {\r\n            result.tags = converter.asSymbolTags(item.tags);\r\n        }\r\n        return result;\r\n    }\r\n    protocol2code.asCallHierarchyItem = asCallHierarchyItem;\r\n    function asCallHierarchyItems(converter, items) {\r\n        if (items === null) {\r\n            return undefined;\r\n        }\r\n        let result = items.map(item => asCallHierarchyItem(converter, item));\r\n        return result[0];\r\n    }\r\n    protocol2code.asCallHierarchyItems = asCallHierarchyItems;\r\n    function asCallHierarchyIncomingCall(converter, item) {\r\n        return new vscode_1.CallHierarchyIncomingCall(asCallHierarchyItem(converter, item.from), converter.asRanges(item.fromRanges));\r\n    }\r\n    protocol2code.asCallHierarchyIncomingCall = asCallHierarchyIncomingCall;\r\n    function asCallHierarchyIncomingCalls(converter, items) {\r\n        if (items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(item => asCallHierarchyIncomingCall(converter, item));\r\n    }\r\n    protocol2code.asCallHierarchyIncomingCalls = asCallHierarchyIncomingCalls;\r\n    function asCallHierarchyOutgoingCall(converter, item) {\r\n        return new vscode_1.CallHierarchyOutgoingCall(asCallHierarchyItem(converter, item.to), converter.asRanges(item.fromRanges));\r\n    }\r\n    protocol2code.asCallHierarchyOutgoingCall = asCallHierarchyOutgoingCall;\r\n    function asCallHierarchyOutgoingCalls(converter, items) {\r\n        if (items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(item => asCallHierarchyOutgoingCall(converter, item));\r\n    }\r\n    protocol2code.asCallHierarchyOutgoingCalls = asCallHierarchyOutgoingCalls;\r\n})(protocol2code || (protocol2code = {}));\r\nvar code2protocol;\r\n(function (code2protocol) {\r\n    function asCallHierarchyItem(converter, value) {\r\n        const result = {\r\n            name: value.name,\r\n            kind: converter.asSymbolKind(value.kind),\r\n            uri: converter.asUri(value.uri),\r\n            range: converter.asRange(value.range),\r\n            selectionRange: converter.asRange(value.selectionRange)\r\n        };\r\n        if (value.detail !== undefined && value.detail.length > 0) {\r\n            result.detail = value.detail;\r\n        }\r\n        if (value.tags !== undefined) {\r\n            result.tags = converter.asSymbolTags(value.tags);\r\n        }\r\n        return result;\r\n    }\r\n    code2protocol.asCallHierarchyItem = asCallHierarchyItem;\r\n})(code2protocol || (code2protocol = {}));\r\nclass CallHierarchyProvider {\r\n    constructor(client) {\r\n        this.client = client;\r\n        this.middleware = client.clientOptions.middleware;\r\n    }\r\n    prepareCallHierarchy(document, position, token) {\r\n        const client = this.client;\r\n        const middleware = this.middleware;\r\n        const prepareCallHierarchy = (document, position, token) => {\r\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\r\n            return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type, params, token).then((result) => {\r\n                return protocol2code.asCallHierarchyItems(this.client.protocol2CodeConverter, result);\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        return middleware.prepareCallHierarchy\r\n            ? middleware.prepareCallHierarchy(document, position, token, prepareCallHierarchy)\r\n            : prepareCallHierarchy(document, position, token);\r\n    }\r\n    provideCallHierarchyIncomingCalls(item, token) {\r\n        const client = this.client;\r\n        const middleware = this.middleware;\r\n        const provideCallHierarchyIncomingCalls = (item, token) => {\r\n            const params = {\r\n                item: code2protocol.asCallHierarchyItem(client.code2ProtocolConverter, item)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyIncomingCallsRequest.type, params, token).then((result) => {\r\n                return protocol2code.asCallHierarchyIncomingCalls(client.protocol2CodeConverter, result);\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyIncomingCallsRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        return middleware.provideCallHierarchyIncomingCalls\r\n            ? middleware.provideCallHierarchyIncomingCalls(item, token, provideCallHierarchyIncomingCalls)\r\n            : provideCallHierarchyIncomingCalls(item, token);\r\n    }\r\n    provideCallHierarchyOutgoingCalls(item, token) {\r\n        const client = this.client;\r\n        const middleware = this.middleware;\r\n        const provideCallHierarchyOutgoingCalls = (item, token) => {\r\n            const params = {\r\n                item: code2protocol.asCallHierarchyItem(client.code2ProtocolConverter, item)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyOutgoingCallsRequest.type, params, token).then((result) => {\r\n                return protocol2code.asCallHierarchyOutgoingCalls(client.protocol2CodeConverter, result);\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyOutgoingCallsRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        return middleware.provideCallHierarchyOutgingCalls\r\n            ? middleware.provideCallHierarchyOutgingCalls(item, token, provideCallHierarchyOutgoingCalls)\r\n            : provideCallHierarchyOutgoingCalls(item, token);\r\n    }\r\n}\r\nclass CallHierarchyFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type);\r\n    }\r\n    fillClientCapabilities(cap) {\r\n        const capabilites = cap;\r\n        const capability = ensure(ensure(capabilites, 'textDocument'), 'callHierarchy');\r\n        capability.dynamicRegistration = true;\r\n    }\r\n    initialize(cap, documentSelector) {\r\n        const capabilities = cap;\r\n        const [id, options] = this.getRegistration(documentSelector, capabilities.callHierarchyProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const client = this._client;\r\n        const provider = new CallHierarchyProvider(client);\r\n        return [vscode_1.languages.registerCallHierarchyProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.CallHierarchyFeature = CallHierarchyFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst c2p = require(\"./codeConverter\");\r\nconst p2c = require(\"./protocolConverter\");\r\nconst Is = require(\"./utils/is\");\r\nconst async_1 = require(\"./utils/async\");\r\nconst UUID = require(\"./utils/uuid\");\r\nconst progressPart_1 = require(\"./progressPart\");\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nclass ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n}\r\nfunction createConnection(input, output, errorHandler, closeHandler) {\r\n    let logger = new ConsoleLogger();\r\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\r\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\r\n    connection.onClose(closeHandler);\r\n    let result = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\r\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\r\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\r\n        onProgress: connection.onProgress,\r\n        sendProgress: connection.sendProgress,\r\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\r\n            const defaultTraceOptions = {\r\n                sendNotification: false,\r\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\r\n            };\r\n            if (sendNotificationOrTraceOptions === void 0) {\r\n                connection.trace(value, tracer, defaultTraceOptions);\r\n            }\r\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n            else {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n        },\r\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\r\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\r\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\r\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\r\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\r\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\r\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\r\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\r\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\r\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\r\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\r\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\r\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    return result;\r\n}\r\n/**\r\n * An action to be performed when the connection is producing errors.\r\n */\r\nvar ErrorAction;\r\n(function (ErrorAction) {\r\n    /**\r\n     * Continue running the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\r\n    /**\r\n     * Shutdown the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\r\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\r\n/**\r\n * An action to be performed when the connection to a server got closed.\r\n */\r\nvar CloseAction;\r\n(function (CloseAction) {\r\n    /**\r\n     * Don't restart the server. The connection stays closed.\r\n     */\r\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\r\n    /**\r\n     * Restart the server.\r\n     */\r\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\r\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\r\nclass DefaultErrorHandler {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.restarts = [];\r\n    }\r\n    error(_error, _message, count) {\r\n        if (count && count <= 3) {\r\n            return ErrorAction.Continue;\r\n        }\r\n        return ErrorAction.Shutdown;\r\n    }\r\n    closed() {\r\n        this.restarts.push(Date.now());\r\n        if (this.restarts.length < 5) {\r\n            return CloseAction.Restart;\r\n        }\r\n        else {\r\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\r\n            if (diff <= 3 * 60 * 1000) {\r\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\r\n                return CloseAction.DoNotRestart;\r\n            }\r\n            else {\r\n                this.restarts.shift();\r\n                return CloseAction.Restart;\r\n            }\r\n        }\r\n    }\r\n}\r\nvar RevealOutputChannelOn;\r\n(function (RevealOutputChannelOn) {\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\r\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\r\n    State[State[\"Starting\"] = 3] = \"Starting\";\r\n    State[State[\"Running\"] = 2] = \"Running\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar ClientState;\r\n(function (ClientState) {\r\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\r\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\r\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\r\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\r\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\r\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\r\n})(ClientState || (ClientState = {}));\r\nconst SupportedSymbolKinds = [\r\n    vscode_languageserver_protocol_1.SymbolKind.File,\r\n    vscode_languageserver_protocol_1.SymbolKind.Module,\r\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\r\n    vscode_languageserver_protocol_1.SymbolKind.Package,\r\n    vscode_languageserver_protocol_1.SymbolKind.Class,\r\n    vscode_languageserver_protocol_1.SymbolKind.Method,\r\n    vscode_languageserver_protocol_1.SymbolKind.Property,\r\n    vscode_languageserver_protocol_1.SymbolKind.Field,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\r\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\r\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\r\n    vscode_languageserver_protocol_1.SymbolKind.Function,\r\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\r\n    vscode_languageserver_protocol_1.SymbolKind.String,\r\n    vscode_languageserver_protocol_1.SymbolKind.Number,\r\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\r\n    vscode_languageserver_protocol_1.SymbolKind.Array,\r\n    vscode_languageserver_protocol_1.SymbolKind.Object,\r\n    vscode_languageserver_protocol_1.SymbolKind.Key,\r\n    vscode_languageserver_protocol_1.SymbolKind.Null,\r\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\r\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\r\n    vscode_languageserver_protocol_1.SymbolKind.Event,\r\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\r\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\r\n];\r\nconst SupportedCompletionItemKinds = [\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\r\n];\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar DynamicFeature;\r\n(function (DynamicFeature) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\r\n    }\r\n    DynamicFeature.is = is;\r\n})(DynamicFeature || (DynamicFeature = {}));\r\nclass DocumentNotifiactions {\r\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\r\n        this._client = _client;\r\n        this._event = _event;\r\n        this._type = _type;\r\n        this._middleware = _middleware;\r\n        this._createParams = _createParams;\r\n        this._selectorFilter = _selectorFilter;\r\n        this._selectors = new Map();\r\n    }\r\n    static textDocumentFilter(selectors, textDocument) {\r\n        for (const selector of selectors) {\r\n            if (vscode_1.languages.match(selector, textDocument)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = this._event(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(data) {\r\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\r\n            if (this._middleware) {\r\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\r\n            }\r\n            else {\r\n                this._client.sendNotification(this._type, this._createParams(data));\r\n            }\r\n            this.notificationSent(data);\r\n        }\r\n    }\r\n    notificationSent(_data) {\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    getProvider(document) {\r\n        for (const selector of this._selectors.values()) {\r\n            if (vscode_1.languages.match(selector, document)) {\r\n                return {\r\n                    send: (data) => {\r\n                        this.callback(data);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`No provider available for the given text document`);\r\n    }\r\n}\r\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    register(message, data) {\r\n        super.register(message, data);\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let documentSelector = data.registerOptions.documentSelector;\r\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\r\n            let uri = textDocument.uri.toString();\r\n            if (this._syncedDocuments.has(uri)) {\r\n                return;\r\n            }\r\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didOpen = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                if (middleware.didOpen) {\r\n                    middleware.didOpen(textDocument, didOpen);\r\n                }\r\n                else {\r\n                    didOpen(textDocument);\r\n                }\r\n                this._syncedDocuments.set(uri, textDocument);\r\n            }\r\n        });\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\r\n    }\r\n}\r\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.delete(textDocument.uri.toString());\r\n    }\r\n    unregister(id) {\r\n        let selector = this._selectors.get(id);\r\n        // The super call removed the selector from the map\r\n        // of selectors.\r\n        super.unregister(id);\r\n        let selectors = this._selectors.values();\r\n        this._syncedDocuments.forEach((textDocument) => {\r\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didClose = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                this._syncedDocuments.delete(textDocument.uri.toString());\r\n                if (middleware.didClose) {\r\n                    middleware.didClose(textDocument, didClose);\r\n                }\r\n                else {\r\n                    didClose(textDocument);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DidChangeTextDocumentFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._changeData = new Map();\r\n        this._forcingDelivery = false;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\r\n        }\r\n        this._changeData.set(data.id, {\r\n            documentSelector: data.registerOptions.documentSelector,\r\n            syncKind: data.registerOptions.syncKind\r\n        });\r\n    }\r\n    callback(event) {\r\n        // Text document changes are send for dirty changes as well. We don't\r\n        // have dirty / undirty events in the LSP so we ignore content changes\r\n        // with length zero.\r\n        if (event.contentChanges.length === 0) {\r\n            return;\r\n        }\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\r\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\r\n                    }\r\n                    else {\r\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\r\n                    }\r\n                }\r\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n                    let didChange = (event) => {\r\n                        if (this._changeDelayer) {\r\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\r\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\r\n                                this.forceDelivery();\r\n                                this._changeDelayer.uri = event.document.uri.toString();\r\n                            }\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            });\r\n                        }\r\n                        else {\r\n                            this._changeDelayer = {\r\n                                uri: event.document.uri.toString(),\r\n                                delayer: new async_1.Delayer(200)\r\n                            };\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            }, -1);\r\n                        }\r\n                    };\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, didChange);\r\n                    }\r\n                    else {\r\n                        didChange(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._changeData.delete(id);\r\n        if (this._changeData.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._changeDelayer = undefined;\r\n        this._forcingDelivery = false;\r\n        this._changeData.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    forceDelivery() {\r\n        if (this._forcingDelivery || !this._changeDelayer) {\r\n            return;\r\n        }\r\n        try {\r\n            this._forcingDelivery = true;\r\n            this._changeDelayer.delayer.forceDelivery();\r\n        }\r\n        finally {\r\n            this._forcingDelivery = false;\r\n        }\r\n    }\r\n    getProvider(document) {\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, document)) {\r\n                return {\r\n                    send: (event) => {\r\n                        this.callback(event);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`No provider available for the given text document`);\r\n    }\r\n}\r\nclass WillSaveFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n}\r\nclass WillSaveWaitUntilFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._selectors = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSaveWaitUntil = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(event) {\r\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\r\n            let middleware = this._client.clientOptions.middleware;\r\n            let willSaveWaitUntil = (event) => {\r\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\r\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\r\n                    return vEdits === void 0 ? [] : vEdits;\r\n                });\r\n            };\r\n            event.waitUntil(middleware.willSaveWaitUntil\r\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\r\n                : willSaveWaitUntil(event));\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\r\n            });\r\n        }\r\n    }\r\n    register(method, data) {\r\n        this._includeText = !!data.registerOptions.includeText;\r\n        super.register(method, data);\r\n    }\r\n}\r\nclass FileSystemWatcherFeature {\r\n    constructor(_client, _notifyFileEvent) {\r\n        this._client = _client;\r\n        this._notifyFileEvent = _notifyFileEvent;\r\n        this._watchers = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\r\n    }\r\n    initialize(_capabilities, _documentSelector) {\r\n    }\r\n    register(_method, data) {\r\n        if (!Array.isArray(data.registerOptions.watchers)) {\r\n            return;\r\n        }\r\n        let disposeables = [];\r\n        for (let watcher of data.registerOptions.watchers) {\r\n            if (!Is.string(watcher.globPattern)) {\r\n                continue;\r\n            }\r\n            let watchCreate = true, watchChange = true, watchDelete = true;\r\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\r\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\r\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) !== 0;\r\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) !== 0;\r\n            }\r\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\r\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\r\n            disposeables.push(fileSystemWatcher);\r\n        }\r\n        this._watchers.set(data.id, disposeables);\r\n    }\r\n    registerRaw(id, fileSystemWatchers) {\r\n        let disposeables = [];\r\n        for (let fileSystemWatcher of fileSystemWatchers) {\r\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\r\n        }\r\n        this._watchers.set(id, disposeables);\r\n    }\r\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\r\n        if (watchCreate) {\r\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\r\n            }), null, listeners);\r\n        }\r\n        if (watchChange) {\r\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\r\n            }), null, listeners);\r\n        }\r\n        if (watchDelete) {\r\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\r\n            }), null, listeners);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._watchers.get(id);\r\n        if (disposeables) {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._watchers.forEach((disposeables) => {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        });\r\n        this._watchers.clear();\r\n    }\r\n}\r\nclass TextDocumentFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._registrations = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let registration = this.registerLanguageProvider(data.registerOptions);\r\n        this._registrations.set(data.id, { disposable: registration[0], data, provider: registration[1] });\r\n    }\r\n    unregister(id) {\r\n        let registration = this._registrations.get(id);\r\n        if (registration !== undefined) {\r\n            registration.disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._registrations.forEach((value) => {\r\n            value.disposable.dispose();\r\n        });\r\n        this._registrations.clear();\r\n    }\r\n    getRegistration(documentSelector, capability) {\r\n        if (!capability) {\r\n            return [undefined, undefined];\r\n        }\r\n        else if (vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)) {\r\n            const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\r\n            const selector = capability.documentSelector || documentSelector;\r\n            if (selector) {\r\n                return [id, Object.assign({}, capability, { documentSelector: selector })];\r\n            }\r\n        }\r\n        else if (Is.boolean(capability) && capability === true || vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)) {\r\n            if (!documentSelector) {\r\n                return [undefined, undefined];\r\n            }\r\n            let options = (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n            return [UUID.generateUuid(), options];\r\n        }\r\n        return [undefined, undefined];\r\n    }\r\n    getRegistrationOptions(documentSelector, capability) {\r\n        if (!documentSelector || !capability) {\r\n            return undefined;\r\n        }\r\n        return (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n    }\r\n    getProvider(textDocument) {\r\n        for (const registration of this._registrations.values()) {\r\n            let selector = registration.data.registerOptions.documentSelector;\r\n            if (selector !== null && vscode_1.languages.match(selector, textDocument)) {\r\n                return registration.provider;\r\n            }\r\n        }\r\n        throw new Error(`The feature has no registration for the provided text document ${textDocument.uri.toString()}`);\r\n    }\r\n}\r\nexports.TextDocumentFeature = TextDocumentFeature;\r\nclass WorkspaceFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._registrations = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        const registration = this.registerLanguageProvider(data.registerOptions);\r\n        this._registrations.set(data.id, { disposable: registration[0], provider: registration[1] });\r\n    }\r\n    unregister(id) {\r\n        let registration = this._registrations.get(id);\r\n        if (registration !== undefined) {\r\n            registration.disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._registrations.forEach((registration) => {\r\n            registration.disposable.dispose();\r\n        });\r\n        this._registrations.clear();\r\n    }\r\n    getProviders() {\r\n        const result = [];\r\n        for (const registration of this._registrations.values()) {\r\n            result.push(registration.provider);\r\n        }\r\n        return result;\r\n    }\r\n}\r\nclass CompletionItemFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\r\n        completion.dynamicRegistration = true;\r\n        completion.contextSupport = true;\r\n        completion.completionItem = {\r\n            snippetSupport: true,\r\n            commitCharactersSupport: true,\r\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\r\n            deprecatedSupport: true,\r\n            preselectSupport: true,\r\n            tagSupport: { valueSet: [vscode_languageserver_protocol_1.CompletionItemTag.Deprecated] }\r\n        };\r\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.completionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const triggerCharacters = options.triggerCharacters || [];\r\n        const provider = {\r\n            provideCompletionItems: (document, position, token, context) => {\r\n                const client = this._client;\r\n                const middleware = this._client.clientOptions.middleware;\r\n                const provideCompletionItems = (document, position, context, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                return middleware.provideCompletionItem\r\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\r\n                    : provideCompletionItems(document, position, context, token);\r\n            },\r\n            resolveCompletionItem: options.resolveProvider\r\n                ? (item, token) => {\r\n                    const client = this._client;\r\n                    const middleware = this._client.clientOptions.middleware;\r\n                    const resolveCompletionItem = (item, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\r\n                            return Promise.resolve(item);\r\n                        });\r\n                    };\r\n                    return middleware.resolveCompletionItem\r\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\r\n                        : resolveCompletionItem(item, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerCompletionItemProvider(options.documentSelector, provider, ...triggerCharacters), provider];\r\n    }\r\n}\r\nclass HoverFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\r\n        hoverCapability.dynamicRegistration = true;\r\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.hoverProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideHover: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideHover = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideHover\r\n                    ? middleware.provideHover(document, position, token, provideHover)\r\n                    : provideHover(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerHoverProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass SignatureHelpFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\r\n        config.dynamicRegistration = true;\r\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\r\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\r\n        config.contextSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.signatureHelpProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideSignatureHelp: (document, position, token, context) => {\r\n                const client = this._client;\r\n                const providerSignatureHelp = (document, position, context, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asSignatureHelpParams(document, position, context), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideSignatureHelp\r\n                    ? middleware.provideSignatureHelp(document, position, context, token, providerSignatureHelp)\r\n                    : providerSignatureHelp(document, position, context, token);\r\n            }\r\n        };\r\n        let disposable;\r\n        if (options.retriggerCharacters === undefined) {\r\n            const triggerCharacters = options.triggerCharacters || [];\r\n            disposable = vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, provider, ...triggerCharacters);\r\n        }\r\n        else {\r\n            const metaData = {\r\n                triggerCharacters: options.triggerCharacters || [],\r\n                retriggerCharacters: options.retriggerCharacters || []\r\n            };\r\n            disposable = vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, provider, metaData);\r\n        }\r\n        return [disposable, provider];\r\n    }\r\n}\r\nclass DefinitionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\r\n        definitionSupport.dynamicRegistration = true;\r\n        definitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.definitionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDefinition: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideDefinition = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDefinition\r\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\r\n                    : provideDefinition(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDefinitionProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass ReferencesFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.referencesProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideReferences: (document, position, options, token) => {\r\n                const client = this._client;\r\n                const _providerReferences = (document, position, options, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideReferences\r\n                    ? middleware.provideReferences(document, position, options, token, _providerReferences)\r\n                    : _providerReferences(document, position, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerReferenceProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentHighlightFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentHighlightProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentHighlights: (document, position, token) => {\r\n                const client = this._client;\r\n                const _provideDocumentHighlights = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentHighlights\r\n                    ? middleware.provideDocumentHighlights(document, position, token, _provideDocumentHighlights)\r\n                    : _provideDocumentHighlights(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentSymbolFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentSymbolProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentSymbols: (document, token) => {\r\n                const client = this._client;\r\n                const _provideDocumentSymbols = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\r\n                        if (data === null) {\r\n                            return undefined;\r\n                        }\r\n                        if (data.length === 0) {\r\n                            return [];\r\n                        }\r\n                        else {\r\n                            let element = data[0];\r\n                            if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\r\n                                return client.protocol2CodeConverter.asDocumentSymbols(data);\r\n                            }\r\n                            else {\r\n                                return client.protocol2CodeConverter.asSymbolInformations(data);\r\n                            }\r\n                        }\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentSymbols\r\n                    ? middleware.provideDocumentSymbols(document, token, _provideDocumentSymbols)\r\n                    : _provideDocumentSymbols(document, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.workspaceSymbolProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: capabilities.workspaceSymbolProvider === true ? { workDoneProgress: false } : capabilities.workspaceSymbolProvider\r\n        });\r\n    }\r\n    registerLanguageProvider(_options) {\r\n        const provider = {\r\n            provideWorkspaceSymbols: (query, token) => {\r\n                const client = this._client;\r\n                const provideWorkspaceSymbols = (query, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideWorkspaceSymbols\r\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\r\n                    : provideWorkspaceSymbols(query, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerWorkspaceSymbolProvider(provider), provider];\r\n    }\r\n}\r\nclass CodeActionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\r\n        cap.dynamicRegistration = true;\r\n        cap.isPreferredSupport = true;\r\n        cap.codeActionLiteralSupport = {\r\n            codeActionKind: {\r\n                valueSet: [\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Empty,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\r\n                ]\r\n            }\r\n        };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeActionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideCodeActions: (document, range, context, token) => {\r\n                const client = this._client;\r\n                const _provideCodeActions = (document, range, context, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        range: client.code2ProtocolConverter.asRange(range),\r\n                        context: client.code2ProtocolConverter.asCodeActionContext(context)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\r\n                        if (values === null) {\r\n                            return undefined;\r\n                        }\r\n                        const result = [];\r\n                        for (let item of values) {\r\n                            if (vscode_languageserver_protocol_1.Command.is(item)) {\r\n                                result.push(client.protocol2CodeConverter.asCommand(item));\r\n                            }\r\n                            else {\r\n                                result.push(client.protocol2CodeConverter.asCodeAction(item));\r\n                            }\r\n                        }\r\n                        return result;\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideCodeActions\r\n                    ? middleware.provideCodeActions(document, range, context, token, _provideCodeActions)\r\n                    : _provideCodeActions(document, range, context, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerCodeActionsProvider(options.documentSelector, provider, (options.codeActionKinds\r\n                ? { providedCodeActionKinds: this._client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\r\n                : undefined)), provider];\r\n    }\r\n}\r\nclass CodeLensFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeLensProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideCodeLenses: (document, token) => {\r\n                const client = this._client;\r\n                const provideCodeLenses = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideCodeLenses\r\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\r\n                    : provideCodeLenses(document, token);\r\n            },\r\n            resolveCodeLens: (options.resolveProvider)\r\n                ? (codeLens, token) => {\r\n                    const client = this._client;\r\n                    const resolveCodeLens = (codeLens, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\r\n                            return codeLens;\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.resolveCodeLens\r\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\r\n                        : resolveCodeLens(codeLens, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerCodeLensProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentFormattingEdits: (document, options, token) => {\r\n                const client = this._client;\r\n                const provideDocumentFormattingEdits = (document, options, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentFormattingEdits\r\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\r\n                    : provideDocumentFormattingEdits(document, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentRangeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\r\n                const client = this._client;\r\n                const provideDocumentRangeFormattingEdits = (document, range, options, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        range: client.code2ProtocolConverter.asRange(range),\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                let middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentRangeFormattingEdits\r\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\r\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentOnTypeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\r\n                const client = this._client;\r\n                const provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        position: client.code2ProtocolConverter.asPosition(position),\r\n                        ch: ch,\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideOnTypeFormattingEdits\r\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\r\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\r\n            }\r\n        };\r\n        const moreTriggerCharacter = options.moreTriggerCharacter || [];\r\n        return [vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, provider, options.firstTriggerCharacter, ...moreTriggerCharacter), provider];\r\n    }\r\n}\r\nclass RenameFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\r\n        rename.dynamicRegistration = true;\r\n        rename.prepareSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.renameProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        if (Is.boolean(capabilities.renameProvider)) {\r\n            options.prepareProvider = false;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideRenameEdits: (document, position, newName, token) => {\r\n                const client = this._client;\r\n                const provideRenameEdits = (document, position, newName, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        position: client.code2ProtocolConverter.asPosition(position),\r\n                        newName: newName\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\r\n                        return Promise.reject(new Error(error.message));\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideRenameEdits\r\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\r\n                    : provideRenameEdits(document, position, newName, token);\r\n            },\r\n            prepareRename: options.prepareProvider\r\n                ? (document, position, token) => {\r\n                    const client = this._client;\r\n                    const prepareRename = (document, position, token) => {\r\n                        let params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            position: client.code2ProtocolConverter.asPosition(position),\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\r\n                            if (vscode_languageserver_protocol_1.Range.is(result)) {\r\n                                return client.protocol2CodeConverter.asRange(result);\r\n                            }\r\n                            else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\r\n                                return {\r\n                                    range: client.protocol2CodeConverter.asRange(result.range),\r\n                                    placeholder: result.placeholder\r\n                                };\r\n                            }\r\n                            // To cancel the rename vscode API expects a rejected promise.\r\n                            return Promise.reject(new Error(`The element can't be renamed.`));\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\r\n                            return Promise.reject(new Error(error.message));\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.prepareRename\r\n                        ? middleware.prepareRename(document, position, token, prepareRename)\r\n                        : prepareRename(document, position, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerRenameProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentLinkFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const documentLinkCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentLink');\r\n        documentLinkCapabilities.dynamicRegistration = true;\r\n        documentLinkCapabilities.tooltipSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentLinkProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentLinks: (document, token) => {\r\n                const client = this._client;\r\n                const provideDocumentLinks = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentLinks\r\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\r\n                    : provideDocumentLinks(document, token);\r\n            },\r\n            resolveDocumentLink: options.resolveProvider\r\n                ? (link, token) => {\r\n                    const client = this._client;\r\n                    let resolveDocumentLink = (link, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\r\n                            return Promise.resolve(link);\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.resolveDocumentLink\r\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\r\n                        : resolveDocumentLink(link, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\r\n    }\r\n    initialize() {\r\n        let section = this._client.clientOptions.synchronize.configurationSection;\r\n        if (section !== void 0) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: {\r\n                    section: section\r\n                }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\r\n        });\r\n        this._listeners.set(data.id, disposable);\r\n        if (data.registerOptions.section !== void 0) {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable) {\r\n            this._listeners.delete(id);\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    onDidChangeConfiguration(configurationSection, event) {\r\n        let sections;\r\n        if (Is.string(configurationSection)) {\r\n            sections = [configurationSection];\r\n        }\r\n        else {\r\n            sections = configurationSection;\r\n        }\r\n        if (sections !== void 0 && event !== void 0) {\r\n            let affected = sections.some((section) => event.affectsConfiguration(section));\r\n            if (!affected) {\r\n                return;\r\n            }\r\n        }\r\n        let didChangeConfiguration = (sections) => {\r\n            if (sections === void 0) {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\r\n                return;\r\n            }\r\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\r\n        };\r\n        let middleware = this.getMiddleware();\r\n        middleware\r\n            ? middleware(sections, didChangeConfiguration)\r\n            : didChangeConfiguration(sections);\r\n    }\r\n    extractSettingsInformation(keys) {\r\n        function ensurePath(config, path) {\r\n            let current = config;\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                let obj = current[path[i]];\r\n                if (!obj) {\r\n                    obj = Object.create(null);\r\n                    current[path[i]] = obj;\r\n                }\r\n                current = obj;\r\n            }\r\n            return current;\r\n        }\r\n        let resource = this._client.clientOptions.workspaceFolder\r\n            ? this._client.clientOptions.workspaceFolder.uri\r\n            : undefined;\r\n        let result = Object.create(null);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let index = key.indexOf('.');\r\n            let config = null;\r\n            if (index >= 0) {\r\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\r\n            }\r\n            else {\r\n                config = vscode_1.workspace.getConfiguration(key, resource);\r\n            }\r\n            if (config) {\r\n                let path = keys[i].split('.');\r\n                ensurePath(result, path)[path[path.length - 1]] = config;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getMiddleware() {\r\n        let middleware = this._client.clientOptions.middleware;\r\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\r\n            return middleware.workspace.didChangeConfiguration;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nclass ExecuteCommandFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._commands = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.executeCommandProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\r\n        });\r\n    }\r\n    register(_message, data) {\r\n        const client = this._client;\r\n        const middleware = client.clientOptions.middleware;\r\n        const executeCommand = (command, args) => {\r\n            let params = {\r\n                command,\r\n                arguments: args\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\r\n            });\r\n        };\r\n        if (data.registerOptions.commands) {\r\n            const disposeables = [];\r\n            for (const command of data.registerOptions.commands) {\r\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\r\n                    return middleware.executeCommand\r\n                        ? middleware.executeCommand(command, args, executeCommand)\r\n                        : executeCommand(command, args);\r\n                }));\r\n            }\r\n            this._commands.set(data.id, disposeables);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._commands.get(id);\r\n        if (disposeables) {\r\n            disposeables.forEach(disposable => disposable.dispose());\r\n        }\r\n    }\r\n    dispose() {\r\n        this._commands.forEach((value) => {\r\n            value.forEach(disposable => disposable.dispose());\r\n        });\r\n        this._commands.clear();\r\n    }\r\n}\r\nvar MessageTransports;\r\n(function (MessageTransports) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\r\n    }\r\n    MessageTransports.is = is;\r\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\r\nclass OnReady {\r\n    constructor(_resolve, _reject) {\r\n        this._resolve = _resolve;\r\n        this._reject = _reject;\r\n        this._used = false;\r\n    }\r\n    get isUsed() {\r\n        return this._used;\r\n    }\r\n    resolve() {\r\n        this._used = true;\r\n        this._resolve();\r\n    }\r\n    reject(error) {\r\n        this._used = true;\r\n        this._reject(error);\r\n    }\r\n}\r\nclass BaseLanguageClient {\r\n    constructor(id, name, clientOptions) {\r\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        this._features = [];\r\n        this._method2Message = new Map();\r\n        this._dynamicFeatures = new Map();\r\n        this._id = id;\r\n        this._name = name;\r\n        clientOptions = clientOptions || {};\r\n        this._clientOptions = {\r\n            documentSelector: clientOptions.documentSelector || [],\r\n            synchronize: clientOptions.synchronize || {},\r\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\r\n            outputChannelName: clientOptions.outputChannelName || this._name,\r\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\r\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\r\n            initializationOptions: clientOptions.initializationOptions,\r\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\r\n            progressOnInitialization: !!clientOptions.progressOnInitialization,\r\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\r\n            middleware: clientOptions.middleware || {},\r\n            uriConverters: clientOptions.uriConverters,\r\n            workspaceFolder: clientOptions.workspaceFolder\r\n        };\r\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\r\n        this.state = ClientState.Initial;\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        this._initializeResult = undefined;\r\n        if (clientOptions.outputChannel) {\r\n            this._outputChannel = clientOptions.outputChannel;\r\n            this._disposeOutputChannel = false;\r\n        }\r\n        else {\r\n            this._outputChannel = undefined;\r\n            this._disposeOutputChannel = true;\r\n        }\r\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\r\n        this._listeners = undefined;\r\n        this._providers = undefined;\r\n        this._diagnostics = undefined;\r\n        this._fileEvents = [];\r\n        this._fileEventDelayer = new async_1.Delayer(250);\r\n        this._onReady = new Promise((resolve, reject) => {\r\n            this._onReadyCallbacks = new OnReady(resolve, reject);\r\n        });\r\n        this._onStop = undefined;\r\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._tracer = {\r\n            log: (messageOrDataObject, data) => {\r\n                if (Is.string(messageOrDataObject)) {\r\n                    this.logTrace(messageOrDataObject, data);\r\n                }\r\n                else {\r\n                    this.logObjectTrace(messageOrDataObject);\r\n                }\r\n            },\r\n        };\r\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\r\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\r\n        this._syncedDocuments = new Map();\r\n        this.registerBuiltinFeatures();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        let oldState = this.getPublicState();\r\n        this._state = value;\r\n        let newState = this.getPublicState();\r\n        if (newState !== oldState) {\r\n            this._stateChangeEmitter.fire({ oldState, newState });\r\n        }\r\n    }\r\n    getPublicState() {\r\n        if (this.state === ClientState.Running) {\r\n            return State.Running;\r\n        }\r\n        else if (this.state === ClientState.Starting) {\r\n            return State.Starting;\r\n        }\r\n        else {\r\n            return State.Stopped;\r\n        }\r\n    }\r\n    get initializeResult() {\r\n        return this._initializeResult;\r\n    }\r\n    sendRequest(type, ...params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            return this._resolvedConnection.sendRequest(type, ...params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onRequest(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onRequest(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendNotification(type, params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendNotification(type, params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onNotification(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onNotification(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onProgress(type, token, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            return this._resolvedConnection.onProgress(type, token, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering progress handler for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendProgress(type, token, value) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendProgress(type, token, value);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending progress for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    get clientOptions() {\r\n        return this._clientOptions;\r\n    }\r\n    get protocol2CodeConverter() {\r\n        return this._p2c;\r\n    }\r\n    get code2ProtocolConverter() {\r\n        return this._c2p;\r\n    }\r\n    get onTelemetry() {\r\n        return this._telemetryEmitter.event;\r\n    }\r\n    get onDidChangeState() {\r\n        return this._stateChangeEmitter.event;\r\n    }\r\n    get outputChannel() {\r\n        if (!this._outputChannel) {\r\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\r\n        }\r\n        return this._outputChannel;\r\n    }\r\n    get traceOutputChannel() {\r\n        if (this._traceOutputChannel) {\r\n            return this._traceOutputChannel;\r\n        }\r\n        return this.outputChannel;\r\n    }\r\n    get diagnostics() {\r\n        return this._diagnostics;\r\n    }\r\n    createDefaultErrorHandler() {\r\n        return new DefaultErrorHandler(this._name);\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n        this.onReady().then(() => {\r\n            this.resolveConnection().then((connection) => {\r\n                connection.trace(this._trace, this._tracer, {\r\n                    sendNotification: false,\r\n                    traceFormat: this._traceFormat\r\n                });\r\n            });\r\n        }, () => {\r\n        });\r\n    }\r\n    data2String(data) {\r\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n            const responseError = data;\r\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\r\n        }\r\n        if (data instanceof Error) {\r\n            if (Is.string(data.stack)) {\r\n                return data.stack;\r\n            }\r\n            return data.message;\r\n        }\r\n        if (Is.string(data)) {\r\n            return data;\r\n        }\r\n        return data.toString();\r\n    }\r\n    info(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    warn(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    error(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    showNotificationMessage() {\r\n        vscode_1.window.showInformationMessage('A request has failed. See the output for more information.', 'Go to output').then(() => {\r\n            this.outputChannel.show(true);\r\n        });\r\n    }\r\n    logTrace(message, data) {\r\n        this.traceOutputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(this.data2String(data));\r\n        }\r\n    }\r\n    logObjectTrace(data) {\r\n        if (data.isLSPMessage && data.type) {\r\n            this.traceOutputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        else {\r\n            this.traceOutputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(`${JSON.stringify(data)}`);\r\n        }\r\n    }\r\n    needsStart() {\r\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\r\n    }\r\n    needsStop() {\r\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\r\n    }\r\n    onReady() {\r\n        return this._onReady;\r\n    }\r\n    isConnectionActive() {\r\n        return this.state === ClientState.Running && !!this._resolvedConnection;\r\n    }\r\n    start() {\r\n        if (this._onReadyCallbacks.isUsed) {\r\n            this._onReady = new Promise((resolve, reject) => {\r\n                this._onReadyCallbacks = new OnReady(resolve, reject);\r\n            });\r\n        }\r\n        this._listeners = [];\r\n        this._providers = [];\r\n        // If we restart then the diagnostics collection is reused.\r\n        if (!this._diagnostics) {\r\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\r\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\r\n                : vscode_1.languages.createDiagnosticCollection();\r\n        }\r\n        this.state = ClientState.Starting;\r\n        this.resolveConnection().then((connection) => {\r\n            connection.onLogMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        this.error(message.message, undefined, false);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        this.warn(message.message, undefined, false);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        this.info(message.message, undefined, false);\r\n                        break;\r\n                    default:\r\n                        this.outputChannel.appendLine(message.message);\r\n                }\r\n            });\r\n            connection.onShowMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        vscode_1.window.showErrorMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        vscode_1.window.showWarningMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                        break;\r\n                    default:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                }\r\n            });\r\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\r\n                let messageFunc;\r\n                switch (params.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        messageFunc = vscode_1.window.showErrorMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        messageFunc = vscode_1.window.showWarningMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                        break;\r\n                    default:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                }\r\n                let actions = params.actions || [];\r\n                return messageFunc(params.message, ...actions);\r\n            });\r\n            connection.onTelemetry((data) => {\r\n                this._telemetryEmitter.fire(data);\r\n            });\r\n            connection.listen();\r\n            // Error is handled in the initialize call.\r\n            return this.initialize(connection);\r\n        }).then(undefined, (error) => {\r\n            this.state = ClientState.StartFailed;\r\n            this._onReadyCallbacks.reject(error);\r\n            this.error('Starting client failed', error);\r\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\r\n        });\r\n        return new vscode_1.Disposable(() => {\r\n            if (this.needsStop()) {\r\n                this.stop();\r\n            }\r\n        });\r\n    }\r\n    resolveConnection() {\r\n        if (!this._connectionPromise) {\r\n            this._connectionPromise = this.createConnection();\r\n        }\r\n        return this._connectionPromise;\r\n    }\r\n    initialize(connection) {\r\n        this.refreshTrace(connection, false);\r\n        let initOption = this._clientOptions.initializationOptions;\r\n        let rootPath = this._clientOptions.workspaceFolder\r\n            ? this._clientOptions.workspaceFolder.uri.fsPath\r\n            : this._clientGetRootPath();\r\n        let initParams = {\r\n            processId: process.pid,\r\n            clientInfo: {\r\n                name: 'vscode',\r\n                version: vscode_1.version\r\n            },\r\n            rootPath: rootPath ? rootPath : null,\r\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\r\n            capabilities: this.computeClientCapabilities(),\r\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\r\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\r\n            workspaceFolders: null\r\n        };\r\n        this.fillInitializeParams(initParams);\r\n        if (this._clientOptions.progressOnInitialization) {\r\n            const token = UUID.generateUuid();\r\n            const part = new progressPart_1.ProgressPart(connection, token);\r\n            initParams.workDoneToken = token;\r\n            return this.doInitialize(connection, initParams).then((result) => {\r\n                part.done();\r\n                return result;\r\n            }, (error) => {\r\n                part.cancel();\r\n                throw error;\r\n            });\r\n        }\r\n        else {\r\n            return this.doInitialize(connection, initParams);\r\n        }\r\n    }\r\n    doInitialize(connection, initParams) {\r\n        return connection.initialize(initParams).then((result) => {\r\n            this._resolvedConnection = connection;\r\n            this._initializeResult = result;\r\n            this.state = ClientState.Running;\r\n            let textDocumentSyncOptions = undefined;\r\n            if (Is.number(result.capabilities.textDocumentSync)) {\r\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: false,\r\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\r\n                        save: undefined\r\n                    };\r\n                }\r\n                else {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: true,\r\n                        change: result.capabilities.textDocumentSync,\r\n                        save: {\r\n                            includeText: false\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\r\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\r\n            }\r\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\r\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\r\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\r\n            this.hookFileEvents(connection);\r\n            this.hookConfigurationChanged(connection);\r\n            this.initializeFeatures(connection);\r\n            this._onReadyCallbacks.resolve();\r\n            return result;\r\n        }).then(undefined, (error) => {\r\n            if (this._clientOptions.initializationFailedHandler) {\r\n                if (this._clientOptions.initializationFailedHandler(error)) {\r\n                    this.initialize(connection);\r\n                }\r\n                else {\r\n                    this.stop();\r\n                    this._onReadyCallbacks.reject(error);\r\n                }\r\n            }\r\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\r\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: 'retry' }).then(item => {\r\n                    if (item && item.id === 'retry') {\r\n                        this.initialize(connection);\r\n                    }\r\n                    else {\r\n                        this.stop();\r\n                        this._onReadyCallbacks.reject(error);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (error && error.message) {\r\n                    vscode_1.window.showErrorMessage(error.message);\r\n                }\r\n                this.error('Server initialization failed.', error);\r\n                this.stop();\r\n                this._onReadyCallbacks.reject(error);\r\n            }\r\n            throw error;\r\n        });\r\n    }\r\n    _clientGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    stop() {\r\n        this._initializeResult = undefined;\r\n        if (!this._connectionPromise) {\r\n            this.state = ClientState.Stopped;\r\n            return Promise.resolve();\r\n        }\r\n        if (this.state === ClientState.Stopping && this._onStop) {\r\n            return this._onStop;\r\n        }\r\n        this.state = ClientState.Stopping;\r\n        this.cleanUp(false);\r\n        // unhook listeners\r\n        return this._onStop = this.resolveConnection().then(connection => {\r\n            return connection.shutdown().then(() => {\r\n                connection.exit();\r\n                connection.dispose();\r\n                this.state = ClientState.Stopped;\r\n                this.cleanUpChannel();\r\n                this._onStop = undefined;\r\n                this._connectionPromise = undefined;\r\n                this._resolvedConnection = undefined;\r\n            });\r\n        });\r\n    }\r\n    cleanUp(channel = true, diagnostics = true) {\r\n        if (this._listeners) {\r\n            this._listeners.forEach(listener => listener.dispose());\r\n            this._listeners = undefined;\r\n        }\r\n        if (this._providers) {\r\n            this._providers.forEach(provider => provider.dispose());\r\n            this._providers = undefined;\r\n        }\r\n        if (this._syncedDocuments) {\r\n            this._syncedDocuments.clear();\r\n        }\r\n        for (let handler of this._dynamicFeatures.values()) {\r\n            handler.dispose();\r\n        }\r\n        if (channel) {\r\n            this.cleanUpChannel();\r\n        }\r\n        if (diagnostics && this._diagnostics) {\r\n            this._diagnostics.dispose();\r\n            this._diagnostics = undefined;\r\n        }\r\n    }\r\n    cleanUpChannel() {\r\n        if (this._outputChannel && this._disposeOutputChannel) {\r\n            this._outputChannel.dispose();\r\n            this._outputChannel = undefined;\r\n        }\r\n    }\r\n    notifyFileEvent(event) {\r\n        var _a, _b;\r\n        const client = this;\r\n        function didChangeWatchedFile(event) {\r\n            client._fileEvents.push(event);\r\n            client._fileEventDelayer.trigger(() => {\r\n                client.onReady().then(() => {\r\n                    client.resolveConnection().then(connection => {\r\n                        if (client.isConnectionActive()) {\r\n                            client.forceDocumentSync();\r\n                            connection.didChangeWatchedFiles({ changes: client._fileEvents });\r\n                        }\r\n                        client._fileEvents = [];\r\n                    });\r\n                }, (error) => {\r\n                    client.error(`Notify file events failed.`, error);\r\n                });\r\n            });\r\n        }\r\n        const workSpaceMiddleware = (_a = this.clientOptions.middleware) === null || _a === void 0 ? void 0 : _a.workspace;\r\n        ((_b = workSpaceMiddleware) === null || _b === void 0 ? void 0 : _b.didChangeWatchedFile) ? workSpaceMiddleware.didChangeWatchedFile(event, didChangeWatchedFile) : didChangeWatchedFile(event);\r\n    }\r\n    forceDocumentSync() {\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\r\n    }\r\n    handleDiagnostics(params) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        let uri = this._p2c.asUri(params.uri);\r\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\r\n        let middleware = this.clientOptions.middleware;\r\n        if (middleware.handleDiagnostics) {\r\n            middleware.handleDiagnostics(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\r\n        }\r\n        else {\r\n            this.setDiagnostics(uri, diagnostics);\r\n        }\r\n    }\r\n    setDiagnostics(uri, diagnostics) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        this._diagnostics.set(uri, diagnostics);\r\n    }\r\n    createConnection() {\r\n        let errorHandler = (error, message, count) => {\r\n            this.handleConnectionError(error, message, count);\r\n        };\r\n        let closeHandler = () => {\r\n            this.handleConnectionClosed();\r\n        };\r\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\r\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\r\n        });\r\n    }\r\n    handleConnectionClosed() {\r\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\r\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\r\n            return;\r\n        }\r\n        try {\r\n            if (this._resolvedConnection) {\r\n                this._resolvedConnection.dispose();\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Disposing a connection could fail if error cases.\r\n        }\r\n        let action = CloseAction.DoNotRestart;\r\n        try {\r\n            action = this._clientOptions.errorHandler.closed();\r\n        }\r\n        catch (error) {\r\n            // Ignore errors coming from the error handler.\r\n        }\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        if (action === CloseAction.DoNotRestart) {\r\n            this.error('Connection to server got closed. Server will not be restarted.');\r\n            this.state = ClientState.Stopped;\r\n            this.cleanUp(false, true);\r\n        }\r\n        else if (action === CloseAction.Restart) {\r\n            this.info('Connection to server got closed. Server will restart.');\r\n            this.cleanUp(false, false);\r\n            this.state = ClientState.Initial;\r\n            this.start();\r\n        }\r\n    }\r\n    handleConnectionError(error, message, count) {\r\n        let action = this._clientOptions.errorHandler.error(error, message, count);\r\n        if (action === ErrorAction.Shutdown) {\r\n            this.error('Connection to server is erroring. Shutting down server.');\r\n            this.stop();\r\n        }\r\n    }\r\n    hookConfigurationChanged(connection) {\r\n        vscode_1.workspace.onDidChangeConfiguration(() => {\r\n            this.refreshTrace(connection, true);\r\n        });\r\n    }\r\n    refreshTrace(connection, sendNotification = false) {\r\n        let config = vscode_1.workspace.getConfiguration(this._id);\r\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\r\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        if (config) {\r\n            const traceConfig = config.get('trace.server', 'off');\r\n            if (typeof traceConfig === 'string') {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\r\n            }\r\n            else {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\r\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\r\n            }\r\n        }\r\n        this._trace = trace;\r\n        this._traceFormat = traceFormat;\r\n        connection.trace(this._trace, this._tracer, {\r\n            sendNotification,\r\n            traceFormat: this._traceFormat\r\n        });\r\n    }\r\n    hookFileEvents(_connection) {\r\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\r\n        if (!fileEvents) {\r\n            return;\r\n        }\r\n        let watchers;\r\n        if (Is.array(fileEvents)) {\r\n            watchers = fileEvents;\r\n        }\r\n        else {\r\n            watchers = [fileEvents];\r\n        }\r\n        if (!watchers) {\r\n            return;\r\n        }\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\r\n    }\r\n    registerFeatures(features) {\r\n        for (let feature of features) {\r\n            this.registerFeature(feature);\r\n        }\r\n    }\r\n    registerFeature(feature) {\r\n        this._features.push(feature);\r\n        if (DynamicFeature.is(feature)) {\r\n            let messages = feature.messages;\r\n            if (Array.isArray(messages)) {\r\n                for (let message of messages) {\r\n                    this._method2Message.set(message.method, message);\r\n                    this._dynamicFeatures.set(message.method, feature);\r\n                }\r\n            }\r\n            else {\r\n                this._method2Message.set(messages.method, messages);\r\n                this._dynamicFeatures.set(messages.method, feature);\r\n            }\r\n        }\r\n    }\r\n    getFeature(request) {\r\n        return this._dynamicFeatures.get(request);\r\n    }\r\n    registerBuiltinFeatures() {\r\n        this.registerFeature(new ConfigurationFeature(this));\r\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\r\n        this.registerFeature(new WillSaveFeature(this));\r\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\r\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\r\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\r\n        this.registerFeature(new CompletionItemFeature(this));\r\n        this.registerFeature(new HoverFeature(this));\r\n        this.registerFeature(new SignatureHelpFeature(this));\r\n        this.registerFeature(new DefinitionFeature(this));\r\n        this.registerFeature(new ReferencesFeature(this));\r\n        this.registerFeature(new DocumentHighlightFeature(this));\r\n        this.registerFeature(new DocumentSymbolFeature(this));\r\n        this.registerFeature(new WorkspaceSymbolFeature(this));\r\n        this.registerFeature(new CodeActionFeature(this));\r\n        this.registerFeature(new CodeLensFeature(this));\r\n        this.registerFeature(new DocumentFormattingFeature(this));\r\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\r\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\r\n        this.registerFeature(new RenameFeature(this));\r\n        this.registerFeature(new DocumentLinkFeature(this));\r\n        this.registerFeature(new ExecuteCommandFeature(this));\r\n    }\r\n    fillInitializeParams(params) {\r\n        for (let feature of this._features) {\r\n            if (Is.func(feature.fillInitializeParams)) {\r\n                feature.fillInitializeParams(params);\r\n            }\r\n        }\r\n    }\r\n    computeClientCapabilities() {\r\n        let result = {};\r\n        ensure(result, 'workspace').applyEdit = true;\r\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\r\n        workspaceEdit.documentChanges = true;\r\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\r\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\r\n        let diagnostics = ensure(ensure(result, 'textDocument'), 'publishDiagnostics');\r\n        diagnostics.relatedInformation = true;\r\n        diagnostics.versionSupport = false;\r\n        diagnostics.tagSupport = { valueSet: [vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary, vscode_languageserver_protocol_1.DiagnosticTag.Deprecated] };\r\n        for (let feature of this._features) {\r\n            feature.fillClientCapabilities(result);\r\n        }\r\n        return result;\r\n    }\r\n    initializeFeatures(_connection) {\r\n        let documentSelector = this._clientOptions.documentSelector;\r\n        for (let feature of this._features) {\r\n            feature.initialize(this._capabilities, documentSelector);\r\n        }\r\n    }\r\n    handleRegistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let registration of params.registrations) {\r\n                const feature = this._dynamicFeatures.get(registration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\r\n                    return;\r\n                }\r\n                const options = registration.registerOptions || {};\r\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\r\n                const data = {\r\n                    id: registration.id,\r\n                    registerOptions: options\r\n                };\r\n                feature.register(this._method2Message.get(registration.method), data);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleUnregistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let unregistration of params.unregisterations) {\r\n                const feature = this._dynamicFeatures.get(unregistration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\r\n                    return;\r\n                }\r\n                feature.unregister(unregistration.id);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleApplyWorkspaceEdit(params) {\r\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\r\n        // However doing it here adds some safety since the server can lag more behind then an extension.\r\n        let workspaceEdit = params.edit;\r\n        let openTextDocuments = new Map();\r\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\r\n        let versionMismatch = false;\r\n        if (workspaceEdit.documentChanges) {\r\n            for (const change of workspaceEdit.documentChanges) {\r\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\r\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\r\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\r\n                        versionMismatch = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (versionMismatch) {\r\n            return Promise.resolve({ applied: false });\r\n        }\r\n        return Is.asPromise(vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; }));\r\n    }\r\n    logFailedRequest(type, error) {\r\n        // If we get a request cancel or a content modified don't log anything.\r\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && (error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled || error.code === vscode_languageserver_protocol_1.ErrorCodes.ContentModified)) {\r\n            return;\r\n        }\r\n        this.error(`Request ${type.method} failed.`, error);\r\n    }\r\n}\r\nexports.BaseLanguageClient = BaseLanguageClient;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst proto = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => value.toString();\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri)\r\n        };\r\n    }\r\n    function asVersionedTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri),\r\n            version: textDocument.version\r\n        };\r\n    }\r\n    function asOpenTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: {\r\n                uri: _uriConverter(textDocument.uri),\r\n                languageId: textDocument.languageId,\r\n                version: textDocument.version,\r\n                text: textDocument.getText()\r\n            }\r\n        };\r\n    }\r\n    function isTextDocumentChangeEvent(value) {\r\n        let candidate = value;\r\n        return !!candidate.document && !!candidate.contentChanges;\r\n    }\r\n    function isTextDocument(value) {\r\n        let candidate = value;\r\n        return !!candidate.uri && !!candidate.version;\r\n    }\r\n    function asChangeTextDocumentParams(arg) {\r\n        if (isTextDocument(arg)) {\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(arg.uri),\r\n                    version: arg.version\r\n                },\r\n                contentChanges: [{ text: arg.getText() }]\r\n            };\r\n            return result;\r\n        }\r\n        else if (isTextDocumentChangeEvent(arg)) {\r\n            let document = arg.document;\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(document.uri),\r\n                    version: document.version\r\n                },\r\n                contentChanges: arg.contentChanges.map((change) => {\r\n                    let range = change.range;\r\n                    return {\r\n                        range: {\r\n                            start: { line: range.start.line, character: range.start.character },\r\n                            end: { line: range.end.line, character: range.end.character }\r\n                        },\r\n                        rangeLength: change.rangeLength,\r\n                        text: change.text\r\n                    };\r\n                })\r\n            };\r\n            return result;\r\n        }\r\n        else {\r\n            throw Error('Unsupported text document change parameter');\r\n        }\r\n    }\r\n    function asCloseTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\r\n        let result = {\r\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\r\n        };\r\n        if (includeContent) {\r\n            result.text = textDocument.getText();\r\n        }\r\n        return result;\r\n    }\r\n    function asTextDocumentSaveReason(reason) {\r\n        switch (reason) {\r\n            case code.TextDocumentSaveReason.Manual:\r\n                return proto.TextDocumentSaveReason.Manual;\r\n            case code.TextDocumentSaveReason.AfterDelay:\r\n                return proto.TextDocumentSaveReason.AfterDelay;\r\n            case code.TextDocumentSaveReason.FocusOut:\r\n                return proto.TextDocumentSaveReason.FocusOut;\r\n        }\r\n        return proto.TextDocumentSaveReason.Manual;\r\n    }\r\n    function asWillSaveTextDocumentParams(event) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(event.document),\r\n            reason: asTextDocumentSaveReason(event.reason)\r\n        };\r\n    }\r\n    function asTextDocumentPositionParams(textDocument, position) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position)\r\n        };\r\n    }\r\n    function asCompletionTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.CompletionTriggerKind.TriggerCharacter:\r\n                return proto.CompletionTriggerKind.TriggerCharacter;\r\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\r\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\r\n            default:\r\n                return proto.CompletionTriggerKind.Invoked;\r\n        }\r\n    }\r\n    function asCompletionParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                triggerKind: asCompletionTriggerKind(context.triggerKind),\r\n                triggerCharacter: context.triggerCharacter\r\n            }\r\n        };\r\n    }\r\n    function asSignatureHelpTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.SignatureHelpTriggerKind.Invoke:\r\n                return proto.SignatureHelpTriggerKind.Invoked;\r\n            case code.SignatureHelpTriggerKind.TriggerCharacter:\r\n                return proto.SignatureHelpTriggerKind.TriggerCharacter;\r\n            case code.SignatureHelpTriggerKind.ContentChange:\r\n                return proto.SignatureHelpTriggerKind.ContentChange;\r\n        }\r\n    }\r\n    function asParameterInformation(value) {\r\n        // We leave the documentation out on purpose since it usually adds no\r\n        // value for the server.\r\n        return {\r\n            label: value.label\r\n        };\r\n    }\r\n    function asParameterInformations(values) {\r\n        return values.map(asParameterInformation);\r\n    }\r\n    function asSignatureInformation(value) {\r\n        // We leave the documentation out on purpose since it usually adds no\r\n        // value for the server.\r\n        return {\r\n            label: value.label,\r\n            parameters: asParameterInformations(value.parameters)\r\n        };\r\n    }\r\n    function asSignatureInformations(values) {\r\n        return values.map(asSignatureInformation);\r\n    }\r\n    function asSignatureHelp(value) {\r\n        if (value === undefined) {\r\n            return value;\r\n        }\r\n        return {\r\n            signatures: asSignatureInformations(value.signatures),\r\n            activeSignature: value.activeSignature,\r\n            activeParameter: value.activeParameter\r\n        };\r\n    }\r\n    function asSignatureHelpParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                isRetrigger: context.isRetrigger,\r\n                triggerCharacter: context.triggerCharacter,\r\n                triggerKind: asSignatureHelpTriggerKind(context.triggerKind),\r\n                activeSignatureHelp: asSignatureHelp(context.activeSignatureHelp)\r\n            }\r\n        };\r\n    }\r\n    function asWorkerPosition(position) {\r\n        return { line: position.line, character: position.character };\r\n    }\r\n    function asPosition(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        return { line: value.line, character: value.character };\r\n    }\r\n    function asPositions(value) {\r\n        let result = [];\r\n        for (let elem of value) {\r\n            result.push(asPosition(elem));\r\n        }\r\n        return result;\r\n    }\r\n    function isInsertReplace(value) {\r\n        const candidate = value;\r\n        return candidate && !!candidate.inserting && !!candidate.replacing;\r\n    }\r\n    function asRange(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        // The LSP has no support yet for insert replace. So this can never happen.\r\n        if (isInsertReplace(value)) {\r\n            throw new Error(`Receving unknown insert replace range.`);\r\n        }\r\n        return { start: asPosition(value.start), end: asPosition(value.end) };\r\n    }\r\n    function asLocation(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        return proto.Location.create(asUri(value.uri), asRange(value.range));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        switch (value) {\r\n            case code.DiagnosticSeverity.Error:\r\n                return proto.DiagnosticSeverity.Error;\r\n            case code.DiagnosticSeverity.Warning:\r\n                return proto.DiagnosticSeverity.Warning;\r\n            case code.DiagnosticSeverity.Information:\r\n                return proto.DiagnosticSeverity.Information;\r\n            case code.DiagnosticSeverity.Hint:\r\n                return proto.DiagnosticSeverity.Hint;\r\n        }\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case code.DiagnosticTag.Unnecessary:\r\n                return proto.DiagnosticTag.Unnecessary;\r\n            case code.DiagnosticTag.Deprecated:\r\n                return proto.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asRelatedInformation(item) {\r\n        return {\r\n            message: item.message,\r\n            location: asLocation(item.location)\r\n        };\r\n    }\r\n    function asRelatedInformations(items) {\r\n        return items.map(asRelatedInformation);\r\n    }\r\n    function asDiagnostic(item) {\r\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\r\n        if (Is.number(item.severity)) {\r\n            result.severity = asDiagnosticSeverity(item.severity);\r\n        }\r\n        if (Is.number(item.code) || Is.string(item.code)) {\r\n            result.code = item.code;\r\n        }\r\n        if (Array.isArray(item.tags)) {\r\n            result.tags = asDiagnosticTags(item.tags);\r\n        }\r\n        if (item.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformations(item.relatedInformation);\r\n        }\r\n        if (item.source) {\r\n            result.source = item.source;\r\n        }\r\n        return result;\r\n    }\r\n    function asDiagnostics(items) {\r\n        if (items === undefined || items === null) {\r\n            return items;\r\n        }\r\n        return items.map(asDiagnostic);\r\n    }\r\n    function asDocumentation(format, documentation) {\r\n        switch (format) {\r\n            case '$string':\r\n                return documentation;\r\n            case proto.MarkupKind.PlainText:\r\n                return { kind: format, value: documentation };\r\n            case proto.MarkupKind.Markdown:\r\n                return { kind: format, value: documentation.value };\r\n            default:\r\n                return `Unsupported Markup content received. Kind is: ${format}`;\r\n        }\r\n    }\r\n    function asCompletionItemTag(tag) {\r\n        switch (tag) {\r\n            case code.CompletionItemTag.Deprecated:\r\n                return proto.CompletionItemTag.Deprecated;\r\n        }\r\n        return undefined;\r\n    }\r\n    function asCompletionItemTags(tags) {\r\n        if (tags === undefined) {\r\n            return tags;\r\n        }\r\n        const result = [];\r\n        for (let tag of tags) {\r\n            const converted = asCompletionItemTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionItemKind(value, original) {\r\n        if (original !== undefined) {\r\n            return original;\r\n        }\r\n        return value + 1;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = { label: item.label };\r\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        // We only send items back we created. So this can't be something else than\r\n        // a string right now.\r\n        if (item.documentation) {\r\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\r\n                result.documentation = item.documentation;\r\n            }\r\n            else {\r\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\r\n            }\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        fillPrimaryInsertText(result, item);\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (item.commitCharacters) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        const tags = asCompletionItemTags(item.tags);\r\n        if (protocolItem) {\r\n            if (protocolItem.data !== undefined) {\r\n                result.data = protocolItem.data;\r\n            }\r\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\r\n                if (protocolItem.deprecated === true && tags !== undefined && tags.length > 0) {\r\n                    const index = tags.indexOf(code.CompletionItemTag.Deprecated);\r\n                    if (index !== -1) {\r\n                        tags.splice(index, 1);\r\n                    }\r\n                }\r\n                result.deprecated = protocolItem.deprecated;\r\n            }\r\n        }\r\n        if (tags !== undefined && tags.length > 0) {\r\n            result.tags = tags;\r\n        }\r\n        return result;\r\n    }\r\n    function fillPrimaryInsertText(target, source) {\r\n        let format = proto.InsertTextFormat.PlainText;\r\n        let text = undefined;\r\n        let range = undefined;\r\n        if (source.textEdit) {\r\n            text = source.textEdit.newText;\r\n            range = asRange(source.textEdit.range);\r\n        }\r\n        else if (source.insertText instanceof code.SnippetString) {\r\n            format = proto.InsertTextFormat.Snippet;\r\n            text = source.insertText.value;\r\n        }\r\n        else {\r\n            text = source.insertText;\r\n        }\r\n        if (source.range) {\r\n            range = asRange(source.range);\r\n        }\r\n        target.insertTextFormat = format;\r\n        if (source.fromEdit && text !== undefined && range !== undefined) {\r\n            target.textEdit = { newText: text, range: range };\r\n        }\r\n        else {\r\n            target.insertText = text;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        return { range: asRange(edit.range), newText: edit.newText };\r\n    }\r\n    function asTextEdits(edits) {\r\n        if (edits === undefined || edits === null) {\r\n            return edits;\r\n        }\r\n        return edits.map(asTextEdit);\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= code.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return (item + 1);\r\n        }\r\n        return proto.SymbolKind.Property;\r\n    }\r\n    function asSymbolTag(item) {\r\n        return item;\r\n    }\r\n    function asSymbolTags(items) {\r\n        return items.map(asSymbolTag);\r\n    }\r\n    function asReferenceParams(textDocument, position, options) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: { includeDeclaration: options.includeDeclaration }\r\n        };\r\n    }\r\n    function asCodeActionContext(context) {\r\n        if (context === undefined || context === null) {\r\n            return context;\r\n        }\r\n        let only;\r\n        if (context.only && Is.string(context.only.value)) {\r\n            only = [context.only.value];\r\n        }\r\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), only);\r\n    }\r\n    function asCommand(item) {\r\n        let result = proto.Command.create(item.title, item.command);\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        let result = proto.CodeLens.create(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item instanceof protocolCodeLens_1.default) {\r\n            if (item.data) {\r\n                result.data = item.data;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asFormattingOptions(item) {\r\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\r\n    }\r\n    function asDocumentSymbolParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asCodeLensParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asDocumentLink(item) {\r\n        let result = proto.DocumentLink.create(asRange(item.range));\r\n        if (item.target) {\r\n            result.target = asUri(item.target);\r\n        }\r\n        if (item.tooltip !== undefined) {\r\n            result.tooltip = item.tooltip;\r\n        }\r\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\r\n        if (protocolItem && protocolItem.data) {\r\n            result.data = protocolItem.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLinkParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    return {\r\n        asUri,\r\n        asTextDocumentIdentifier,\r\n        asVersionedTextDocumentIdentifier,\r\n        asOpenTextDocumentParams,\r\n        asChangeTextDocumentParams,\r\n        asCloseTextDocumentParams,\r\n        asSaveTextDocumentParams,\r\n        asWillSaveTextDocumentParams,\r\n        asTextDocumentPositionParams,\r\n        asCompletionParams,\r\n        asSignatureHelpParams,\r\n        asWorkerPosition,\r\n        asRange,\r\n        asPosition,\r\n        asPositions,\r\n        asLocation,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asDiagnostic,\r\n        asDiagnostics,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asSymbolKind,\r\n        asSymbolTag,\r\n        asSymbolTags,\r\n        asReferenceParams,\r\n        asCodeActionContext,\r\n        asCommand,\r\n        asCodeLens,\r\n        asFormattingOptions,\r\n        asDocumentSymbolParams,\r\n        asCodeLensParams,\r\n        asDocumentLink,\r\n        asDocumentLinkParams\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.colorProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideColorPresentations: (color, context, token) => {\r\n                const client = this._client;\r\n                const provideColorPresentations = (color, context, token) => {\r\n                    const requestParams = {\r\n                        color,\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\r\n                        range: client.code2ProtocolConverter.asRange(context.range)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideColorPresentations\r\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\r\n                    : provideColorPresentations(color, context, token);\r\n            },\r\n            provideDocumentColors: (document, token) => {\r\n                const client = this._client;\r\n                const provideDocumentColors = (document, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentColors\r\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\r\n                    : provideDocumentColors(document, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerColorProvider(options.documentSelector, provider), provider];\r\n    }\r\n    asColor(color) {\r\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(ci => {\r\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n    asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(cp => {\r\n                let presentation = new vscode_1.ColorPresentation(cp.label);\r\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\r\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\r\n                return presentation;\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.ColorProviderFeature = ColorProviderFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.configuration = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\r\n            let configuration = (params) => {\r\n                let result = [];\r\n                for (let item of params.items) {\r\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\r\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\r\n                }\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.configuration\r\n                ? middleware.configuration(params, token, configuration)\r\n                : configuration(params, token);\r\n        });\r\n    }\r\n    getConfiguration(resource, section) {\r\n        let result = null;\r\n        if (section) {\r\n            let index = section.lastIndexOf('.');\r\n            if (index === -1) {\r\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\r\n            }\r\n            else {\r\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\r\n                if (config) {\r\n                    result = config.get(section.substr(index + 1));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\r\n            result = {};\r\n            for (let key of Object.keys(config)) {\r\n                if (config.has(key)) {\r\n                    result[key] = config.get(key);\r\n                }\r\n            }\r\n        }\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ConfigurationFeature = ConfigurationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass DeclarationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\r\n        declarationSupport.dynamicRegistration = true;\r\n        declarationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const [id, options] = this.getRegistration(documentSelector, capabilities.declarationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDeclaration: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideDeclaration = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDeclaration\r\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\r\n                    : provideDeclaration(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDeclarationProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.DeclarationFeature = DeclarationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\r\n        capability.dynamicRegistration = true;\r\n        capability.rangeLimit = 5000;\r\n        capability.lineFoldingOnly = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.foldingRangeProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideFoldingRanges: (document, context, token) => {\r\n                const client = this._client;\r\n                const provideFoldingRanges = (document, _, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideFoldingRanges\r\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\r\n                    : provideFoldingRanges(document, context, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, provider), provider];\r\n    }\r\n    asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\r\n                    return vscode_1.FoldingRangeKind.Comment;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\r\n                    return vscode_1.FoldingRangeKind.Imports;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\r\n                    return vscode_1.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(r => {\r\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.FoldingRangeFeature = FoldingRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ImplementationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\r\n        implementationSupport.dynamicRegistration = true;\r\n        implementationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.implementationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideImplementation: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideImplementation = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideImplementation\r\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\r\n                    : provideImplementation(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerImplementationProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.ImplementationFeature = ImplementationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst fs = require(\"fs\");\r\nconst SemVer = require(\"semver\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst colorProvider_1 = require(\"./colorProvider\");\r\nconst configuration_1 = require(\"./configuration\");\r\nconst implementation_1 = require(\"./implementation\");\r\nconst typeDefinition_1 = require(\"./typeDefinition\");\r\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\r\nconst foldingRange_1 = require(\"./foldingRange\");\r\nconst declaration_1 = require(\"./declaration\");\r\nconst selectionRange_1 = require(\"./selectionRange\");\r\nconst progress_1 = require(\"./progress\");\r\nconst callHierarchy_proposed_1 = require(\"./callHierarchy.proposed\");\r\nconst semanticTokens_proposed_1 = require(\"./semanticTokens.proposed\");\r\nconst Is = require(\"./utils/is\");\r\nconst processes_1 = require(\"./utils/processes\");\r\n__export(require(\"./client\"));\r\nconst REQUIRED_VSCODE_VERSION = '^1.41.0'; // do not change format, updated by `updateVSCode` script\r\nvar Executable;\r\n(function (Executable) {\r\n    function is(value) {\r\n        return Is.string(value.command);\r\n    }\r\n    Executable.is = is;\r\n})(Executable || (Executable = {}));\r\nvar TransportKind;\r\n(function (TransportKind) {\r\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\r\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\r\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\r\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\r\n})(TransportKind = exports.TransportKind || (exports.TransportKind = {}));\r\nvar Transport;\r\n(function (Transport) {\r\n    function isSocket(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\r\n    }\r\n    Transport.isSocket = isSocket;\r\n})(Transport || (Transport = {}));\r\nvar NodeModule;\r\n(function (NodeModule) {\r\n    function is(value) {\r\n        return Is.string(value.module);\r\n    }\r\n    NodeModule.is = is;\r\n})(NodeModule || (NodeModule = {}));\r\nvar StreamInfo;\r\n(function (StreamInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.writer !== void 0 && candidate.reader !== void 0;\r\n    }\r\n    StreamInfo.is = is;\r\n})(StreamInfo || (StreamInfo = {}));\r\nvar ChildProcessInfo;\r\n(function (ChildProcessInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.process !== void 0 && typeof candidate.detached === 'boolean';\r\n    }\r\n    ChildProcessInfo.is = is;\r\n})(ChildProcessInfo || (ChildProcessInfo = {}));\r\nclass LanguageClient extends client_1.BaseLanguageClient {\r\n    constructor(arg1, arg2, arg3, arg4, arg5) {\r\n        let id;\r\n        let name;\r\n        let serverOptions;\r\n        let clientOptions;\r\n        let forceDebug;\r\n        if (Is.string(arg2)) {\r\n            id = arg1;\r\n            name = arg2;\r\n            serverOptions = arg3;\r\n            clientOptions = arg4;\r\n            forceDebug = !!arg5;\r\n        }\r\n        else {\r\n            id = arg1.toLowerCase();\r\n            name = arg1;\r\n            serverOptions = arg2;\r\n            clientOptions = arg3;\r\n            forceDebug = arg4;\r\n        }\r\n        if (forceDebug === void 0) {\r\n            forceDebug = false;\r\n        }\r\n        super(id, name, clientOptions);\r\n        this._serverOptions = serverOptions;\r\n        this._forceDebug = forceDebug;\r\n        try {\r\n            this.checkVersion();\r\n        }\r\n        catch (error) {\r\n            if (Is.string(error.message)) {\r\n                this.outputChannel.appendLine(error.message);\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n    checkVersion() {\r\n        let codeVersion = SemVer.parse(vscode_1.version);\r\n        if (!codeVersion) {\r\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\r\n        }\r\n        // Remove the insider pre-release since we stay API compatible.\r\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\r\n            codeVersion.prerelease = [];\r\n        }\r\n        if (!SemVer.satisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\r\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\r\n        }\r\n    }\r\n    stop() {\r\n        return super.stop().then(() => {\r\n            if (this._serverProcess) {\r\n                let toCheck = this._serverProcess;\r\n                this._serverProcess = undefined;\r\n                if (this._isDetached === void 0 || !this._isDetached) {\r\n                    this.checkProcessDied(toCheck);\r\n                }\r\n                this._isDetached = undefined;\r\n            }\r\n        });\r\n    }\r\n    checkProcessDied(childProcess) {\r\n        if (!childProcess) {\r\n            return;\r\n        }\r\n        setTimeout(() => {\r\n            // Test if the process is still alive. Throws an exception if not\r\n            try {\r\n                process.kill(childProcess.pid, 0);\r\n                processes_1.terminate(childProcess);\r\n            }\r\n            catch (error) {\r\n                // All is fine.\r\n            }\r\n        }, 2000);\r\n    }\r\n    handleConnectionClosed() {\r\n        this._serverProcess = undefined;\r\n        super.handleConnectionClosed();\r\n    }\r\n    createMessageTransports(encoding) {\r\n        function getEnvironment(env, fork) {\r\n            if (!env && !fork) {\r\n                return undefined;\r\n            }\r\n            let result = Object.create(null);\r\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\r\n            if (fork) {\r\n                result['ELECTRON_RUN_AS_NODE'] = '1';\r\n                result['ELECTRON_NO_ASAR'] = '1';\r\n            }\r\n            if (env) {\r\n                Object.keys(env).forEach(key => result[key] = env[key]);\r\n            }\r\n            return result;\r\n        }\r\n        const debugStartWith = ['--debug=', '--debug-brk=', '--inspect=', '--inspect-brk='];\r\n        const debugEquals = ['--debug', '--debug-brk', '--inspect', '--inspect-brk'];\r\n        function startedInDebugMode() {\r\n            let args = process.execArgv;\r\n            if (args) {\r\n                return args.some((arg) => {\r\n                    return debugStartWith.some(value => arg.startsWith(value)) ||\r\n                        debugEquals.some(value => arg === value);\r\n                });\r\n            }\r\n            return false;\r\n        }\r\n        function assertStdio(process) {\r\n            if (process.stdin === null || process.stdout === null || process.stderr === null) {\r\n                throw new Error('Process created without stdio streams');\r\n            }\r\n        }\r\n        let server = this._serverOptions;\r\n        // We got a function.\r\n        if (Is.func(server)) {\r\n            return server().then((result) => {\r\n                if (client_1.MessageTransports.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return result;\r\n                }\r\n                else if (StreamInfo.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(result.reader), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(result.writer) };\r\n                }\r\n                else {\r\n                    let cp;\r\n                    if (ChildProcessInfo.is(result)) {\r\n                        cp = result.process;\r\n                        this._isDetached = result.detached;\r\n                    }\r\n                    else {\r\n                        cp = result;\r\n                        this._isDetached = false;\r\n                    }\r\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(cp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(cp.stdin) };\r\n                }\r\n            });\r\n        }\r\n        let json;\r\n        let runDebug = server;\r\n        if (runDebug.run || runDebug.debug) {\r\n            if (this._forceDebug || startedInDebugMode()) {\r\n                json = runDebug.debug;\r\n            }\r\n            else {\r\n                json = runDebug.run;\r\n            }\r\n        }\r\n        else {\r\n            json = server;\r\n        }\r\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\r\n            if (NodeModule.is(json) && json.module) {\r\n                let node = json;\r\n                let transport = node.transport || TransportKind.stdio;\r\n                if (node.runtime) {\r\n                    let args = [];\r\n                    let options = node.options || Object.create(null);\r\n                    if (options.execArgv) {\r\n                        options.execArgv.forEach(element => args.push(element));\r\n                    }\r\n                    args.push(node.module);\r\n                    if (node.args) {\r\n                        node.args.forEach(element => args.push(element));\r\n                    }\r\n                    let execOptions = Object.create(null);\r\n                    execOptions.cwd = serverWorkingDir;\r\n                    execOptions.env = getEnvironment(options.env, false);\r\n                    let pipeName = undefined;\r\n                    if (transport === TransportKind.ipc) {\r\n                        // exec options not correctly typed in lib\r\n                        execOptions.stdio = [null, null, null, 'ipc'];\r\n                        args.push('--node-ipc');\r\n                    }\r\n                    else if (transport === TransportKind.stdio) {\r\n                        args.push('--stdio');\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                        args.push(`--pipe=${pipeName}`);\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        args.push(`--socket=${transport.port}`);\r\n                    }\r\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                        let serverProcess = cp.spawn(node.runtime, args, execOptions);\r\n                        if (!serverProcess || !serverProcess.pid) {\r\n                            return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                        }\r\n                        this._serverProcess = serverProcess;\r\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                        if (transport === TransportKind.ipc) {\r\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(serverProcess) });\r\n                        }\r\n                        else {\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n                        }\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        return vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        return vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    let pipeName = undefined;\r\n                    return new Promise((resolve, _reject) => {\r\n                        let args = node.args && node.args.slice() || [];\r\n                        if (transport === TransportKind.ipc) {\r\n                            args.push('--node-ipc');\r\n                        }\r\n                        else if (transport === TransportKind.stdio) {\r\n                            args.push('--stdio');\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                            args.push(`--pipe=${pipeName}`);\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            args.push(`--socket=${transport.port}`);\r\n                        }\r\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                        let options = node.options || Object.create(null);\r\n                        options.env = getEnvironment(options.env, true);\r\n                        options.execArgv = options.execArgv || [];\r\n                        options.cwd = serverWorkingDir;\r\n                        options.silent = true;\r\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                            let sp = cp.fork(node.module, args || [], options);\r\n                            assertStdio(sp);\r\n                            this._serverProcess = sp;\r\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            if (transport === TransportKind.ipc) {\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(this._serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(this._serverProcess) });\r\n                            }\r\n                            else {\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(sp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(sp.stdin) });\r\n                            }\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                assertStdio(sp);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                assertStdio(sp);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if (Executable.is(json) && json.command) {\r\n                let command = json;\r\n                let args = command.args || [];\r\n                let options = Object.assign({}, command.options);\r\n                options.cwd = options.cwd || serverWorkingDir;\r\n                let serverProcess = cp.spawn(command.command, args, options);\r\n                if (!serverProcess || !serverProcess.pid) {\r\n                    return Promise.reject(`Launching server using command ${command.command} failed.`);\r\n                }\r\n                serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                this._serverProcess = serverProcess;\r\n                this._isDetached = !!options.detached;\r\n                return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n            }\r\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\r\n        });\r\n    }\r\n    registerProposedFeatures() {\r\n        this.registerFeatures(ProposedFeatures.createAll(this));\r\n    }\r\n    registerBuiltinFeatures() {\r\n        super.registerBuiltinFeatures();\r\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\r\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\r\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\r\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\r\n        this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));\r\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\r\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\r\n        this.registerFeature(new selectionRange_1.SelectionRangeFeature(this));\r\n        this.registerFeature(new progress_1.ProgressFeature(this));\r\n    }\r\n    _mainGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    _getServerWorkingDir(options) {\r\n        let cwd = options && options.cwd;\r\n        if (!cwd) {\r\n            cwd = this.clientOptions.workspaceFolder\r\n                ? this.clientOptions.workspaceFolder.uri.fsPath\r\n                : this._mainGetRootPath();\r\n        }\r\n        if (cwd) {\r\n            // make sure the folder exists otherwise creating the process will fail\r\n            return new Promise(s => {\r\n                fs.lstat(cwd, (err, stats) => {\r\n                    s(!err && stats.isDirectory() ? cwd : undefined);\r\n                });\r\n            });\r\n        }\r\n        return Promise.resolve(undefined);\r\n    }\r\n}\r\nexports.LanguageClient = LanguageClient;\r\nclass SettingMonitor {\r\n    constructor(_client, _setting) {\r\n        this._client = _client;\r\n        this._setting = _setting;\r\n        this._listeners = [];\r\n    }\r\n    start() {\r\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\r\n        this.onDidChangeConfiguration();\r\n        return new vscode_1.Disposable(() => {\r\n            if (this._client.needsStop()) {\r\n                this._client.stop();\r\n            }\r\n        });\r\n    }\r\n    onDidChangeConfiguration() {\r\n        let index = this._setting.indexOf('.');\r\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\r\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\r\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\r\n        if (enabled && this._client.needsStart()) {\r\n            this._client.start();\r\n        }\r\n        else if (!enabled && this._client.needsStop()) {\r\n            this._client.stop();\r\n        }\r\n    }\r\n}\r\nexports.SettingMonitor = SettingMonitor;\r\n// Exporting proposed protocol.\r\nvar ProposedFeatures;\r\n(function (ProposedFeatures) {\r\n    function createAll(client) {\r\n        let result = [\r\n            new callHierarchy_proposed_1.CallHierarchyFeature(client),\r\n            new semanticTokens_proposed_1.SemanticTokensFeature(client)\r\n        ];\r\n        return result;\r\n    }\r\n    ProposedFeatures.createAll = createAll;\r\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst progressPart_1 = require(\"./progressPart\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = Object.create(null);\r\n    }\r\n    return target[key];\r\n}\r\nclass ProgressFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(capabilities, 'window').workDoneProgress = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        let createHandler = (params) => {\r\n            new progressPart_1.ProgressPart(this._client, params.token);\r\n        };\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, createHandler);\r\n    }\r\n}\r\nexports.ProgressFeature = ProgressFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nclass ProgressPart {\r\n    constructor(_client, _token) {\r\n        this._client = _client;\r\n        this._token = _token;\r\n        this._reported = 0;\r\n        this._disposable = this._client.onProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, (value) => {\r\n            switch (value.kind) {\r\n                case 'begin':\r\n                    this.begin(value);\r\n                    break;\r\n                case 'report':\r\n                    this.report(value);\r\n                    break;\r\n                case 'end':\r\n                    this.done();\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n    begin(params) {\r\n        let location = params.cancellable ? vscode_1.ProgressLocation.Notification : vscode_1.ProgressLocation.Window;\r\n        vscode_1.window.withProgress({ location, cancellable: params.cancellable, title: params.title }, async (progress, cancellationToken) => {\r\n            this._progress = progress;\r\n            this._infinite = params.percentage === undefined;\r\n            this._cancellationToken = cancellationToken;\r\n            this._cancellationToken.onCancellationRequested(() => {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, { token: this._token });\r\n            });\r\n            this.report(params);\r\n            return new Promise((resolve, reject) => {\r\n                this._resolve = resolve;\r\n                this._reject = reject;\r\n            });\r\n        });\r\n    }\r\n    report(params) {\r\n        if (this._infinite && Is.string(params.message)) {\r\n            this._progress.report({ message: params.message });\r\n        }\r\n        else if (Is.number(params.percentage)) {\r\n            let percentage = Math.max(0, Math.min(params.percentage, 100));\r\n            let delta = Math.max(0, percentage - this._reported);\r\n            this._progress.report({ message: params.message, increment: delta });\r\n            this._reported += delta;\r\n        }\r\n    }\r\n    cancel() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._reject) {\r\n            this._reject();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n    done() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._resolve) {\r\n            this._resolve();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n}\r\nexports.ProgressPart = ProgressPart;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCodeLens extends code.CodeLens {\r\n    constructor(range) {\r\n        super(range);\r\n    }\r\n}\r\nexports.default = ProtocolCodeLens;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCompletionItem extends code.CompletionItem {\r\n    constructor(label) {\r\n        super(label);\r\n    }\r\n}\r\nexports.default = ProtocolCompletionItem;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst ls = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nvar CodeBlock;\r\n(function (CodeBlock) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\r\n    }\r\n    CodeBlock.is = is;\r\n})(CodeBlock || (CodeBlock = {}));\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => code.Uri.parse(value);\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asDiagnostics(diagnostics) {\r\n        return diagnostics.map(asDiagnostic);\r\n    }\r\n    function asDiagnostic(diagnostic) {\r\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\r\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\r\n            result.code = diagnostic.code;\r\n        }\r\n        if (diagnostic.source) {\r\n            result.source = diagnostic.source;\r\n        }\r\n        if (diagnostic.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\r\n        }\r\n        if (Array.isArray(diagnostic.tags)) {\r\n            result.tags = asDiagnosticTags(diagnostic.tags);\r\n        }\r\n        return result;\r\n    }\r\n    function asRelatedInformation(relatedInformation) {\r\n        return relatedInformation.map(asDiagnosticRelatedInformation);\r\n    }\r\n    function asDiagnosticRelatedInformation(information) {\r\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case ls.DiagnosticTag.Unnecessary:\r\n                return code.DiagnosticTag.Unnecessary;\r\n            case ls.DiagnosticTag.Deprecated:\r\n                return code.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asPosition(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Position(value.line, value.character);\r\n    }\r\n    function asRange(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Range(asPosition(value.start), asPosition(value.end));\r\n    }\r\n    function asRanges(value) {\r\n        return value.map(value => asRange(value));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        if (value === undefined || value === null) {\r\n            return code.DiagnosticSeverity.Error;\r\n        }\r\n        switch (value) {\r\n            case ls.DiagnosticSeverity.Error:\r\n                return code.DiagnosticSeverity.Error;\r\n            case ls.DiagnosticSeverity.Warning:\r\n                return code.DiagnosticSeverity.Warning;\r\n            case ls.DiagnosticSeverity.Information:\r\n                return code.DiagnosticSeverity.Information;\r\n            case ls.DiagnosticSeverity.Hint:\r\n                return code.DiagnosticSeverity.Hint;\r\n        }\r\n        return code.DiagnosticSeverity.Error;\r\n    }\r\n    function asHoverContent(value) {\r\n        if (Is.string(value)) {\r\n            return new code.MarkdownString(value);\r\n        }\r\n        else if (CodeBlock.is(value)) {\r\n            let result = new code.MarkdownString();\r\n            return result.appendCodeblock(value.value, value.language);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            let result = [];\r\n            for (let element of value) {\r\n                let item = new code.MarkdownString();\r\n                if (CodeBlock.is(element)) {\r\n                    item.appendCodeblock(element.value, element.language);\r\n                }\r\n                else {\r\n                    item.appendMarkdown(element);\r\n                }\r\n                result.push(item);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            let result;\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(value.value);\r\n                    return result;\r\n                default:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\r\n                    return result;\r\n            }\r\n        }\r\n    }\r\n    function asDocumentation(value) {\r\n        if (Is.string(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    return value.value;\r\n                default:\r\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\r\n            }\r\n        }\r\n    }\r\n    function asHover(hover) {\r\n        if (!hover) {\r\n            return undefined;\r\n        }\r\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\r\n    }\r\n    function asCompletionResult(result) {\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        if (Array.isArray(result)) {\r\n            let items = result;\r\n            return items.map(asCompletionItem);\r\n        }\r\n        let list = result;\r\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\r\n    }\r\n    function asCompletionItemKind(value) {\r\n        // Protocol item kind is 1 based, codes item kind is zero based.\r\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\r\n            return [value - 1, undefined];\r\n        }\r\n        return [code.CompletionItemKind.Text, value];\r\n    }\r\n    function asCompletionItemTag(tag) {\r\n        switch (tag) {\r\n            case ls.CompletionItemTag.Deprecated:\r\n                return code.CompletionItemTag.Deprecated;\r\n        }\r\n        return undefined;\r\n    }\r\n    function asCompletionItemTags(tags) {\r\n        if (tags === undefined || tags === null) {\r\n            return [];\r\n        }\r\n        const result = [];\r\n        for (let tag of tags) {\r\n            const converted = asCompletionItemTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let tags = asCompletionItemTags(item.tags);\r\n        let result = new protocolCompletionItem_1.default(item.label);\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        let insertText = asCompletionInsertText(item);\r\n        if (insertText) {\r\n            result.insertText = insertText.text;\r\n            result.range = insertText.range;\r\n            result.fromEdit = insertText.fromEdit;\r\n        }\r\n        if (Is.number(item.kind)) {\r\n            let [itemKind, original] = asCompletionItemKind(item.kind);\r\n            result.kind = itemKind;\r\n            if (original) {\r\n                result.originalItemKind = original;\r\n            }\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (Is.stringArray(item.commitCharacters)) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.deprecated === true || item.deprecated === false) {\r\n            result.deprecated = item.deprecated;\r\n            if (item.deprecated === true) {\r\n                tags.push(code.CompletionItemTag.Deprecated);\r\n            }\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (item.data !== undefined) {\r\n            result.data = item.data;\r\n        }\r\n        if (tags.length > 0) {\r\n            result.tags = tags;\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionInsertText(item) {\r\n        if (item.textEdit) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n            else {\r\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n        }\r\n        else if (item.insertText) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\r\n            }\r\n            else {\r\n                return { text: item.insertText, fromEdit: false };\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        if (!edit) {\r\n            return undefined;\r\n        }\r\n        return new code.TextEdit(asRange(edit.range), edit.newText);\r\n    }\r\n    function asTextEdits(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asTextEdit);\r\n    }\r\n    function asSignatureHelp(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.SignatureHelp();\r\n        if (Is.number(item.activeSignature)) {\r\n            result.activeSignature = item.activeSignature;\r\n        }\r\n        else {\r\n            // activeSignature was optional in the past\r\n            result.activeSignature = 0;\r\n        }\r\n        if (Is.number(item.activeParameter)) {\r\n            result.activeParameter = item.activeParameter;\r\n        }\r\n        else {\r\n            // activeParameter was optional in the past\r\n            result.activeParameter = 0;\r\n        }\r\n        if (item.signatures) {\r\n            result.signatures = asSignatureInformations(item.signatures);\r\n        }\r\n        return result;\r\n    }\r\n    function asSignatureInformations(items) {\r\n        return items.map(asSignatureInformation);\r\n    }\r\n    function asSignatureInformation(item) {\r\n        let result = new code.SignatureInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        if (item.parameters) {\r\n            result.parameters = asParameterInformations(item.parameters);\r\n        }\r\n        return result;\r\n    }\r\n    function asParameterInformations(item) {\r\n        return item.map(asParameterInformation);\r\n    }\r\n    function asParameterInformation(item) {\r\n        let result = new code.ParameterInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        return result;\r\n    }\r\n    function asLocation(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\r\n    }\r\n    function asDeclarationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asDefinitionResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asLocationLink(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = {\r\n            targetUri: _uriConverter(item.targetUri),\r\n            targetRange: asRange(item.targetSelectionRange),\r\n            originSelectionRange: asRange(item.originSelectionRange),\r\n            targetSelectionRange: asRange(item.targetSelectionRange)\r\n        };\r\n        if (!result.targetSelectionRange) {\r\n            throw new Error(`targetSelectionRange must not be undefined or null`);\r\n        }\r\n        return result;\r\n    }\r\n    function asLocationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        if (Is.array(item)) {\r\n            if (item.length === 0) {\r\n                return [];\r\n            }\r\n            else if (ls.LocationLink.is(item[0])) {\r\n                let links = item;\r\n                return links.map((link) => asLocationLink(link));\r\n            }\r\n            else {\r\n                let locations = item;\r\n                return locations.map((location) => asLocation(location));\r\n            }\r\n        }\r\n        else if (ls.LocationLink.is(item)) {\r\n            return [asLocationLink(item)];\r\n        }\r\n        else {\r\n            return asLocation(item);\r\n        }\r\n    }\r\n    function asReferences(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(location => asLocation(location));\r\n    }\r\n    function asDocumentHighlights(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentHighlight);\r\n    }\r\n    function asDocumentHighlight(item) {\r\n        let result = new code.DocumentHighlight(asRange(item.range));\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asDocumentHighlightKind(item.kind);\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentHighlightKind(item) {\r\n        switch (item) {\r\n            case ls.DocumentHighlightKind.Text:\r\n                return code.DocumentHighlightKind.Text;\r\n            case ls.DocumentHighlightKind.Read:\r\n                return code.DocumentHighlightKind.Read;\r\n            case ls.DocumentHighlightKind.Write:\r\n                return code.DocumentHighlightKind.Write;\r\n        }\r\n        return code.DocumentHighlightKind.Text;\r\n    }\r\n    function asSymbolInformations(values, uri) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(information => asSymbolInformation(information, uri));\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= ls.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return item - 1;\r\n        }\r\n        return code.SymbolKind.Property;\r\n    }\r\n    function asSymbolTag(value) {\r\n        return value;\r\n    }\r\n    function asSymbolTags(items) {\r\n        if (items === undefined || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(asSymbolTag);\r\n    }\r\n    function asSymbolInformation(item, uri) {\r\n        // Symbol kind is one based in the protocol and zero based in code.\r\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\r\n        if (item.containerName) {\r\n            result.containerName = item.containerName;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentSymbols(values) {\r\n        if (values === undefined || values === null) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentSymbol);\r\n    }\r\n    function asDocumentSymbol(value) {\r\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\r\n        if (value.children !== undefined && value.children.length > 0) {\r\n            let children = [];\r\n            for (let child of value.children) {\r\n                children.push(asDocumentSymbol(child));\r\n            }\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommand(item) {\r\n        let result = { title: item.title, command: item.command };\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommands(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asCommand);\r\n    }\r\n    const kindMapping = new Map();\r\n    kindMapping.set(ls.CodeActionKind.Empty, code.CodeActionKind.Empty);\r\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\r\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\r\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\r\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\r\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\r\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\r\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\r\n    function asCodeActionKind(item) {\r\n        if (item === undefined || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = kindMapping.get(item);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        let parts = item.split('.');\r\n        result = code.CodeActionKind.Empty;\r\n        for (let part of parts) {\r\n            result = result.append(part);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeActionKinds(items) {\r\n        if (items === undefined || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(kind => asCodeActionKind(kind));\r\n    }\r\n    function asCodeAction(item) {\r\n        if (item === undefined || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new code.CodeAction(item.title);\r\n        if (item.kind !== undefined) {\r\n            result.kind = asCodeActionKind(item.kind);\r\n        }\r\n        if (item.diagnostics) {\r\n            result.diagnostics = asDiagnostics(item.diagnostics);\r\n        }\r\n        if (item.edit) {\r\n            result.edit = asWorkspaceEdit(item.edit);\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.isPreferred !== undefined) {\r\n            result.isPreferred = item.isPreferred;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new protocolCodeLens_1.default(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.data !== undefined && item.data !== null) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLenses(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map((codeLens) => asCodeLens(codeLens));\r\n    }\r\n    function asWorkspaceEdit(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.WorkspaceEdit();\r\n        if (item.documentChanges) {\r\n            item.documentChanges.forEach(change => {\r\n                if (ls.CreateFile.is(change)) {\r\n                    result.createFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.RenameFile.is(change)) {\r\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\r\n                }\r\n                else if (ls.DeleteFile.is(change)) {\r\n                    result.deleteFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.TextDocumentEdit.is(change)) {\r\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\r\n                }\r\n                else {\r\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\r\n                }\r\n            });\r\n        }\r\n        else if (item.changes) {\r\n            Object.keys(item.changes).forEach(key => {\r\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLink(item) {\r\n        let range = asRange(item.range);\r\n        let target = item.target ? asUri(item.target) : undefined;\r\n        // target must be optional in DocumentLink\r\n        let link = new protocolDocumentLink_1.default(range, target);\r\n        if (item.tooltip !== undefined) {\r\n            link.tooltip = item.tooltip;\r\n        }\r\n        if (item.data !== undefined && item.data !== null) {\r\n            link.data = item.data;\r\n        }\r\n        return link;\r\n    }\r\n    function asDocumentLinks(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asDocumentLink);\r\n    }\r\n    function asColor(color) {\r\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    function asColorInformation(ci) {\r\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\r\n    }\r\n    function asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(asColorInformation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asColorPresentation(cp) {\r\n        let presentation = new code.ColorPresentation(cp.label);\r\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\r\n        if (cp.textEdit) {\r\n            presentation.textEdit = asTextEdit(cp.textEdit);\r\n        }\r\n        return presentation;\r\n    }\r\n    function asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(asColorPresentation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case ls.FoldingRangeKind.Comment:\r\n                    return code.FoldingRangeKind.Comment;\r\n                case ls.FoldingRangeKind.Imports:\r\n                    return code.FoldingRangeKind.Imports;\r\n                case ls.FoldingRangeKind.Region:\r\n                    return code.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRange(r) {\r\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\r\n    }\r\n    function asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(asFoldingRange);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asSelectionRange(selectionRange) {\r\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\r\n    }\r\n    function asSelectionRanges(selectionRanges) {\r\n        if (!Array.isArray(selectionRanges)) {\r\n            return [];\r\n        }\r\n        let result = [];\r\n        for (let range of selectionRanges) {\r\n            result.push(asSelectionRange(range));\r\n        }\r\n        return result;\r\n    }\r\n    return {\r\n        asUri,\r\n        asDiagnostics,\r\n        asDiagnostic,\r\n        asRange,\r\n        asRanges,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asHover,\r\n        asCompletionResult,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asTextEdits,\r\n        asSignatureHelp,\r\n        asSignatureInformations,\r\n        asSignatureInformation,\r\n        asParameterInformations,\r\n        asParameterInformation,\r\n        asDeclarationResult,\r\n        asDefinitionResult,\r\n        asLocation,\r\n        asReferences,\r\n        asDocumentHighlights,\r\n        asDocumentHighlight,\r\n        asDocumentHighlightKind,\r\n        asSymbolKind,\r\n        asSymbolTag,\r\n        asSymbolTags,\r\n        asSymbolInformations,\r\n        asSymbolInformation,\r\n        asDocumentSymbols,\r\n        asDocumentSymbol,\r\n        asCommand,\r\n        asCommands,\r\n        asCodeAction,\r\n        asCodeActionKind,\r\n        asCodeActionKinds,\r\n        asCodeLens,\r\n        asCodeLenses,\r\n        asWorkspaceEdit,\r\n        asDocumentLink,\r\n        asDocumentLinks,\r\n        asFoldingRangeKind,\r\n        asFoldingRange,\r\n        asFoldingRanges,\r\n        asColor,\r\n        asColorInformation,\r\n        asColorInformations,\r\n        asColorPresentation,\r\n        asColorPresentations,\r\n        asSelectionRange,\r\n        asSelectionRanges\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolDocumentLink extends code.DocumentLink {\r\n    constructor(range, target) {\r\n        super(range, target);\r\n    }\r\n}\r\nexports.default = ProtocolDocumentLink;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = Object.create(null);\r\n    }\r\n    return target[key];\r\n}\r\nclass SelectionRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SelectionRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'selectionRange');\r\n        capability.dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.selectionRangeProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideSelectionRanges: (document, positions, token) => {\r\n                const client = this._client;\r\n                const provideSelectionRanges = (document, positions, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        positions: client.code2ProtocolConverter.asPositions(positions)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, requestParams, token).then((ranges) => client.protocol2CodeConverter.asSelectionRanges(ranges), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideSelectionRanges\r\n                    ? middleware.provideSelectionRanges(document, positions, token, provideSelectionRanges)\r\n                    : provideSelectionRanges(document, positions, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerSelectionRangeProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.SelectionRangeFeature = SelectionRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode = require(\"vscode\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar protocol2code;\r\n(function (protocol2code) {\r\n    function asSemanticTokens(value) {\r\n        if (value === undefined || value === null) {\r\n            return undefined;\r\n        }\r\n        return new vscode.SemanticTokens(new Uint32Array(value.data), value.resultId);\r\n    }\r\n    protocol2code.asSemanticTokens = asSemanticTokens;\r\n    function asSemanticTokensEdit(value) {\r\n        return new vscode.SemanticTokensEdit(value.start, value.deleteCount, value.data !== undefined ? new Uint32Array(value.data) : undefined);\r\n    }\r\n    protocol2code.asSemanticTokensEdit = asSemanticTokensEdit;\r\n    function asSemanticTokensEdits(value) {\r\n        if (value === undefined || value === null) {\r\n            return undefined;\r\n        }\r\n        return new vscode.SemanticTokensEdits(value.edits.map(asSemanticTokensEdit), value.resultId);\r\n    }\r\n    protocol2code.asSemanticTokensEdits = asSemanticTokensEdits;\r\n    function asLegend(value) {\r\n        return value;\r\n    }\r\n    protocol2code.asLegend = asLegend;\r\n})(protocol2code || (protocol2code = {}));\r\nclass SemanticTokensFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type);\r\n    }\r\n    fillClientCapabilities(cap) {\r\n        const capabilites = cap;\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'semanticTokens');\r\n        capability.dynamicRegistration = true;\r\n        capability.tokenTypes = [\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.comment,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.keyword,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.number,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.regexp,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.operator,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.namespace,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.type,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.struct,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.class,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.interface,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.enum,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.typeParameter,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.function,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.member,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.macro,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.variable,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.parameter,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.property,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.label\r\n        ];\r\n        capability.tokenModifiers = [\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.declaration,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.documentation,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.static,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.abstract,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.deprecated,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.async,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.readonly\r\n        ];\r\n    }\r\n    initialize(cap, documentSelector) {\r\n        const capabilities = cap;\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.semanticTokensProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const hasEditProvider = options.documentProvider !== undefined && typeof options.documentProvider !== 'boolean' && options.documentProvider.edits === true;\r\n        const documentProvider = {\r\n            provideDocumentSemanticTokens: (document, token) => {\r\n                const client = this._client;\r\n                const middleware = client.clientOptions.middleware;\r\n                const provideDocumentSemanticTokens = (document, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type, params, token).then((result) => {\r\n                        return protocol2code.asSemanticTokens(result);\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type, error);\r\n                        return undefined;\r\n                    });\r\n                };\r\n                return middleware.provideDocumentSemanticTokens\r\n                    ? middleware.provideDocumentSemanticTokens(document, token, provideDocumentSemanticTokens)\r\n                    : provideDocumentSemanticTokens(document, token);\r\n            },\r\n            provideDocumentSemanticTokensEdits: hasEditProvider\r\n                ? (document, previousResultId, token) => {\r\n                    const client = this._client;\r\n                    const middleware = client.clientOptions.middleware;\r\n                    const provideDocumentSemanticTokensEdits = (document, previousResultId, token) => {\r\n                        const params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            previousResultId\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type, params, token).then((result) => {\r\n                            if (vscode_languageserver_protocol_1.Proposed.SemanticTokens.is(result)) {\r\n                                return protocol2code.asSemanticTokens(result);\r\n                            }\r\n                            else {\r\n                                return protocol2code.asSemanticTokensEdits(result);\r\n                            }\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type, error);\r\n                            return undefined;\r\n                        });\r\n                    };\r\n                    return middleware.provideDocumentSemanticTokensEdits\r\n                        ? middleware.provideDocumentSemanticTokensEdits(document, previousResultId, token, provideDocumentSemanticTokensEdits)\r\n                        : provideDocumentSemanticTokensEdits(document, previousResultId, token);\r\n                }\r\n                : undefined\r\n        };\r\n        const hasRangeProvider = options.rangeProvider === true;\r\n        const rangeProvider = hasRangeProvider\r\n            ? {\r\n                provideDocumentRangeSemanticTokens: (document, range, token) => {\r\n                    const client = this._client;\r\n                    const middleware = client.clientOptions.middleware;\r\n                    const provideDocumentRangeSemanticTokens = (document, range, token) => {\r\n                        const params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            range: client.code2ProtocolConverter.asRange(range)\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type, params, token).then((result) => {\r\n                            return protocol2code.asSemanticTokens(result);\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type, error);\r\n                            return undefined;\r\n                        });\r\n                    };\r\n                    return middleware.provideDocumentRangeSemanticTokens\r\n                        ? middleware.provideDocumentRangeSemanticTokens(document, range, token, provideDocumentRangeSemanticTokens)\r\n                        : provideDocumentRangeSemanticTokens(document, range, token);\r\n                }\r\n            }\r\n            : undefined;\r\n        const disposables = [];\r\n        const legend = protocol2code.asLegend(options.legend);\r\n        disposables.push(vscode.languages.registerDocumentSemanticTokensProvider(options.documentSelector, documentProvider, legend));\r\n        if (rangeProvider !== undefined) {\r\n            disposables.push(vscode.languages.registerDocumentRangeSemanticTokensProvider(options.documentSelector, rangeProvider, legend));\r\n        }\r\n        return [new vscode.Disposable(() => disposables.forEach(item => item.dispose())), { document: documentProvider, range: rangeProvider }];\r\n    }\r\n}\r\nexports.SemanticTokensFeature = SemanticTokensFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\r\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\r\n        typeDefinitionSupport.dynamicRegistration = true;\r\n        typeDefinitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.typeDefinitionProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideTypeDefinition: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideTypeDefinition = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideTypeDefinition\r\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\r\n                    : provideTypeDefinition(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Delayer {\r\n    constructor(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = undefined;\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n    }\r\n    trigger(task, delay = this.defaultDelay) {\r\n        this.task = task;\r\n        if (delay >= 0) {\r\n            this.cancelTimeout();\r\n        }\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise((resolve) => {\r\n                this.onSuccess = resolve;\r\n            }).then(() => {\r\n                this.completionPromise = undefined;\r\n                this.onSuccess = undefined;\r\n                var result = this.task();\r\n                this.task = undefined;\r\n                return result;\r\n            });\r\n        }\r\n        if (delay >= 0 || this.timeout === void 0) {\r\n            this.timeout = setTimeout(() => {\r\n                this.timeout = undefined;\r\n                this.onSuccess(undefined);\r\n            }, delay >= 0 ? delay : this.defaultDelay);\r\n        }\r\n        return this.completionPromise;\r\n    }\r\n    forceDelivery() {\r\n        if (!this.completionPromise) {\r\n            return undefined;\r\n        }\r\n        this.cancelTimeout();\r\n        let result = this.task();\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n        return result;\r\n    }\r\n    isTriggered() {\r\n        return this.timeout !== void 0;\r\n    }\r\n    cancel() {\r\n        this.cancelTimeout();\r\n        this.completionPromise = undefined;\r\n    }\r\n    cancelTimeout() {\r\n        if (this.timeout !== void 0) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Delayer = Delayer;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\nfunction asPromise(value) {\r\n    if (value instanceof Promise) {\r\n        return value;\r\n    }\r\n    else if (thenable(value)) {\r\n        return new Promise((resolve, reject) => {\r\n            value.then((resolved) => resolve(resolved), (error) => reject(error));\r\n        });\r\n    }\r\n    else {\r\n        return Promise.resolve(value);\r\n    }\r\n}\r\nexports.asPromise = asPromise;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst path_1 = require(\"path\");\r\nconst isWindows = (process.platform === 'win32');\r\nconst isMacintosh = (process.platform === 'darwin');\r\nconst isLinux = (process.platform === 'linux');\r\nfunction terminate(process, cwd) {\r\n    if (isWindows) {\r\n        try {\r\n            // This we run in Atom execFileSync is available.\r\n            // Ignore stderr since this is otherwise piped to parent.stderr\r\n            // which might be already closed.\r\n            let options = {\r\n                stdio: ['pipe', 'pipe', 'ignore']\r\n            };\r\n            if (cwd) {\r\n                options.cwd = cwd;\r\n            }\r\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else if (isLinux || isMacintosh) {\r\n        try {\r\n            var cmd = path_1.join(__dirname, 'terminateProcess.sh');\r\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\r\n            return result.error ? false : true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else {\r\n        process.kill('SIGKILL');\r\n        return true;\r\n    }\r\n}\r\nexports.terminate = terminate;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction access(target, key) {\r\n    if (target === void 0) {\r\n        return undefined;\r\n    }\r\n    return target[key];\r\n}\r\nfunction arrayDiff(left, right) {\r\n    return left.filter(element => right.indexOf(element) < 0);\r\n}\r\nexports.arrayDiff = arrayDiff;\r\nclass WorkspaceFoldersFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\r\n    }\r\n    fillInitializeParams(params) {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        this.initializeWithFolders(folders);\r\n        if (folders === void 0) {\r\n            params.workspaceFolders = null;\r\n        }\r\n        else {\r\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\r\n        }\r\n    }\r\n    initializeWithFolders(currentWorkspaceFolders) {\r\n        this._initialFolders = currentWorkspaceFolders;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.workspaceFolders = true;\r\n    }\r\n    initialize(capabilities) {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\r\n            let workspaceFolders = () => {\r\n                let folders = vscode_1.workspace.workspaceFolders;\r\n                if (folders === void 0) {\r\n                    return null;\r\n                }\r\n                let result = folders.map((folder) => {\r\n                    return this.asProtocol(folder);\r\n                });\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.workspaceFolders\r\n                ? middleware.workspaceFolders(token, workspaceFolders)\r\n                : workspaceFolders(token);\r\n        });\r\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\r\n        let id;\r\n        if (typeof value === 'string') {\r\n            id = value;\r\n        }\r\n        else if (value === true) {\r\n            id = UUID.generateUuid();\r\n        }\r\n        if (id) {\r\n            this.register(this.messages, {\r\n                id: id,\r\n                registerOptions: undefined\r\n            });\r\n        }\r\n    }\r\n    sendInitialEvent(currentWorkspaceFolders) {\r\n        if (this._initialFolders && currentWorkspaceFolders) {\r\n            const removed = arrayDiff(this._initialFolders, currentWorkspaceFolders);\r\n            const added = arrayDiff(currentWorkspaceFolders, this._initialFolders);\r\n            if (added.length > 0 || removed.length > 0) {\r\n                this.doSendEvent(added, removed);\r\n            }\r\n        }\r\n        else if (this._initialFolders) {\r\n            this.doSendEvent([], this._initialFolders);\r\n        }\r\n        else if (currentWorkspaceFolders) {\r\n            this.doSendEvent(currentWorkspaceFolders, []);\r\n        }\r\n    }\r\n    doSendEvent(addedFolders, removedFolders) {\r\n        let params = {\r\n            event: {\r\n                added: addedFolders.map(folder => this.asProtocol(folder)),\r\n                removed: removedFolders.map(folder => this.asProtocol(folder))\r\n            }\r\n        };\r\n        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\r\n    }\r\n    register(_message, data) {\r\n        let id = data.id;\r\n        let client = this._client;\r\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\r\n            let didChangeWorkspaceFolders = (event) => {\r\n                this.doSendEvent(event.added, event.removed);\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            middleware && middleware.didChangeWorkspaceFolders\r\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\r\n                : didChangeWorkspaceFolders(event);\r\n        });\r\n        this._listeners.set(id, disposable);\r\n        this.sendInitialEvent(vscode_1.workspace.workspaceFolders);\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable === void 0) {\r\n            return;\r\n        }\r\n        this._listeners.delete(id);\r\n        disposable.dispose();\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    asProtocol(workspaceFolder) {\r\n        if (workspaceFolder === void 0) {\r\n            return null;\r\n        }\r\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\r\n    }\r\n}\r\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\r\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar t = exports.tokens = {}\nvar R = 0\n\nfunction tok (n) {\n  t[n] = R++\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ntok('NUMERICIDENTIFIER')\nsrc[t.NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\ntok('NUMERICIDENTIFIERLOOSE')\nsrc[t.NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ntok('NONNUMERICIDENTIFIER')\nsrc[t.NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ntok('MAINVERSION')\nsrc[t.MAINVERSION] = '(' + src[t.NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[t.NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[t.NUMERICIDENTIFIER] + ')'\n\ntok('MAINVERSIONLOOSE')\nsrc[t.MAINVERSIONLOOSE] = '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ntok('PRERELEASEIDENTIFIER')\nsrc[t.PRERELEASEIDENTIFIER] = '(?:' + src[t.NUMERICIDENTIFIER] +\n                            '|' + src[t.NONNUMERICIDENTIFIER] + ')'\n\ntok('PRERELEASEIDENTIFIERLOOSE')\nsrc[t.PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[t.NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[t.NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ntok('PRERELEASE')\nsrc[t.PRERELEASE] = '(?:-(' + src[t.PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[t.PRERELEASEIDENTIFIER] + ')*))'\n\ntok('PRERELEASELOOSE')\nsrc[t.PRERELEASELOOSE] = '(?:-?(' + src[t.PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[t.PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ntok('BUILDIDENTIFIER')\nsrc[t.BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ntok('BUILD')\nsrc[t.BUILD] = '(?:\\\\+(' + src[t.BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[t.BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ntok('FULL')\ntok('FULLPLAIN')\nsrc[t.FULLPLAIN] = 'v?' + src[t.MAINVERSION] +\n                  src[t.PRERELEASE] + '?' +\n                  src[t.BUILD] + '?'\n\nsrc[t.FULL] = '^' + src[t.FULLPLAIN] + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ntok('LOOSEPLAIN')\nsrc[t.LOOSEPLAIN] = '[v=\\\\s]*' + src[t.MAINVERSIONLOOSE] +\n                  src[t.PRERELEASELOOSE] + '?' +\n                  src[t.BUILD] + '?'\n\ntok('LOOSE')\nsrc[t.LOOSE] = '^' + src[t.LOOSEPLAIN] + '$'\n\ntok('GTLT')\nsrc[t.GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ntok('XRANGEIDENTIFIERLOOSE')\nsrc[t.XRANGEIDENTIFIERLOOSE] = src[t.NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\ntok('XRANGEIDENTIFIER')\nsrc[t.XRANGEIDENTIFIER] = src[t.NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\ntok('XRANGEPLAIN')\nsrc[t.XRANGEPLAIN] = '[v=\\\\s]*(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[t.PRERELEASE] + ')?' +\n                   src[t.BUILD] + '?' +\n                   ')?)?'\n\ntok('XRANGEPLAINLOOSE')\nsrc[t.XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[t.PRERELEASELOOSE] + ')?' +\n                        src[t.BUILD] + '?' +\n                        ')?)?'\n\ntok('XRANGE')\nsrc[t.XRANGE] = '^' + src[t.GTLT] + '\\\\s*' + src[t.XRANGEPLAIN] + '$'\ntok('XRANGELOOSE')\nsrc[t.XRANGELOOSE] = '^' + src[t.GTLT] + '\\\\s*' + src[t.XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ntok('COERCE')\nsrc[t.COERCE] = '(^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\ntok('COERCERTL')\nre[t.COERCERTL] = new RegExp(src[t.COERCE], 'g')\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ntok('LONETILDE')\nsrc[t.LONETILDE] = '(?:~>?)'\n\ntok('TILDETRIM')\nsrc[t.TILDETRIM] = '(\\\\s*)' + src[t.LONETILDE] + '\\\\s+'\nre[t.TILDETRIM] = new RegExp(src[t.TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\ntok('TILDE')\nsrc[t.TILDE] = '^' + src[t.LONETILDE] + src[t.XRANGEPLAIN] + '$'\ntok('TILDELOOSE')\nsrc[t.TILDELOOSE] = '^' + src[t.LONETILDE] + src[t.XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ntok('LONECARET')\nsrc[t.LONECARET] = '(?:\\\\^)'\n\ntok('CARETTRIM')\nsrc[t.CARETTRIM] = '(\\\\s*)' + src[t.LONECARET] + '\\\\s+'\nre[t.CARETTRIM] = new RegExp(src[t.CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\ntok('CARET')\nsrc[t.CARET] = '^' + src[t.LONECARET] + src[t.XRANGEPLAIN] + '$'\ntok('CARETLOOSE')\nsrc[t.CARETLOOSE] = '^' + src[t.LONECARET] + src[t.XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ntok('COMPARATORLOOSE')\nsrc[t.COMPARATORLOOSE] = '^' + src[t.GTLT] + '\\\\s*(' + src[t.LOOSEPLAIN] + ')$|^$'\ntok('COMPARATOR')\nsrc[t.COMPARATOR] = '^' + src[t.GTLT] + '\\\\s*(' + src[t.FULLPLAIN] + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ntok('COMPARATORTRIM')\nsrc[t.COMPARATORTRIM] = '(\\\\s*)' + src[t.GTLT] +\n                      '\\\\s*(' + src[t.LOOSEPLAIN] + '|' + src[t.XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[t.COMPARATORTRIM] = new RegExp(src[t.COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ntok('HYPHENRANGE')\nsrc[t.HYPHENRANGE] = '^\\\\s*(' + src[t.XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[t.XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\ntok('HYPHENRANGELOOSE')\nsrc[t.HYPHENRANGELOOSE] = '^\\\\s*(' + src[t.XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[t.XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\ntok('STAR')\nsrc[t.STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[t.LOOSE] : re[t.FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\nSemVer.prototype.compareBuild = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  var i = 0\n  do {\n    var a = this.build[i]\n    var b = other.build[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.compareBuild = compareBuild\nfunction compareBuild (a, b, loose) {\n  var versionA = new SemVer(a, loose)\n  var versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compareBuild(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compareBuild(b, a, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1] !== undefined ? m[1] : ''\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY || version === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    try {\n      version = new SemVer(version, this.options)\n    } catch (er) {\n      return false\n    }\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    if (this.value === '') {\n      return true\n    }\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    if (comp.value === '') {\n      return true\n    }\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[t.COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return (\n      isSatisfiable(thisComparators, options) &&\n      range.set.some(function (rangeComparators) {\n        return (\n          isSatisfiable(rangeComparators, options) &&\n          thisComparators.every(function (thisComparator) {\n            return rangeComparators.every(function (rangeComparator) {\n              return thisComparator.intersects(rangeComparator, options)\n            })\n          })\n        )\n      })\n    )\n  })\n}\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nfunction isSatisfiable (comparators, options) {\n  var result = true\n  var remainingComparators = comparators.slice()\n  var testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every(function (otherComparator) {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p + pr\n    } else if (xm) {\n      ret = '>=' + M + '.0.0' + pr + ' <' + (+M + 1) + '.0.0' + pr\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0' + pr +\n        ' <' + M + '.' + (+m + 1) + '.0' + pr\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[t.STAR], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    try {\n      version = new SemVer(version, this.options)\n    } catch (er) {\n      return false\n    }\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version, options) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  var match = null\n  if (!options.rtl) {\n    match = version.match(re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    var next\n    while ((next = re[t.COERCERTL].exec(version)) &&\n      (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n          next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      re[t.COERCERTL].lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    re[t.COERCERTL].lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  return parse(match[2] +\n    '.' + (match[3] || '0') +\n    '.' + (match[4] || '0'), options)\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\nexports.ProgressType = vscode_jsonrpc_1.ProgressType;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nconst callHierarchy = require(\"./protocol.callHierarchy.proposed\");\r\nconst st = require(\"./protocol.sematicTokens.proposed\");\r\nvar Proposed;\r\n(function (Proposed) {\r\n    let CallHierarchyPrepareRequest;\r\n    (function (CallHierarchyPrepareRequest) {\r\n        CallHierarchyPrepareRequest.method = callHierarchy.CallHierarchyPrepareRequest.method;\r\n        CallHierarchyPrepareRequest.type = callHierarchy.CallHierarchyPrepareRequest.type;\r\n    })(CallHierarchyPrepareRequest = Proposed.CallHierarchyPrepareRequest || (Proposed.CallHierarchyPrepareRequest = {}));\r\n    let CallHierarchyIncomingCallsRequest;\r\n    (function (CallHierarchyIncomingCallsRequest) {\r\n        CallHierarchyIncomingCallsRequest.method = callHierarchy.CallHierarchyIncomingCallsRequest.method;\r\n        CallHierarchyIncomingCallsRequest.type = callHierarchy.CallHierarchyIncomingCallsRequest.type;\r\n    })(CallHierarchyIncomingCallsRequest = Proposed.CallHierarchyIncomingCallsRequest || (Proposed.CallHierarchyIncomingCallsRequest = {}));\r\n    let CallHierarchyOutgoingCallsRequest;\r\n    (function (CallHierarchyOutgoingCallsRequest) {\r\n        CallHierarchyOutgoingCallsRequest.method = callHierarchy.CallHierarchyOutgoingCallsRequest.method;\r\n        CallHierarchyOutgoingCallsRequest.type = callHierarchy.CallHierarchyOutgoingCallsRequest.type;\r\n    })(CallHierarchyOutgoingCallsRequest = Proposed.CallHierarchyOutgoingCallsRequest || (Proposed.CallHierarchyOutgoingCallsRequest = {}));\r\n    Proposed.SemanticTokenTypes = st.SemanticTokenTypes;\r\n    Proposed.SemanticTokenModifiers = st.SemanticTokenModifiers;\r\n    Proposed.SemanticTokens = st.SemanticTokens;\r\n    let SemanticTokensRequest;\r\n    (function (SemanticTokensRequest) {\r\n        SemanticTokensRequest.method = st.SemanticTokensRequest.method;\r\n        SemanticTokensRequest.type = st.SemanticTokensRequest.type;\r\n    })(SemanticTokensRequest = Proposed.SemanticTokensRequest || (Proposed.SemanticTokensRequest = {}));\r\n    let SemanticTokensEditsRequest;\r\n    (function (SemanticTokensEditsRequest) {\r\n        SemanticTokensEditsRequest.method = st.SemanticTokensEditsRequest.method;\r\n        SemanticTokensEditsRequest.type = st.SemanticTokensEditsRequest.type;\r\n    })(SemanticTokensEditsRequest = Proposed.SemanticTokensEditsRequest || (Proposed.SemanticTokensEditsRequest = {}));\r\n    let SemanticTokensRangeRequest;\r\n    (function (SemanticTokensRangeRequest) {\r\n        SemanticTokensRangeRequest.method = st.SemanticTokensRangeRequest.method;\r\n        SemanticTokensRangeRequest.type = st.SemanticTokensRangeRequest.type;\r\n    })(SemanticTokensRangeRequest = Proposed.SemanticTokensRangeRequest || (Proposed.SemanticTokensRangeRequest = {}));\r\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType0 = ProtocolRequestType0;\r\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType = ProtocolRequestType;\r\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType = ProtocolNotificationType;\r\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) TypeFox and others. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to result a `CallHierarchyItem` in a document at a given position.\r\n * Can be used as an input to a incoming or outgoing call hierarchy.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyPrepareRequest;\r\n(function (CallHierarchyPrepareRequest) {\r\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\r\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\r\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\r\n/**\r\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyIncomingCallsRequest;\r\n(function (CallHierarchyIncomingCallsRequest) {\r\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\r\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\r\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\r\n/**\r\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyOutgoingCallsRequest;\r\n(function (CallHierarchyOutgoingCallsRequest) {\r\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\r\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\r\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.method = 'textDocument/documentColor';\r\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\r\n    /** @deprecated Use DocumentColorRequest.type */\r\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.method = 'textDocument/declaration';\r\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\r\n    /** @deprecated Use DeclarationRequest.type */\r\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\r\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\r\n    /** @deprecated Use FoldingRangeRequest.type */\r\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.method = 'textDocument/implementation';\r\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\r\n    /** @deprecated Use ImplementationRequest.type */\r\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\r\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\r\nconst protocol_progress_1 = require(\"./protocol.progress\");\r\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\r\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\r\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * The DocumentFilter namespace provides helper functions to work with\r\n * [DocumentFilter](#DocumentFilter) literals.\r\n */\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The DocumentSelector namespace provides helper functions to work with\r\n * [DocumentSelector](#DocumentSelector)s.\r\n */\r\nvar DocumentSelector;\r\n(function (DocumentSelector) {\r\n    function is(value) {\r\n        if (!Array.isArray(value)) {\r\n            return false;\r\n        }\r\n        for (let elem of value) {\r\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    DocumentSelector.is = is;\r\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guarantee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * The StaticRegistrationOptions namespace provides helper functions to work with\r\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\r\n */\r\nvar StaticRegistrationOptions;\r\n(function (StaticRegistrationOptions) {\r\n    function hasId(value) {\r\n        const candidate = value;\r\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\r\n    }\r\n    StaticRegistrationOptions.hasId = hasId;\r\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\r\n/**\r\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\r\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\r\n */\r\nvar TextDocumentRegistrationOptions;\r\n(function (TextDocumentRegistrationOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\r\n    }\r\n    TextDocumentRegistrationOptions.is = is;\r\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\r\n/**\r\n * The WorkDoneProgressOptions namespace provides helper functions to work with\r\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\r\n */\r\nvar WorkDoneProgressOptions;\r\n(function (WorkDoneProgressOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\r\n    }\r\n    WorkDoneProgressOptions.is = is;\r\n    function hasWorkDoneProgress(value) {\r\n        const candidate = value;\r\n        return candidate && Is.boolean(candidate.workDoneProgress);\r\n    }\r\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\r\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\r\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\r\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\r\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\r\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nvar TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\r\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\r\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.method = 'textDocument/completion';\r\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\r\n    /** @deprecated Use CompletionRequest.type */\r\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.method = 'completionItem/resolve';\r\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.method = 'textDocument/hover';\r\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\n/**\r\n * How a signature help was triggered.\r\n *\r\n * @since 3.15.0\r\n */\r\nvar SignatureHelpTriggerKind;\r\n(function (SignatureHelpTriggerKind) {\r\n    /**\r\n     * Signature help was invoked manually by the user or by a command.\r\n     */\r\n    SignatureHelpTriggerKind.Invoked = 1;\r\n    /**\r\n     * Signature help was triggered by a trigger character.\r\n     */\r\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Signature help was triggered by the cursor moving or by the document content changing.\r\n     */\r\n    SignatureHelpTriggerKind.ContentChange = 3;\r\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\r\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.method = 'textDocument/definition';\r\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\r\n    /** @deprecated Use DefinitionRequest.type */\r\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.method = 'textDocument/references';\r\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\r\n    /** @deprecated Use ReferencesRequest.type */\r\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\r\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\r\n    /** @deprecated Use DocumentHighlightRequest.type */\r\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\r\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\r\n    /** @deprecated Use DocumentSymbolRequest.type */\r\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.method = 'textDocument/codeAction';\r\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\r\n    /** @deprecated Use CodeActionRequest.type */\r\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\r\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\r\n    /** @deprecated Use WorkspaceSymbolRequest.type */\r\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\r\n    /** @deprecated Use CodeLensRequest.type */\r\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.method = 'textDocument/documentLink';\r\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\r\n    /** @deprecated Use DocumentLinkRequest.type */\r\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.method = 'textDocument/formatting';\r\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\r\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\r\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.method = 'textDocument/rename';\r\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\r\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nvar WorkDoneProgress;\r\n(function (WorkDoneProgress) {\r\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\r\n/**\r\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\r\n * reporting from the server.\r\n */\r\nvar WorkDoneProgressCreateRequest;\r\n(function (WorkDoneProgressCreateRequest) {\r\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\r\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\r\n/**\r\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\r\n * initiated on the server side.\r\n */\r\nvar WorkDoneProgressCancelNotification;\r\n(function (WorkDoneProgressCancelNotification) {\r\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\r\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to provide selection ranges in a document. The request's\r\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\r\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar SelectionRangeRequest;\r\n(function (SelectionRangeRequest) {\r\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\r\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\r\n    /** @deprecated  Use SelectionRangeRequest.type */\r\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A set of predefined token types. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenTypes;\r\n(function (SemanticTokenTypes) {\r\n    SemanticTokenTypes[\"comment\"] = \"comment\";\r\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\r\n    SemanticTokenTypes[\"string\"] = \"string\";\r\n    SemanticTokenTypes[\"number\"] = \"number\";\r\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\r\n    SemanticTokenTypes[\"operator\"] = \"operator\";\r\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\r\n    SemanticTokenTypes[\"type\"] = \"type\";\r\n    SemanticTokenTypes[\"struct\"] = \"struct\";\r\n    SemanticTokenTypes[\"class\"] = \"class\";\r\n    SemanticTokenTypes[\"interface\"] = \"interface\";\r\n    SemanticTokenTypes[\"enum\"] = \"enum\";\r\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\r\n    SemanticTokenTypes[\"function\"] = \"function\";\r\n    SemanticTokenTypes[\"member\"] = \"member\";\r\n    SemanticTokenTypes[\"property\"] = \"property\";\r\n    SemanticTokenTypes[\"macro\"] = \"macro\";\r\n    SemanticTokenTypes[\"variable\"] = \"variable\";\r\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\r\n    SemanticTokenTypes[\"label\"] = \"label\";\r\n})(SemanticTokenTypes = exports.SemanticTokenTypes || (exports.SemanticTokenTypes = {}));\r\n/**\r\n * A set of predefined token modifiers. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenModifiers;\r\n(function (SemanticTokenModifiers) {\r\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\r\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\r\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\r\n    SemanticTokenModifiers[\"reference\"] = \"reference\";\r\n    SemanticTokenModifiers[\"static\"] = \"static\";\r\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\r\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\r\n    SemanticTokenModifiers[\"async\"] = \"async\";\r\n    SemanticTokenModifiers[\"volatile\"] = \"volatile\";\r\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\r\n})(SemanticTokenModifiers = exports.SemanticTokenModifiers || (exports.SemanticTokenModifiers = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokens;\r\n(function (SemanticTokens) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\r\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\r\n    }\r\n    SemanticTokens.is = is;\r\n})(SemanticTokens = exports.SemanticTokens || (exports.SemanticTokens = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRequest;\r\n(function (SemanticTokensRequest) {\r\n    SemanticTokensRequest.method = 'textDocument/semanticTokens';\r\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\r\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensEditsRequest;\r\n(function (SemanticTokensEditsRequest) {\r\n    SemanticTokensEditsRequest.method = 'textDocument/semanticTokens/edits';\r\n    SemanticTokensEditsRequest.type = new messages_1.ProtocolRequestType(SemanticTokensEditsRequest.method);\r\n})(SemanticTokensEditsRequest = exports.SemanticTokensEditsRequest || (exports.SemanticTokensEditsRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRangeRequest;\r\n(function (SemanticTokensRangeRequest) {\r\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\r\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\r\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\r\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\r\n    /** @deprecated Use TypeDefinitionRequest.type */\r\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction objectLiteral(value) {\r\n    // Strictly speaking class instances pass this check as well. Since the LSP\r\n    // doesn't use classes we ignore this for now. If we do we need to add something\r\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n    return value !== null && typeof value === 'object';\r\n}\r\nexports.objectLiteral = objectLiteral;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The diagnostic tags.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n    /**\r\n     * Deprecated or obsolete code.\r\n     *\r\n     * Clients are allowed to rendered diagnostics with this tag strike through.\r\n     */\r\n    DiagnosticTag.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * Completion item tags are extra annotations that tweak the rendering of a completion\r\n * item.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    /**\r\n     * Render a completion as obsolete, usually using a strike-out.\r\n     */\r\n    CompletionItemTag.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\n/**\r\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\r\n * @since 3.15\r\n */\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    /**\r\n     * Render a symbol as obsolete, usually using a strike-out.\r\n     */\r\n    SymbolTag.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nexport var DocumentSymbol;\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    /**\r\n     * Base kind for auto-fix source actions: `source.fixAll`.\r\n     *\r\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\r\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\r\n     *\r\n     * @since 3.15.0\r\n     */\r\n    CodeActionKind.SourceFixAll = 'source.fixAll';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void 0) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data)) {\r\n            result.data = data;\r\n        }\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\nexport var DocumentLink;\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\n/**\r\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\r\n */\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = undefined;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/**\n* @license\n* Copyright Google Inc. All Rights Reserved.\n*\n* Use of this source code is governed by an MIT-style license that can be\n* found in the LICENSE file at https://angular.io/license\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (factory());\n}(this, (function () { 'use strict';\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nvar Zone$1 = (function (global) {\n    if (global['Zone']) {\n        throw new Error('Zone already loaded.');\n    }\n    var Zone = (function () {\n        function Zone(parent, zoneSpec) {\n            this._properties = null;\n            this._parent = parent;\n            this._name = zoneSpec ? zoneSpec.name || 'unnamed' : '<root>';\n            this._properties = zoneSpec && zoneSpec.properties || {};\n            this._zoneDelegate =\n                new ZoneDelegate(this, this._parent && this._parent._zoneDelegate, zoneSpec);\n        }\n        Zone.assertZonePatched = function () {\n            if (global.Promise !== ZoneAwarePromise) {\n                throw new Error('Zone.js has detected that ZoneAwarePromise `(window|global).Promise` ' +\n                    'has been overwritten.\\n' +\n                    'Most likely cause is that a Promise polyfill has been loaded ' +\n                    'after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. ' +\n                    'If you must load one, do so before loading zone.js.)');\n            }\n        };\n        Object.defineProperty(Zone, \"current\", {\n            get: function () {\n                return _currentZoneFrame.zone;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Object.defineProperty(Zone, \"currentTask\", {\n            get: function () {\n                return _currentTask;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Object.defineProperty(Zone.prototype, \"parent\", {\n            get: function () {\n                return this._parent;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Object.defineProperty(Zone.prototype, \"name\", {\n            get: function () {\n                return this._name;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Zone.prototype.get = function (key) {\n            var zone = this.getZoneWith(key);\n            if (zone)\n                return zone._properties[key];\n        };\n        Zone.prototype.getZoneWith = function (key) {\n            var current = this;\n            while (current) {\n                if (current._properties.hasOwnProperty(key)) {\n                    return current;\n                }\n                current = current._parent;\n            }\n            return null;\n        };\n        Zone.prototype.fork = function (zoneSpec) {\n            if (!zoneSpec)\n                throw new Error('ZoneSpec required!');\n            return this._zoneDelegate.fork(this, zoneSpec);\n        };\n        Zone.prototype.wrap = function (callback, source) {\n            if (typeof callback !== 'function') {\n                throw new Error('Expecting function got: ' + callback);\n            }\n            var _callback = this._zoneDelegate.intercept(this, callback, source);\n            var zone = this;\n            return function () {\n                return zone.runGuarded(_callback, this, arguments, source);\n            };\n        };\n        Zone.prototype.run = function (callback, applyThis, applyArgs, source) {\n            if (applyThis === void 0) { applyThis = null; }\n            if (applyArgs === void 0) { applyArgs = null; }\n            if (source === void 0) { source = null; }\n            _currentZoneFrame = new ZoneFrame(_currentZoneFrame, this);\n            try {\n                return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n            }\n        };\n        Zone.prototype.runGuarded = function (callback, applyThis, applyArgs, source) {\n            if (applyThis === void 0) { applyThis = null; }\n            if (applyArgs === void 0) { applyArgs = null; }\n            if (source === void 0) { source = null; }\n            _currentZoneFrame = new ZoneFrame(_currentZoneFrame, this);\n            try {\n                try {\n                    return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);\n                }\n                catch (error) {\n                    if (this._zoneDelegate.handleError(this, error)) {\n                        throw error;\n                    }\n                }\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n            }\n        };\n        Zone.prototype.runTask = function (task, applyThis, applyArgs) {\n            task.runCount++;\n            if (task.zone != this)\n                throw new Error('A task can only be run in the zone which created it! (Creation: ' + task.zone.name +\n                    '; Execution: ' + this.name + ')');\n            var previousTask = _currentTask;\n            _currentTask = task;\n            _currentZoneFrame = new ZoneFrame(_currentZoneFrame, this);\n            try {\n                if (task.type == 'macroTask' && task.data && !task.data.isPeriodic) {\n                    task.cancelFn = null;\n                }\n                try {\n                    return this._zoneDelegate.invokeTask(this, task, applyThis, applyArgs);\n                }\n                catch (error) {\n                    if (this._zoneDelegate.handleError(this, error)) {\n                        throw error;\n                    }\n                }\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n                _currentTask = previousTask;\n            }\n        };\n        Zone.prototype.scheduleMicroTask = function (source, callback, data, customSchedule) {\n            return this._zoneDelegate.scheduleTask(this, new ZoneTask('microTask', this, source, callback, data, customSchedule, null));\n        };\n        Zone.prototype.scheduleMacroTask = function (source, callback, data, customSchedule, customCancel) {\n            return this._zoneDelegate.scheduleTask(this, new ZoneTask('macroTask', this, source, callback, data, customSchedule, customCancel));\n        };\n        Zone.prototype.scheduleEventTask = function (source, callback, data, customSchedule, customCancel) {\n            return this._zoneDelegate.scheduleTask(this, new ZoneTask('eventTask', this, source, callback, data, customSchedule, customCancel));\n        };\n        Zone.prototype.cancelTask = function (task) {\n            var value = this._zoneDelegate.cancelTask(this, task);\n            task.runCount = -1;\n            task.cancelFn = null;\n            return value;\n        };\n        return Zone;\n    }());\n    Zone.__symbol__ = __symbol__;\n    \n    var ZoneDelegate = (function () {\n        function ZoneDelegate(zone, parentDelegate, zoneSpec) {\n            this._taskCounts = { microTask: 0, macroTask: 0, eventTask: 0 };\n            this.zone = zone;\n            this._parentDelegate = parentDelegate;\n            this._forkZS = zoneSpec && (zoneSpec && zoneSpec.onFork ? zoneSpec : parentDelegate._forkZS);\n            this._forkDlgt = zoneSpec && (zoneSpec.onFork ? parentDelegate : parentDelegate._forkDlgt);\n            this._forkCurrZone = zoneSpec && (zoneSpec.onFork ? this.zone : parentDelegate.zone);\n            this._interceptZS =\n                zoneSpec && (zoneSpec.onIntercept ? zoneSpec : parentDelegate._interceptZS);\n            this._interceptDlgt =\n                zoneSpec && (zoneSpec.onIntercept ? parentDelegate : parentDelegate._interceptDlgt);\n            this._interceptCurrZone =\n                zoneSpec && (zoneSpec.onIntercept ? this.zone : parentDelegate.zone);\n            this._invokeZS = zoneSpec && (zoneSpec.onInvoke ? zoneSpec : parentDelegate._invokeZS);\n            this._invokeDlgt =\n                zoneSpec && (zoneSpec.onInvoke ? parentDelegate : parentDelegate._invokeDlgt);\n            this._invokeCurrZone = zoneSpec && (zoneSpec.onInvoke ? this.zone : parentDelegate.zone);\n            this._handleErrorZS =\n                zoneSpec && (zoneSpec.onHandleError ? zoneSpec : parentDelegate._handleErrorZS);\n            this._handleErrorDlgt =\n                zoneSpec && (zoneSpec.onHandleError ? parentDelegate : parentDelegate._handleErrorDlgt);\n            this._handleErrorCurrZone =\n                zoneSpec && (zoneSpec.onHandleError ? this.zone : parentDelegate.zone);\n            this._scheduleTaskZS =\n                zoneSpec && (zoneSpec.onScheduleTask ? zoneSpec : parentDelegate._scheduleTaskZS);\n            this._scheduleTaskDlgt =\n                zoneSpec && (zoneSpec.onScheduleTask ? parentDelegate : parentDelegate._scheduleTaskDlgt);\n            this._scheduleTaskCurrZone =\n                zoneSpec && (zoneSpec.onScheduleTask ? this.zone : parentDelegate.zone);\n            this._invokeTaskZS =\n                zoneSpec && (zoneSpec.onInvokeTask ? zoneSpec : parentDelegate._invokeTaskZS);\n            this._invokeTaskDlgt =\n                zoneSpec && (zoneSpec.onInvokeTask ? parentDelegate : parentDelegate._invokeTaskDlgt);\n            this._invokeTaskCurrZone =\n                zoneSpec && (zoneSpec.onInvokeTask ? this.zone : parentDelegate.zone);\n            this._cancelTaskZS =\n                zoneSpec && (zoneSpec.onCancelTask ? zoneSpec : parentDelegate._cancelTaskZS);\n            this._cancelTaskDlgt =\n                zoneSpec && (zoneSpec.onCancelTask ? parentDelegate : parentDelegate._cancelTaskDlgt);\n            this._cancelTaskCurrZone =\n                zoneSpec && (zoneSpec.onCancelTask ? this.zone : parentDelegate.zone);\n            this._hasTaskZS = zoneSpec && (zoneSpec.onHasTask ? zoneSpec : parentDelegate._hasTaskZS);\n            this._hasTaskDlgt =\n                zoneSpec && (zoneSpec.onHasTask ? parentDelegate : parentDelegate._hasTaskDlgt);\n            this._hasTaskCurrZone = zoneSpec && (zoneSpec.onHasTask ? this.zone : parentDelegate.zone);\n        }\n        ZoneDelegate.prototype.fork = function (targetZone, zoneSpec) {\n            return this._forkZS ? this._forkZS.onFork(this._forkDlgt, this.zone, targetZone, zoneSpec) :\n                new Zone(targetZone, zoneSpec);\n        };\n        ZoneDelegate.prototype.intercept = function (targetZone, callback, source) {\n            return this._interceptZS ?\n                this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, targetZone, callback, source) :\n                callback;\n        };\n        ZoneDelegate.prototype.invoke = function (targetZone, callback, applyThis, applyArgs, source) {\n            return this._invokeZS ?\n                this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, targetZone, callback, applyThis, applyArgs, source) :\n                callback.apply(applyThis, applyArgs);\n        };\n        ZoneDelegate.prototype.handleError = function (targetZone, error) {\n            return this._handleErrorZS ?\n                this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, targetZone, error) :\n                true;\n        };\n        ZoneDelegate.prototype.scheduleTask = function (targetZone, task) {\n            try {\n                if (this._scheduleTaskZS) {\n                    return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, targetZone, task);\n                }\n                else if (task.scheduleFn) {\n                    task.scheduleFn(task);\n                }\n                else if (task.type == 'microTask') {\n                    scheduleMicroTask(task);\n                }\n                else {\n                    throw new Error('Task is missing scheduleFn.');\n                }\n                return task;\n            }\n            finally {\n                if (targetZone == this.zone) {\n                    this._updateTaskCount(task.type, 1);\n                }\n            }\n        };\n        ZoneDelegate.prototype.invokeTask = function (targetZone, task, applyThis, applyArgs) {\n            try {\n                return this._invokeTaskZS ?\n                    this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, targetZone, task, applyThis, applyArgs) :\n                    task.callback.apply(applyThis, applyArgs);\n            }\n            finally {\n                if (targetZone == this.zone && (task.type != 'eventTask') &&\n                    !(task.data && task.data.isPeriodic)) {\n                    this._updateTaskCount(task.type, -1);\n                }\n            }\n        };\n        ZoneDelegate.prototype.cancelTask = function (targetZone, task) {\n            var value;\n            if (this._cancelTaskZS) {\n                value = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, targetZone, task);\n            }\n            else if (!task.cancelFn) {\n                throw new Error('Task does not support cancellation, or is already canceled.');\n            }\n            else {\n                value = task.cancelFn(task);\n            }\n            if (targetZone == this.zone) {\n                // this should not be in the finally block, because exceptions assume not canceled.\n                this._updateTaskCount(task.type, -1);\n            }\n            return value;\n        };\n        ZoneDelegate.prototype.hasTask = function (targetZone, isEmpty) {\n            return this._hasTaskZS &&\n                this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, targetZone, isEmpty);\n        };\n        ZoneDelegate.prototype._updateTaskCount = function (type, count) {\n            var counts = this._taskCounts;\n            var prev = counts[type];\n            var next = counts[type] = prev + count;\n            if (next < 0) {\n                throw new Error('More tasks executed then were scheduled.');\n            }\n            if (prev == 0 || next == 0) {\n                var isEmpty = {\n                    microTask: counts.microTask > 0,\n                    macroTask: counts.macroTask > 0,\n                    eventTask: counts.eventTask > 0,\n                    change: type\n                };\n                try {\n                    this.hasTask(this.zone, isEmpty);\n                }\n                finally {\n                    if (this._parentDelegate) {\n                        this._parentDelegate._updateTaskCount(type, count);\n                    }\n                }\n            }\n        };\n        return ZoneDelegate;\n    }());\n    var ZoneTask = (function () {\n        function ZoneTask(type, zone, source, callback, options, scheduleFn, cancelFn) {\n            this.runCount = 0;\n            this.type = type;\n            this.zone = zone;\n            this.source = source;\n            this.data = options;\n            this.scheduleFn = scheduleFn;\n            this.cancelFn = cancelFn;\n            this.callback = callback;\n            var self = this;\n            this.invoke = function () {\n                _numberOfNestedTaskFrames++;\n                try {\n                    return zone.runTask(self, this, arguments);\n                }\n                finally {\n                    if (_numberOfNestedTaskFrames == 1) {\n                        drainMicroTaskQueue();\n                    }\n                    _numberOfNestedTaskFrames--;\n                }\n            };\n        }\n        ZoneTask.prototype.toString = function () {\n            if (this.data && typeof this.data.handleId !== 'undefined') {\n                return this.data.handleId;\n            }\n            else {\n                return Object.prototype.toString.call(this);\n            }\n        };\n        // add toJSON method to prevent cyclic error when\n        // call JSON.stringify(zoneTask)\n        ZoneTask.prototype.toJSON = function () {\n            return {\n                type: this.type,\n                source: this.source,\n                data: this.data,\n                zone: this.zone.name,\n                invoke: this.invoke,\n                scheduleFn: this.scheduleFn,\n                cancelFn: this.cancelFn,\n                runCount: this.runCount,\n                callback: this.callback\n            };\n        };\n        return ZoneTask;\n    }());\n    var ZoneFrame = (function () {\n        function ZoneFrame(parent, zone) {\n            this.parent = parent;\n            this.zone = zone;\n        }\n        return ZoneFrame;\n    }());\n    function __symbol__(name) {\n        return '__zone_symbol__' + name;\n    }\n    \n    var symbolSetTimeout = __symbol__('setTimeout');\n    var symbolPromise = __symbol__('Promise');\n    var symbolThen = __symbol__('then');\n    var _currentZoneFrame = new ZoneFrame(null, new Zone(null, null));\n    var _currentTask = null;\n    var _microTaskQueue = [];\n    var _isDrainingMicrotaskQueue = false;\n    var _uncaughtPromiseErrors = [];\n    var _numberOfNestedTaskFrames = 0;\n    function scheduleQueueDrain() {\n        // if we are not running in any task, and there has not been anything scheduled\n        // we must bootstrap the initial task creation by manually scheduling the drain\n        if (_numberOfNestedTaskFrames === 0 && _microTaskQueue.length === 0) {\n            // We are not running in Task, so we need to kickstart the microtask queue.\n            if (global[symbolPromise]) {\n                global[symbolPromise].resolve(0)[symbolThen](drainMicroTaskQueue);\n            }\n            else {\n                global[symbolSetTimeout](drainMicroTaskQueue, 0);\n            }\n        }\n    }\n    function scheduleMicroTask(task) {\n        scheduleQueueDrain();\n        _microTaskQueue.push(task);\n    }\n    function consoleError(e) {\n        var rejection = e && e.rejection;\n        if (rejection) {\n            console.error('Unhandled Promise rejection:', rejection instanceof Error ? rejection.message : rejection, '; Zone:', e.zone.name, '; Task:', e.task && e.task.source, '; Value:', rejection, rejection instanceof Error ? rejection.stack : undefined);\n        }\n        console.error(e);\n    }\n    function drainMicroTaskQueue() {\n        if (!_isDrainingMicrotaskQueue) {\n            _isDrainingMicrotaskQueue = true;\n            while (_microTaskQueue.length) {\n                var queue = _microTaskQueue;\n                _microTaskQueue = [];\n                for (var i = 0; i < queue.length; i++) {\n                    var task = queue[i];\n                    try {\n                        task.zone.runTask(task, null, null);\n                    }\n                    catch (e) {\n                        consoleError(e);\n                    }\n                }\n            }\n            while (_uncaughtPromiseErrors.length) {\n                var _loop_1 = function () {\n                    var uncaughtPromiseError = _uncaughtPromiseErrors.shift();\n                    try {\n                        uncaughtPromiseError.zone.runGuarded(function () {\n                            throw uncaughtPromiseError;\n                        });\n                    }\n                    catch (e) {\n                        consoleError(e);\n                    }\n                };\n                while (_uncaughtPromiseErrors.length) {\n                    _loop_1();\n                }\n            }\n            _isDrainingMicrotaskQueue = false;\n        }\n    }\n    function isThenable(value) {\n        return value && value.then;\n    }\n    function forwardResolution(value) {\n        return value;\n    }\n    function forwardRejection(rejection) {\n        return ZoneAwarePromise.reject(rejection);\n    }\n    var symbolState = __symbol__('state');\n    var symbolValue = __symbol__('value');\n    var source = 'Promise.then';\n    var UNRESOLVED = null;\n    var RESOLVED = true;\n    var REJECTED = false;\n    var REJECTED_NO_CATCH = 0;\n    function makeResolver(promise, state) {\n        return function (v) {\n            resolvePromise(promise, state, v);\n            // Do not return value or you will break the Promise spec.\n        };\n    }\n    function resolvePromise(promise, state, value) {\n        if (promise[symbolState] === UNRESOLVED) {\n            if (value instanceof ZoneAwarePromise && value.hasOwnProperty(symbolState) &&\n                value.hasOwnProperty(symbolValue) && value[symbolState] !== UNRESOLVED) {\n                clearRejectedNoCatch(value);\n                resolvePromise(promise, value[symbolState], value[symbolValue]);\n            }\n            else if (isThenable(value)) {\n                value.then(makeResolver(promise, state), makeResolver(promise, false));\n            }\n            else {\n                promise[symbolState] = state;\n                var queue = promise[symbolValue];\n                promise[symbolValue] = value;\n                for (var i = 0; i < queue.length;) {\n                    scheduleResolveOrReject(promise, queue[i++], queue[i++], queue[i++], queue[i++]);\n                }\n                if (queue.length == 0 && state == REJECTED) {\n                    promise[symbolState] = REJECTED_NO_CATCH;\n                    try {\n                        throw new Error('Uncaught (in promise): ' + value +\n                            (value && value.stack ? '\\n' + value.stack : ''));\n                    }\n                    catch (e) {\n                        var error_1 = e;\n                        error_1.rejection = value;\n                        error_1.promise = promise;\n                        error_1.zone = Zone.current;\n                        error_1.task = Zone.currentTask;\n                        _uncaughtPromiseErrors.push(error_1);\n                        scheduleQueueDrain();\n                    }\n                }\n            }\n        }\n        // Resolving an already resolved promise is a noop.\n        return promise;\n    }\n    function clearRejectedNoCatch(promise) {\n        if (promise[symbolState] === REJECTED_NO_CATCH) {\n            promise[symbolState] = REJECTED;\n            for (var i = 0; i < _uncaughtPromiseErrors.length; i++) {\n                if (promise === _uncaughtPromiseErrors[i].promise) {\n                    _uncaughtPromiseErrors.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }\n    function scheduleResolveOrReject(promise, zone, chainPromise, onFulfilled, onRejected) {\n        clearRejectedNoCatch(promise);\n        var delegate = promise[symbolState] ? onFulfilled || forwardResolution : onRejected || forwardRejection;\n        zone.scheduleMicroTask(source, function () {\n            try {\n                resolvePromise(chainPromise, true, zone.run(delegate, null, [promise[symbolValue]]));\n            }\n            catch (error) {\n                resolvePromise(chainPromise, false, error);\n            }\n        });\n    }\n    var ZoneAwarePromise = (function () {\n        function ZoneAwarePromise(executor) {\n            var promise = this;\n            if (!(promise instanceof ZoneAwarePromise)) {\n                throw new Error('Must be an instanceof Promise.');\n            }\n            promise[symbolState] = UNRESOLVED;\n            promise[symbolValue] = []; // queue;\n            try {\n                executor && executor(makeResolver(promise, RESOLVED), makeResolver(promise, REJECTED));\n            }\n            catch (e) {\n                resolvePromise(promise, false, e);\n            }\n        }\n        ZoneAwarePromise.toString = function () {\n            return 'function ZoneAwarePromise() { [native code] }';\n        };\n        ZoneAwarePromise.resolve = function (value) {\n            return resolvePromise(new this(null), RESOLVED, value);\n        };\n        ZoneAwarePromise.reject = function (error) {\n            return resolvePromise(new this(null), REJECTED, error);\n        };\n        ZoneAwarePromise.race = function (values) {\n            var resolve;\n            var reject;\n            var promise = new this(function (res, rej) {\n                _a = [res, rej], resolve = _a[0], reject = _a[1];\n                var _a;\n            });\n            function onResolve(value) {\n                promise && (promise = null || resolve(value));\n            }\n            function onReject(error) {\n                promise && (promise = null || reject(error));\n            }\n            for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n                var value = values_1[_i];\n                if (!isThenable(value)) {\n                    value = this.resolve(value);\n                }\n                value.then(onResolve, onReject);\n            }\n            return promise;\n        };\n        ZoneAwarePromise.all = function (values) {\n            var resolve;\n            var reject;\n            var promise = new this(function (res, rej) {\n                resolve = res;\n                reject = rej;\n            });\n            var count = 0;\n            var resolvedValues = [];\n            for (var _i = 0, values_2 = values; _i < values_2.length; _i++) {\n                var value = values_2[_i];\n                if (!isThenable(value)) {\n                    value = this.resolve(value);\n                }\n                value.then((function (index) { return function (value) {\n                    resolvedValues[index] = value;\n                    count--;\n                    if (!count) {\n                        resolve(resolvedValues);\n                    }\n                }; })(count), reject);\n                count++;\n            }\n            if (!count)\n                resolve(resolvedValues);\n            return promise;\n        };\n        ZoneAwarePromise.prototype.then = function (onFulfilled, onRejected) {\n            var chainPromise = new this.constructor(null);\n            var zone = Zone.current;\n            if (this[symbolState] == UNRESOLVED) {\n                this[symbolValue].push(zone, chainPromise, onFulfilled, onRejected);\n            }\n            else {\n                scheduleResolveOrReject(this, zone, chainPromise, onFulfilled, onRejected);\n            }\n            return chainPromise;\n        };\n        ZoneAwarePromise.prototype.catch = function (onRejected) {\n            return this.then(null, onRejected);\n        };\n        return ZoneAwarePromise;\n    }());\n    // Protect against aggressive optimizers dropping seemingly unused properties.\n    // E.g. Closure Compiler in advanced mode.\n    ZoneAwarePromise['resolve'] = ZoneAwarePromise.resolve;\n    ZoneAwarePromise['reject'] = ZoneAwarePromise.reject;\n    ZoneAwarePromise['race'] = ZoneAwarePromise.race;\n    ZoneAwarePromise['all'] = ZoneAwarePromise.all;\n    var NativePromise = global[__symbol__('Promise')] = global['Promise'];\n    global['Promise'] = ZoneAwarePromise;\n    function patchThen(NativePromise) {\n        var NativePromiseProtototype = NativePromise.prototype;\n        var NativePromiseThen = NativePromiseProtototype[__symbol__('then')] =\n            NativePromiseProtototype.then;\n        NativePromiseProtototype.then = function (onResolve, onReject) {\n            var nativePromise = this;\n            return new ZoneAwarePromise(function (resolve, reject) {\n                NativePromiseThen.call(nativePromise, resolve, reject);\n            })\n                .then(onResolve, onReject);\n        };\n    }\n    if (NativePromise) {\n        patchThen(NativePromise);\n        if (typeof global['fetch'] !== 'undefined') {\n            var fetchPromise = void 0;\n            try {\n                // In MS Edge this throws\n                fetchPromise = global['fetch']();\n            }\n            catch (e) {\n                // In Chrome this throws instead.\n                fetchPromise = global['fetch']('about:blank');\n            }\n            // ignore output to prevent error;\n            fetchPromise.then(function () { return null; }, function () { return null; });\n            if (fetchPromise.constructor != NativePromise &&\n                fetchPromise.constructor != ZoneAwarePromise) {\n                patchThen(fetchPromise.constructor);\n            }\n        }\n    }\n    // This is not part of public API, but it is usefull for tests, so we expose it.\n    Promise[Zone.__symbol__('uncaughtPromiseErrors')] = _uncaughtPromiseErrors;\n    /*\n     * This code patches Error so that:\n     *   - It ignores un-needed stack frames.\n     *   - It Shows the associated Zone for reach frame.\n     */\n    var FrameType;\n    (function (FrameType) {\n        /// Skip this frame when printing out stack\n        FrameType[FrameType[\"blackList\"] = 0] = \"blackList\";\n        /// This frame marks zone transition\n        FrameType[FrameType[\"transition\"] = 1] = \"transition\";\n    })(FrameType || (FrameType = {}));\n    var NativeError = global[__symbol__('Error')] = global.Error;\n    // Store the frames which should be removed from the stack frames\n    var blackListedStackFrames = {};\n    // We must find the frame where Error was created, otherwise we assume we don't understand stack\n    var zoneAwareFrame;\n    global.Error = ZoneAwareError;\n    // How should the stack frames be parsed.\n    var frameParserStrategy = null;\n    var stackRewrite = 'stackRewrite';\n    // fix #595, create property descriptor\n    // for error properties\n    var createProperty = function (props, key) {\n        // if property is already defined, skip it.\n        if (props[key]) {\n            return;\n        }\n        // define a local property\n        // in case error property is not settable\n        var name = __symbol__(key);\n        props[key] = {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                // if local property has no value\n                // use internal error's property value\n                if (!this[name]) {\n                    var error_2 = this[__symbol__('error')];\n                    if (error_2) {\n                        this[name] = error_2[key];\n                    }\n                }\n                return this[name];\n            },\n            set: function (value) {\n                // setter will set value to local property value\n                this[name] = value;\n            }\n        };\n    };\n    // fix #595, create property descriptor\n    // for error method properties\n    var createMethodProperty = function (props, key) {\n        if (props[key]) {\n            return;\n        }\n        props[key] = {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value: function () {\n                var error = this[__symbol__('error')];\n                var errorMethod = (error && error[key]) || this[key];\n                if (errorMethod) {\n                    return errorMethod.apply(error, arguments);\n                }\n            }\n        };\n    };\n    var createErrorProperties = function () {\n        var props = Object.create(null);\n        var error = new NativeError();\n        var keys = Object.getOwnPropertyNames(error);\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(error, key)) {\n                createProperty(props, key);\n            }\n        }\n        var proto = NativeError.prototype;\n        if (proto) {\n            var pKeys = Object.getOwnPropertyNames(proto);\n            for (var i = 0; i < pKeys.length; i++) {\n                var key = pKeys[i];\n                // skip constructor\n                if (key !== 'constructor' && key !== 'toString' && key !== 'toSource') {\n                    createProperty(props, key);\n                }\n            }\n        }\n        // some other properties are not\n        // in NativeError\n        createProperty(props, 'originalStack');\n        createProperty(props, 'zoneAwareStack');\n        // define toString, toSource as method property\n        createMethodProperty(props, 'toString');\n        createMethodProperty(props, 'toSource');\n        return props;\n    };\n    var errorProperties = createErrorProperties();\n    // for derived Error class which extends ZoneAwareError\n    // we should not override the derived class's property\n    // so we create a new props object only copy the properties\n    // from errorProperties which not exist in derived Error's prototype\n    var getErrorPropertiesForPrototype = function (prototype) {\n        // if the prototype is ZoneAwareError.prototype\n        // we just return the prebuilt errorProperties.\n        if (prototype === ZoneAwareError.prototype) {\n            return errorProperties;\n        }\n        var newProps = Object.create(null);\n        var cKeys = Object.getOwnPropertyNames(errorProperties);\n        var keys = Object.getOwnPropertyNames(prototype);\n        cKeys.forEach(function (cKey) {\n            if (keys.filter(function (key) {\n                return key === cKey;\n            })\n                .length === 0) {\n                newProps[cKey] = errorProperties[cKey];\n            }\n        });\n        return newProps;\n    };\n    /**\n     * This is ZoneAwareError which processes the stack frame and cleans up extra frames as well as\n     * adds zone information to it.\n     */\n    function ZoneAwareError() {\n        // make sure we have a valid this\n        // if this is undefined(call Error without new) or this is global\n        // or this is some other objects, we should force to create a\n        // valid ZoneAwareError by call Object.create()\n        if (!(this instanceof ZoneAwareError)) {\n            return ZoneAwareError.apply(Object.create(ZoneAwareError.prototype), arguments);\n        }\n        // Create an Error.\n        var error = NativeError.apply(this, arguments);\n        this[__symbol__('error')] = error;\n        // Save original stack trace\n        error.originalStack = error.stack;\n        // Process the stack trace and rewrite the frames.\n        if (ZoneAwareError[stackRewrite] && error.originalStack) {\n            var frames_1 = error.originalStack.split('\\n');\n            var zoneFrame = _currentZoneFrame;\n            var i = 0;\n            // Find the first frame\n            while (frames_1[i] !== zoneAwareFrame && i < frames_1.length) {\n                i++;\n            }\n            for (; i < frames_1.length && zoneFrame; i++) {\n                var frame = frames_1[i];\n                if (frame.trim()) {\n                    var frameType = blackListedStackFrames.hasOwnProperty(frame) && blackListedStackFrames[frame];\n                    if (frameType === FrameType.blackList) {\n                        frames_1.splice(i, 1);\n                        i--;\n                    }\n                    else if (frameType === FrameType.transition) {\n                        if (zoneFrame.parent) {\n                            // This is the special frame where zone changed. Print and process it accordingly\n                            frames_1[i] += \" [\" + zoneFrame.parent.zone.name + \" => \" + zoneFrame.zone.name + \"]\";\n                            zoneFrame = zoneFrame.parent;\n                        }\n                        else {\n                            zoneFrame = null;\n                        }\n                    }\n                    else {\n                        frames_1[i] += \" [\" + zoneFrame.zone.name + \"]\";\n                    }\n                }\n            }\n            error.stack = error.zoneAwareStack = frames_1.join('\\n');\n        }\n        // use defineProperties here instead of copy property value\n        // because of issue #595 which will break angular2.\n        Object.defineProperties(this, getErrorPropertiesForPrototype(Object.getPrototypeOf(this)));\n        return this;\n    }\n    // Copy the prototype so that instanceof operator works as expected\n    ZoneAwareError.prototype = NativeError.prototype;\n    ZoneAwareError[Zone.__symbol__('blacklistedStackFrames')] = blackListedStackFrames;\n    ZoneAwareError[stackRewrite] = false;\n    if (NativeError.hasOwnProperty('stackTraceLimit')) {\n        // Extend default stack limit as we will be removing few frames.\n        NativeError.stackTraceLimit = Math.max(NativeError.stackTraceLimit, 15);\n        // make sure that ZoneAwareError has the same property which forwards to NativeError.\n        Object.defineProperty(ZoneAwareError, 'stackTraceLimit', {\n            get: function () {\n                return NativeError.stackTraceLimit;\n            },\n            set: function (value) {\n                return NativeError.stackTraceLimit = value;\n            }\n        });\n    }\n    if (NativeError.hasOwnProperty('captureStackTrace')) {\n        Object.defineProperty(ZoneAwareError, 'captureStackTrace', {\n            // add named function here because we need to remove this\n            // stack frame when prepareStackTrace below\n            value: function zoneCaptureStackTrace(targetObject, constructorOpt) {\n                NativeError.captureStackTrace(targetObject, constructorOpt);\n            }\n        });\n    }\n    Object.defineProperty(ZoneAwareError, 'prepareStackTrace', {\n        get: function () {\n            return NativeError.prepareStackTrace;\n        },\n        set: function (value) {\n            if (!value || typeof value !== 'function') {\n                return NativeError.prepareStackTrace = value;\n            }\n            return NativeError.prepareStackTrace = function (error, structuredStackTrace) {\n                // remove additional stack information from ZoneAwareError.captureStackTrace\n                if (structuredStackTrace) {\n                    for (var i = 0; i < structuredStackTrace.length; i++) {\n                        var st = structuredStackTrace[i];\n                        // remove the first function which name is zoneCaptureStackTrace\n                        if (st.getFunctionName() === 'zoneCaptureStackTrace') {\n                            structuredStackTrace.splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n                return value.apply(this, [error, structuredStackTrace]);\n            };\n        }\n    });\n    // Now we need to populet the `blacklistedStackFrames` as well as find the\n    // run/runGuraded/runTask frames. This is done by creating a detect zone and then threading\n    // the execution through all of the above methods so that we can look at the stack trace and\n    // find the frames of interest.\n    var detectZone = Zone.current.fork({\n        name: 'detect',\n        onInvoke: function (parentZoneDelegate, currentZone, targetZone, delegate, applyThis, applyArgs, source) {\n            // Here only so that it will show up in the stack frame so that it can be black listed.\n            return parentZoneDelegate.invoke(targetZone, delegate, applyThis, applyArgs, source);\n        },\n        onHandleError: function (parentZD, current, target, error) {\n            if (error.originalStack && Error === ZoneAwareError) {\n                var frames_2 = error.originalStack.split(/\\n/);\n                var runFrame = false, runGuardedFrame = false, runTaskFrame = false;\n                while (frames_2.length) {\n                    var frame = frames_2.shift();\n                    // On safari it is possible to have stack frame with no line number.\n                    // This check makes sure that we don't filter frames on name only (must have\n                    // linenumber)\n                    if (/:\\d+:\\d+/.test(frame)) {\n                        // Get rid of the path so that we don't accidintely find function name in path.\n                        // In chrome the seperator is `(` and `@` in FF and safari\n                        // Chrome: at Zone.run (zone.js:100)\n                        // Chrome: at Zone.run (http://localhost:9876/base/build/lib/zone.js:100:24)\n                        // FireFox: Zone.prototype.run@http://localhost:9876/base/build/lib/zone.js:101:24\n                        // Safari: run@http://localhost:9876/base/build/lib/zone.js:101:24\n                        var fnName = frame.split('(')[0].split('@')[0];\n                        var frameType = FrameType.transition;\n                        if (fnName.indexOf('ZoneAwareError') !== -1) {\n                            zoneAwareFrame = frame;\n                        }\n                        if (fnName.indexOf('runGuarded') !== -1) {\n                            runGuardedFrame = true;\n                        }\n                        else if (fnName.indexOf('runTask') !== -1) {\n                            runTaskFrame = true;\n                        }\n                        else if (fnName.indexOf('run') !== -1) {\n                            runFrame = true;\n                        }\n                        else {\n                            frameType = FrameType.blackList;\n                        }\n                        blackListedStackFrames[frame] = frameType;\n                        // Once we find all of the frames we can stop looking.\n                        if (runFrame && runGuardedFrame && runTaskFrame) {\n                            ZoneAwareError[stackRewrite] = true;\n                            break;\n                        }\n                    }\n                }\n            }\n            return false;\n        }\n    });\n    // carefully constructor a stack frame which contains all of the frames of interest which\n    // need to be detected and blacklisted.\n    var detectRunFn = function () {\n        detectZone.run(function () {\n            detectZone.runGuarded(function () {\n                throw new Error('blacklistStackFrames');\n            });\n        });\n    };\n    // Cause the error to extract the stack frames.\n    detectZone.runTask(detectZone.scheduleMacroTask('detect', detectRunFn, null, function () { return null; }, null));\n    return global['Zone'] = Zone;\n})(typeof window === 'object' && window || typeof self === 'object' && self || global);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Suppress closure compiler errors about unknown 'Zone' variable\n * @fileoverview\n * @suppress {undefinedVars}\n */\nvar zoneSymbol = function (n) { return \"__zone_symbol__\" + n; };\nvar _global$1 = typeof window === 'object' && window || typeof self === 'object' && self || global;\nfunction bindArguments(args, source) {\n    for (var i = args.length - 1; i >= 0; i--) {\n        if (typeof args[i] === 'function') {\n            args[i] = Zone.current.wrap(args[i], source + '_' + i);\n        }\n    }\n    return args;\n}\n\n\nvar isNode = (!('nw' in _global$1) && typeof process !== 'undefined' &&\n    {}.toString.call(process) === '[object process]');\n\n\n\n\n\nvar EVENT_TASKS = zoneSymbol('eventTasks');\n// For EventTarget\nvar ADD_EVENT_LISTENER = 'addEventListener';\nvar REMOVE_EVENT_LISTENER = 'removeEventListener';\nfunction findExistingRegisteredTask(target, handler, name, capture, remove) {\n    var eventTasks = target[EVENT_TASKS];\n    if (eventTasks) {\n        for (var i = 0; i < eventTasks.length; i++) {\n            var eventTask = eventTasks[i];\n            var data = eventTask.data;\n            var listener = data.handler;\n            if ((data.handler === handler || listener.listener === handler) &&\n                data.useCapturing === capture && data.eventName === name) {\n                if (remove) {\n                    eventTasks.splice(i, 1);\n                }\n                return eventTask;\n            }\n        }\n    }\n    return null;\n}\nfunction findAllExistingRegisteredTasks(target, name, capture, remove) {\n    var eventTasks = target[EVENT_TASKS];\n    if (eventTasks) {\n        var result = [];\n        for (var i = eventTasks.length - 1; i >= 0; i--) {\n            var eventTask = eventTasks[i];\n            var data = eventTask.data;\n            if (data.eventName === name && data.useCapturing === capture) {\n                result.push(eventTask);\n                if (remove) {\n                    eventTasks.splice(i, 1);\n                }\n            }\n        }\n        return result;\n    }\n    return null;\n}\nfunction attachRegisteredEvent(target, eventTask, isPrepend) {\n    var eventTasks = target[EVENT_TASKS];\n    if (!eventTasks) {\n        eventTasks = target[EVENT_TASKS] = [];\n    }\n    if (isPrepend) {\n        eventTasks.unshift(eventTask);\n    }\n    else {\n        eventTasks.push(eventTask);\n    }\n}\nvar defaultListenerMetaCreator = function (self, args) {\n    return {\n        useCapturing: args[2],\n        eventName: args[0],\n        handler: args[1],\n        target: self || _global$1,\n        name: args[0],\n        invokeAddFunc: function (addFnSymbol, delegate) {\n            if (delegate && delegate.invoke) {\n                return this.target[addFnSymbol](this.eventName, delegate.invoke, this.useCapturing);\n            }\n            else {\n                return this.target[addFnSymbol](this.eventName, delegate, this.useCapturing);\n            }\n        },\n        invokeRemoveFunc: function (removeFnSymbol, delegate) {\n            if (delegate && delegate.invoke) {\n                return this.target[removeFnSymbol](this.eventName, delegate.invoke, this.useCapturing);\n            }\n            else {\n                return this.target[removeFnSymbol](this.eventName, delegate, this.useCapturing);\n            }\n        }\n    };\n};\nfunction makeZoneAwareAddListener(addFnName, removeFnName, useCapturingParam, allowDuplicates, isPrepend, metaCreator) {\n    if (useCapturingParam === void 0) { useCapturingParam = true; }\n    if (allowDuplicates === void 0) { allowDuplicates = false; }\n    if (isPrepend === void 0) { isPrepend = false; }\n    if (metaCreator === void 0) { metaCreator = defaultListenerMetaCreator; }\n    var addFnSymbol = zoneSymbol(addFnName);\n    var removeFnSymbol = zoneSymbol(removeFnName);\n    var defaultUseCapturing = useCapturingParam ? false : undefined;\n    function scheduleEventListener(eventTask) {\n        var meta = eventTask.data;\n        attachRegisteredEvent(meta.target, eventTask, isPrepend);\n        return meta.invokeAddFunc(addFnSymbol, eventTask);\n    }\n    function cancelEventListener(eventTask) {\n        var meta = eventTask.data;\n        findExistingRegisteredTask(meta.target, eventTask.invoke, meta.eventName, meta.useCapturing, true);\n        return meta.invokeRemoveFunc(removeFnSymbol, eventTask);\n    }\n    return function zoneAwareAddListener(self, args) {\n        var data = metaCreator(self, args);\n        data.useCapturing = data.useCapturing || defaultUseCapturing;\n        // - Inside a Web Worker, `this` is undefined, the context is `global`\n        // - When `addEventListener` is called on the global context in strict mode, `this` is undefined\n        // see https://github.com/angular/zone.js/issues/190\n        var delegate = null;\n        if (typeof data.handler == 'function') {\n            delegate = data.handler;\n        }\n        else if (data.handler && data.handler.handleEvent) {\n            delegate = function (event) { return data.handler.handleEvent(event); };\n        }\n        var validZoneHandler = false;\n        try {\n            // In cross site contexts (such as WebDriver frameworks like Selenium),\n            // accessing the handler object here will cause an exception to be thrown which\n            // will fail tests prematurely.\n            validZoneHandler = data.handler && data.handler.toString() === '[object FunctionWrapper]';\n        }\n        catch (e) {\n            // Returning nothing here is fine, because objects in a cross-site context are unusable\n            return;\n        }\n        // Ignore special listeners of IE11 & Edge dev tools, see\n        // https://github.com/angular/zone.js/issues/150\n        if (!delegate || validZoneHandler) {\n            return data.invokeAddFunc(addFnSymbol, data.handler);\n        }\n        if (!allowDuplicates) {\n            var eventTask = findExistingRegisteredTask(data.target, data.handler, data.eventName, data.useCapturing, false);\n            if (eventTask) {\n                // we already registered, so this will have noop.\n                return data.invokeAddFunc(addFnSymbol, eventTask);\n            }\n        }\n        var zone = Zone.current;\n        var source = data.target.constructor['name'] + '.' + addFnName + ':' + data.eventName;\n        zone.scheduleEventTask(source, delegate, data, scheduleEventListener, cancelEventListener);\n    };\n}\nfunction makeZoneAwareRemoveListener(fnName, useCapturingParam, metaCreator) {\n    if (useCapturingParam === void 0) { useCapturingParam = true; }\n    if (metaCreator === void 0) { metaCreator = defaultListenerMetaCreator; }\n    var symbol = zoneSymbol(fnName);\n    var defaultUseCapturing = useCapturingParam ? false : undefined;\n    return function zoneAwareRemoveListener(self, args) {\n        var data = metaCreator(self, args);\n        data.useCapturing = data.useCapturing || defaultUseCapturing;\n        // - Inside a Web Worker, `this` is undefined, the context is `global`\n        // - When `addEventListener` is called on the global context in strict mode, `this` is undefined\n        // see https://github.com/angular/zone.js/issues/190\n        var eventTask = findExistingRegisteredTask(data.target, data.handler, data.eventName, data.useCapturing, true);\n        if (eventTask) {\n            eventTask.zone.cancelTask(eventTask);\n        }\n        else {\n            data.invokeRemoveFunc(symbol, data.handler);\n        }\n    };\n}\nfunction makeZoneAwareRemoveAllListeners(fnName, useCapturingParam) {\n    if (useCapturingParam === void 0) { useCapturingParam = true; }\n    var symbol = zoneSymbol(fnName);\n    var defaultUseCapturing = useCapturingParam ? false : undefined;\n    return function zoneAwareRemoveAllListener(self, args) {\n        var target = self || _global$1;\n        if (args.length === 0) {\n            // remove all listeners without eventName\n            target[EVENT_TASKS] = [];\n            // we don't cancel Task either, because call native eventEmitter.removeAllListeners will\n            // will do remove listener(cancelTask) for us\n            target[symbol]();\n            return;\n        }\n        var eventName = args[0];\n        var useCapturing = args[1] || defaultUseCapturing;\n        // call this function just remove the related eventTask from target[EVENT_TASKS]\n        findAllExistingRegisteredTasks(target, eventName, useCapturing, true);\n        // we don't need useCapturing here because useCapturing is just for DOM, and\n        // removeAllListeners should only be called by node eventEmitter\n        // and we don't cancel Task either, because call native eventEmitter.removeAllListeners will\n        // will do remove listener(cancelTask) for us\n        target[symbol](eventName);\n    };\n}\nfunction makeZoneAwareListeners(fnName) {\n    var symbol = zoneSymbol(fnName);\n    return function zoneAwareEventListeners(self, args) {\n        var eventName = args[0];\n        var target = self || _global$1;\n        if (!target[EVENT_TASKS]) {\n            return [];\n        }\n        return target[EVENT_TASKS]\n            .filter(function (task) { return task.data.eventName === eventName; })\n            .map(function (task) { return task.data.handler; });\n    };\n}\nvar zoneAwareAddEventListener = makeZoneAwareAddListener(ADD_EVENT_LISTENER, REMOVE_EVENT_LISTENER);\nvar zoneAwareRemoveEventListener = makeZoneAwareRemoveListener(REMOVE_EVENT_LISTENER);\n\nvar originalInstanceKey = zoneSymbol('originalInstance');\n// wrap some native API on `window`\n\n\nfunction createNamedFn(name, delegate) {\n    try {\n        return (Function('f', \"return function \" + name + \"(){return f(this, arguments)}\"))(delegate);\n    }\n    catch (e) {\n        // if we fail, we must be CSP, just return delegate.\n        return function () {\n            return delegate(this, arguments);\n        };\n    }\n}\nfunction patchMethod(target, name, patchFn) {\n    var proto = target;\n    while (proto && Object.getOwnPropertyNames(proto).indexOf(name) === -1) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    if (!proto && target[name]) {\n        // somehow we did not find it, but we can see it. This happens on IE for Window properties.\n        proto = target;\n    }\n    var delegateName = zoneSymbol(name);\n    var delegate;\n    if (proto && !(delegate = proto[delegateName])) {\n        delegate = proto[delegateName] = proto[name];\n        proto[name] = createNamedFn(name, patchFn(delegate, delegateName, name));\n    }\n    return delegate;\n}\n// TODO: support cancel task later if necessary\nfunction patchMacroTask(obj, funcName, metaCreator) {\n    var setNative = null;\n    function scheduleTask(task) {\n        var data = task.data;\n        data.args[data.callbackIndex] = function () {\n            task.invoke.apply(this, arguments);\n        };\n        setNative.apply(data.target, data.args);\n        return task;\n    }\n    setNative = patchMethod(obj, funcName, function (delegate) { return function (self, args) {\n        var meta = metaCreator(self, args);\n        if (meta.callbackIndex >= 0 && typeof args[meta.callbackIndex] === 'function') {\n            var task = Zone.current.scheduleMacroTask(meta.name, args[meta.callbackIndex], meta, scheduleTask, null);\n            return task;\n        }\n        else {\n            // cause an error by calling it directly.\n            return delegate.apply(self, args);\n        }\n    }; });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar callAndReturnFirstParam = function (fn) {\n    return function (self, args) {\n        fn(self, args);\n        return self;\n    };\n};\n// For EventEmitter\nvar EE_ADD_LISTENER = 'addListener';\nvar EE_PREPEND_LISTENER = 'prependListener';\nvar EE_REMOVE_LISTENER = 'removeListener';\nvar EE_REMOVE_ALL_LISTENER = 'removeAllListeners';\nvar EE_LISTENERS = 'listeners';\nvar EE_ON = 'on';\nvar zoneAwareAddListener$1 = callAndReturnFirstParam(makeZoneAwareAddListener(EE_ADD_LISTENER, EE_REMOVE_LISTENER, false, true, false));\nvar zoneAwarePrependListener = callAndReturnFirstParam(makeZoneAwareAddListener(EE_PREPEND_LISTENER, EE_REMOVE_LISTENER, false, true, true));\nvar zoneAwareRemoveListener$1 = callAndReturnFirstParam(makeZoneAwareRemoveListener(EE_REMOVE_LISTENER, false));\nvar zoneAwareRemoveAllListeners = callAndReturnFirstParam(makeZoneAwareRemoveAllListeners(EE_REMOVE_ALL_LISTENER, false));\nvar zoneAwareListeners = makeZoneAwareListeners(EE_LISTENERS);\nfunction patchEventEmitterMethods(obj) {\n    if (obj && obj.addListener) {\n        patchMethod(obj, EE_ADD_LISTENER, function () { return zoneAwareAddListener$1; });\n        patchMethod(obj, EE_PREPEND_LISTENER, function () { return zoneAwarePrependListener; });\n        patchMethod(obj, EE_REMOVE_LISTENER, function () { return zoneAwareRemoveListener$1; });\n        patchMethod(obj, EE_REMOVE_ALL_LISTENER, function () { return zoneAwareRemoveAllListeners; });\n        patchMethod(obj, EE_LISTENERS, function () { return zoneAwareListeners; });\n        obj[EE_ON] = obj[EE_ADD_LISTENER];\n        return true;\n    }\n    else {\n        return false;\n    }\n}\n// EventEmitter\nvar events;\ntry {\n    events = require('events');\n}\ncatch (err) {\n}\nif (events && events.EventEmitter) {\n    patchEventEmitterMethods(events.EventEmitter.prototype);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar fs;\ntry {\n    fs = require('fs');\n}\ncatch (err) {\n}\n// watch, watchFile, unwatchFile has been patched\n// because EventEmitter has been patched\nvar TO_PATCH_MACROTASK_METHODS = [\n    'access', 'appendFile', 'chmod', 'chown', 'close', 'exists', 'fchmod',\n    'fchown', 'fdatasync', 'fstat', 'fsync', 'ftruncate', 'futimes', 'lchmod',\n    'lchown', 'link', 'lstat', 'mkdir', 'mkdtemp', 'open', 'read',\n    'readdir', 'readFile', 'readlink', 'realpath', 'rename', 'rmdir', 'stat',\n    'symlink', 'truncate', 'unlink', 'utimes', 'write', 'writeFile',\n];\nif (fs) {\n    TO_PATCH_MACROTASK_METHODS.filter(function (name) { return !!fs[name] && typeof fs[name] === 'function'; })\n        .forEach(function (name) {\n        patchMacroTask(fs, name, function (self, args) {\n            return {\n                name: 'fs.' + name,\n                args: args,\n                callbackIndex: args.length > 0 ? args.length - 1 : -1,\n                target: self\n            };\n        });\n    });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction patchTimer(window, setName, cancelName, nameSuffix) {\n    var setNative = null;\n    var clearNative = null;\n    setName += nameSuffix;\n    cancelName += nameSuffix;\n    var tasksByHandleId = {};\n    function scheduleTask(task) {\n        var data = task.data;\n        data.args[0] = function () {\n            task.invoke.apply(this, arguments);\n            delete tasksByHandleId[data.handleId];\n        };\n        data.handleId = setNative.apply(window, data.args);\n        tasksByHandleId[data.handleId] = task;\n        return task;\n    }\n    function clearTask(task) {\n        delete tasksByHandleId[task.data.handleId];\n        return clearNative(task.data.handleId);\n    }\n    setNative =\n        patchMethod(window, setName, function (delegate) { return function (self, args) {\n            if (typeof args[0] === 'function') {\n                var zone = Zone.current;\n                var options = {\n                    handleId: null,\n                    isPeriodic: nameSuffix === 'Interval',\n                    delay: (nameSuffix === 'Timeout' || nameSuffix === 'Interval') ? args[1] || 0 : null,\n                    args: args\n                };\n                var task = zone.scheduleMacroTask(setName, args[0], options, scheduleTask, clearTask);\n                if (!task) {\n                    return task;\n                }\n                // Node.js must additionally support the ref and unref functions.\n                var handle = task.data.handleId;\n                if (handle.ref && handle.unref) {\n                    task.ref = handle.ref.bind(handle);\n                    task.unref = handle.unref.bind(handle);\n                }\n                return task;\n            }\n            else {\n                // cause an error by calling it directly.\n                return delegate.apply(window, args);\n            }\n        }; });\n    clearNative =\n        patchMethod(window, cancelName, function (delegate) { return function (self, args) {\n            var task = typeof args[0] === 'number' ? tasksByHandleId[args[0]] : args[0];\n            if (task && typeof task.type === 'string') {\n                if (task.cancelFn && task.data.isPeriodic || task.runCount === 0) {\n                    // Do not cancel already canceled functions\n                    task.zone.cancelTask(task);\n                }\n            }\n            else {\n                // cause an error by calling it directly.\n                delegate.apply(window, args);\n            }\n        }; });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar set = 'set';\nvar clear = 'clear';\nvar _global = typeof window === 'object' && window || typeof self === 'object' && self || global;\n// Timers\nvar timers = require('timers');\npatchTimer(timers, set, clear, 'Timeout');\npatchTimer(timers, set, clear, 'Interval');\npatchTimer(timers, set, clear, 'Immediate');\nvar shouldPatchGlobalTimers = global.setTimeout !== timers.setTimeout;\nif (shouldPatchGlobalTimers) {\n    patchTimer(_global, set, clear, 'Timeout');\n    patchTimer(_global, set, clear, 'Interval');\n    patchTimer(_global, set, clear, 'Immediate');\n}\npatchNextTick();\n// Crypto\nvar crypto;\ntry {\n    crypto = require('crypto');\n}\ncatch (err) {\n}\n// TODO(gdi2290): implement a better way to patch these methods\nif (crypto) {\n    var nativeRandomBytes_1 = crypto.randomBytes;\n    crypto.randomBytes = function randomBytesZone(size, callback) {\n        if (!callback) {\n            return nativeRandomBytes_1(size);\n        }\n        else {\n            var zone = Zone.current;\n            var source = crypto.constructor.name + '.randomBytes';\n            return nativeRandomBytes_1(size, zone.wrap(callback, source));\n        }\n    }.bind(crypto);\n    var nativePbkdf2_1 = crypto.pbkdf2;\n    crypto.pbkdf2 = function pbkdf2Zone() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var fn = args[args.length - 1];\n        if (typeof fn === 'function') {\n            var zone = Zone.current;\n            var source = crypto.constructor.name + '.pbkdf2';\n            args[args.length - 1] = zone.wrap(fn, source);\n            return nativePbkdf2_1.apply(void 0, args);\n        }\n        else {\n            return nativePbkdf2_1.apply(void 0, args);\n        }\n    }.bind(crypto);\n}\n// HTTP Client\nvar httpClient;\ntry {\n    httpClient = require('_http_client');\n}\ncatch (err) {\n}\nif (httpClient && httpClient.ClientRequest) {\n    var ClientRequest_1 = httpClient.ClientRequest.bind(httpClient);\n    httpClient.ClientRequest = function (options, callback) {\n        if (!callback) {\n            return new ClientRequest_1(options);\n        }\n        else {\n            var zone = Zone.current;\n            return new ClientRequest_1(options, zone.wrap(callback, 'http.ClientRequest'));\n        }\n    };\n}\nfunction patchNextTick() {\n    var setNative = null;\n    function scheduleTask(task) {\n        var args = task.data;\n        args[0] = function () {\n            task.invoke.apply(this, arguments);\n        };\n        setNative.apply(process, args);\n        return task;\n    }\n    setNative =\n        patchMethod(process, 'nextTick', function (delegate) { return function (self, args) {\n            if (typeof args[0] === 'function') {\n                var zone = Zone.current;\n                var task = zone.scheduleMicroTask('nextTick', args[0], args, scheduleTask);\n                return task;\n            }\n            else {\n                // cause an error by calling it directly.\n                return delegate.apply(process, args);\n            }\n        }; });\n}\n\n})));\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\n'use strict';\n\nimport * as vscode from 'vscode';\nimport { LanguageClient } from 'vscode-languageclient';\nimport { ContextKey, SLDSContext } from './../context';\n\nexport class Commands {\n\tcontext: SLDSContext;\n\toutputChannel:vscode.OutputChannel;\n\n\tconstructor(context: vscode.ExtensionContext, languageClient: LanguageClient, outputChannel: vscode.OutputChannel) {\n\t\tthis.context = new SLDSContext(context, languageClient);\n\t\tthis.outputChannel = outputChannel;\n\t}\n\n\tregister() : void {\n\t\tvscode.commands.registerCommand('slds.enable', ()=>\n\t\t\tthis.context.updateState(ContextKey.GLOBAL, true));\n\t\tvscode.commands.registerCommand('slds.disable', ()=>\n\t\t\tthis.context.updateState(ContextKey.GLOBAL, false));\n\t\tvscode.commands.registerCommand('slds.enable:density', ()=>\n\t\t\tthis.context.updateState(ContextKey.DENSITY, true));\n\t\tvscode.commands.registerCommand('slds.disable:density', ()=>\n\t\t\tthis.context.updateState(ContextKey.DENSITY,false));\n\t\tvscode.commands.registerCommand('slds.enable:utility', ()=>\n\t\t\tthis.context.updateState(ContextKey.UTILITY_CLASS, true));\n\t\tvscode.commands.registerCommand('slds.disable:utility', ()=>\n\t\t\tthis.context.updateState(ContextKey.UTILITY_CLASS, false));\n\t\tvscode.commands.registerCommand('slds.enable:bem', ()=>\n\t\t\tthis.context.updateState(ContextKey.BEM, true));\n\t\tvscode.commands.registerCommand('slds.disable:bem', ()=>\n\t\t\tthis.context.updateState(ContextKey.BEM, false));\n\t\tvscode.commands.registerCommand('slds.enable:deprecated', ()=>\n\t\t\tthis.context.updateState(ContextKey.DEPRECATED, true));\n\t\tvscode.commands.registerCommand('slds.disable:deprecated', ()=>\n\t\t\tthis.context.updateState(ContextKey.DEPRECATED, false));\n\t\tvscode.commands.registerCommand('slds.enable:invalid', ()=>\n\t\t\tthis.context.updateState(ContextKey.INVALID, true));\n\t\tvscode.commands.registerCommand('slds.disable:invalid', ()=>\n\t\t\tthis.context.updateState(ContextKey.INVALID, false));\n\t\tvscode.commands.registerCommand('slds.enable:override', ()=>\n\t\t\tthis.context.updateState(ContextKey.OVERRIDE, true));\n\t\tvscode.commands.registerCommand('slds.disable:override', ()=>\n\t\t\tthis.context.updateState(ContextKey.OVERRIDE, false));\n\t\tvscode.commands.registerCommand('slds.enable:designToken', ()=>\n\t\t\tthis.context.updateState(ContextKey.DESIGN_TOKEN, true));\n\t\tvscode.commands.registerCommand('slds.disable:designToken', ()=>\n\t\t\tthis.context.updateState(ContextKey.DESIGN_TOKEN, false));\n\t\tvscode.commands.registerCommand('slds.enable:autoSuggest', ()=>\n\t\t\tthis.context.updateState(ContextKey.AUTO_SUGGEST, true));\n\t\tvscode.commands.registerCommand('slds.disable:autoSuggest', ()=>\n\t\t\tthis.context.updateState(ContextKey.AUTO_SUGGEST, false));\n\t\tvscode.commands.registerCommand('slds.enable:scope', ()=>\n\t\t\tthis.context.updateState(ContextKey.SCOPE, true));\n\t\tvscode.commands.registerCommand('slds.disable:scope', ()=>\n\t\t\tthis.context.updateState(ContextKey.SCOPE, false));\n\t\tvscode.commands.registerCommand('slds.enable:mobileValidation', ()=>\n\t\t\tthis.context.updateState(ContextKey.SLDS_MOBILE_VALIDATION, true));\n\t\tvscode.commands.registerCommand('slds.disable:mobileValidation', ()=>\n\t\t\tthis.context.updateState(ContextKey.SLDS_MOBILE_VALIDATION, false));\n\t}\n}\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * Licensed under the BSD 3-Clause license.\n * For full license text, see LICENSE.txt file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nexport const SFDX_PROJECT_FILE = 'sfdx-project.json';\nexport const CLIENT_ID = 'sfdx-vscode';\nexport const SFDX_CORE_CONFIGURATION_NAME = 'salesforcedx-vscode-core';\nexport const STATUS_BAR_MSG_TIMEOUT_MS = 5000;\nexport const SHOW_CLI_SUCCESS_INFO_MSG = 'show-cli-success-msg';\nexport const APEX_CODE_DEBUG_LEVEL = 'FINEST';\nexport const VISUALFORCE_DEBUG_LEVEL = 'FINER';\nexport const TELEMETRY_ENABLED = 'telemetry.false';\nexport const EXTENSION_NAME = 'salesforcedx-vscode-slds';\nexport const TELEMETRY_GLOBAL_VALUE = 'sfdxTelemetryMessage';\nexport const TELEMETRY_OPT_OUT_LINK = 'https://developer.salesforce.com/tools/vscode/en/faq/telemetry';\nexport const PUSH_OR_DEPLOY_ON_SAVE_ENABLED = 'push-or-deploy-on-save.enabled';\nexport const RETRIEVE_TEST_CODE_COVERAGE = 'retrieve-test-code-coverage';\nexport const SFDX_CLI_DOWNLOAD_LINK = 'https://developer.salesforce.com/tools/sfdxcli';","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nimport * as vscode from 'vscode';\nimport { ContextKey } from './contextKey';\nimport { LanguageClient } from 'vscode-languageclient';\n\nconst CONFIG_KEY: string = 'salesforcedx-vscode-slds';\n\nconst MAPPINGS: Map<ContextKey, string> = new Map<ContextKey, string>([\n\t[ContextKey.GLOBAL, 'enabled'], \n\t[ContextKey.AUTO_SUGGEST, 'enhancements.autoSuggest'],\n\t[ContextKey.BEM, 'basic.bemNaming'],\n\t[ContextKey.DENSITY, 'enhancements.density'],\n\t[ContextKey.DEPRECATED, 'basic.deprecated'],\n\t[ContextKey.OVERRIDE, 'basic.override'],\n\t[ContextKey.DESIGN_TOKEN, 'basic.designToken'],\n\t[ContextKey.INVALID, 'basic.invalid'],\n\t[ContextKey.UTILITY_CLASS, 'enhancements.utilityClasses'],\n\t[ContextKey.SCOPE, 'file.scopeWithInSFDX'],\n\t[ContextKey.SLDS_MOBILE_VALIDATION, 'basic.mobileValidation']\n]);\n\nexport class SLDSContext {\n\tcontext: vscode.ExtensionContext;\n\tlanguageClient: LanguageClient;\n\tconfiguration: vscode.WorkspaceConfiguration;\n\n\tconstructor(context: vscode.ExtensionContext, languageClient: LanguageClient) {\n\t\tthis.context = context;\n\t\tthis.languageClient = languageClient;\n\t\tthis.configuration = vscode.workspace.getConfiguration(CONFIG_KEY);\n\n\t\tthis.upgradeContextConfiguration(context);\n\t\tthis.syncContextWithServer(MAPPINGS.keys());\n\t\tvscode.workspace.onDidChangeConfiguration((e) => this.configurationChangeHandler(e));\n\t}\n\n\tprivate upgradeContextConfiguration(context: vscode.ExtensionContext): void {\n\t\tfor (let [key] of MAPPINGS) {\n\t\t\tconst result: boolean = context.globalState.get(key);\n\t\t\tif (result !== undefined) {\n\t\t\t\tthis.updateState(key, result);\n\t\t\t\tcontext.globalState.update(key, undefined);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate configurationChangeHandler(event: vscode.ConfigurationChangeEvent) : void {\n\t\tconst keys: Array<ContextKey> = [];\n\n\t\tfor (let [key, value] of MAPPINGS) {\n\t\t\tif (event.affectsConfiguration(`${CONFIG_KEY}.${value}`)) {\n\t\t\t\tkeys.push(key);\t\t\n\t\t\t}\n\t\t}\n\n\t\tif (keys.length !== 0) {\n\t\t\tthis.syncContextWithServer(keys);\n\t\t}\n\t}\n\n\tprivate syncContextWithServer(keys: Iterable<ContextKey>): void {\n\t\tthis.languageClient.onReady().then(() => {\n\t\t\tfor (let key of keys) {\n\t\t\t\tconst contextKey: ContextKey = <ContextKey>key;\n\t\t\t\tconst value = SLDSContext.isEnable(contextKey);\n\t\t\t\tif (SLDSContext.shouldNotifyServerOfContextChange(contextKey)) {\n\t\t\t\t\tthis.languageClient.sendNotification('state/updateState', { key, value });\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}  \n\n\tpublic updateState(key: ContextKey, value: boolean) {\n\t\t//accounting for situtation where workspace is not available\n\t\tconst setGlobal: boolean = vscode.workspace.name === undefined;\n\t\tthis.configuration.update(MAPPINGS.get(key), value, setGlobal);\n\t}\n\n\tprivate static shouldNotifyServerOfContextChange(key: ContextKey): boolean {\n\t\treturn key !== ContextKey.SCOPE;\n\t}\n\n\tpublic static isEnable(...keys: ContextKey[]): boolean {\n\t\tconst workspace: vscode.WorkspaceConfiguration =  vscode.workspace.getConfiguration(CONFIG_KEY);\n\n\t\tfor (let key of keys) {\n\t\t\tconst value: boolean = workspace.get<boolean>(MAPPINGS.get(key));\n\n\t\t\tif (value === false ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t/*\n\t\t\t\tDisable Utility Class Detection\n\t\t\t\tSee Issue For More Context: https://github.com/forcedotcom/salesforcedx-slds-lsp/issues/22\n\t\t\t*/\n\t\t\tif (key === ContextKey.UTILITY_CLASS) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n}\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\n\n/**\n * This list needs to match Server's LSP ContextKey\n * Server will ignore Key's not available in the server\n */\nexport enum ContextKey {\n\tGLOBAL = \"GLOBAL\",\n\tBEM = \"BEM\",\n\tDENSITY = \"DENSITY\",\n\tDEPRECATED = \"DEPRECATED\",\n\tINVALID = \"INVALID\",\n\tOVERRIDE = \"OVERRIDE\",\n\tUTILITY_CLASS = \"UTILITY_CLASS\",\n\tDESIGN_TOKEN = \"DESIGN_TOKEN\",\n\tAUTO_SUGGEST = \"AUTO_SUGGEST\",\n\tSCOPE = \"SCOPE\",\n\tSLDS_MOBILE_VALIDATION = \"SLDS_MOBILE_VALIDATION\"\n}\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nimport {SLDSContext} from './context';\nimport {ContextKey} from './contextKey';\n\nexport {SLDSContext, ContextKey};\n\n","/*\r\n * @license\r\n * Copyright (c) 2018, salesforce.com, inc.\r\n * All rights reserved.\r\n * SPDX-License-Identifier: BSD-3-Clause\r\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\r\n */\r\n\r\n'use strict';\r\n\r\nimport * as vscode from 'vscode';\r\nimport { LanguageClient, Disposable } from 'vscode-languageclient';\r\nimport { createLanguageClient } from './sldsLanguageClient';\r\nimport * as componentsProvider from './sldsComponentsProvider';\r\nimport * as utilitiesProvider from './sldsUtilitiesProvider';\r\nimport * as varTokensProvider from './sldsVarTokensProvider';\r\nimport * as auraTokensProvider from './sldsAuraTokensProvider';\r\nimport { Commands } from './commands';\r\nimport { telemetryService } from './telemetry';\r\n\r\nconst outputChannel : vscode.OutputChannel = vscode.window.createOutputChannel(`SLDS`);\r\n\r\nexport async function activate(context: vscode.ExtensionContext) {\r\n\t// Telemetry service\r\n\tawait telemetryService.initializeService(context);\r\n\ttelemetryService.showTelemetryMessage();\r\n\tconst extensionHRStart = process.hrtime();\r\n\r\n\t// SLDS validation language client\r\n\toutputChannel.append(`Starting SLDS ... `);\r\n\tconst languageClient : LanguageClient = createLanguageClient(context, outputChannel);\r\n\tcontext.subscriptions.push(languageClient.start());\r\n\r\n\t// SLDS Commands\r\n\toutputChannel.append(`registering commands ... `);\r\n\tconst commands : Commands = new Commands(context, languageClient, outputChannel);\r\n\tcommands.register();\r\n\r\n\toutputChannel.appendLine(`registering providers`);\r\n\t// SLDS components completion provider\r\n\tlet components : Disposable = componentsProvider.register();\r\n\tcontext.subscriptions.push(components);\r\n\r\n\t// SLDS utilities completion provider\r\n\tlet utilities : Disposable = utilitiesProvider.register();\r\n\tcontext.subscriptions.push(utilities);\r\n\r\n\t// SLDS var tokens completion provider\r\n\tlet varTokens : Disposable = varTokensProvider.register();\r\n\tcontext.subscriptions.push(varTokens);\r\n\r\n\t// SLDS aura tokens completion provider\r\n\tlet auraTokens : Disposable = auraTokensProvider.register();\r\n\tcontext.subscriptions.push(auraTokens);\r\n\r\n\t// send activationEvent\r\n\ttelemetryService.sendExtensionActivationEvent(extensionHRStart);\r\n}\r\n\r\nexport function deactivate(): Thenable<void> | undefined {\r\n\ttelemetryService.sendExtensionDeactivationEvent();\r\n\treturn;\r\n}\r\n"," /*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nimport { SfdxCoreSettings } from './sfdxCoreSettings';\n\nexport const sfdxCoreSettings = SfdxCoreSettings.getInstance();\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nimport * as vscode from 'vscode';\nimport {\n\tPUSH_OR_DEPLOY_ON_SAVE_ENABLED,\n\tRETRIEVE_TEST_CODE_COVERAGE,\n\tSFDX_CORE_CONFIGURATION_NAME,\n\tSHOW_CLI_SUCCESS_INFO_MSG,\n\tTELEMETRY_ENABLED\n} from '../constants';\n/**\n * A centralized location for interacting with sfdx-core settings.\n */\nexport class SfdxCoreSettings {\n\tprivate static instance: SfdxCoreSettings;\n\n\tpublic static getInstance() {\n\t\tif (!SfdxCoreSettings.instance) {\n\t\t\tSfdxCoreSettings.instance = new SfdxCoreSettings();\n\t\t}\n\t\treturn SfdxCoreSettings.instance;\n\t}\n\n\t/**\n   * Get the configuration for a sfdx-core\n   */\n\tpublic getConfiguration(): vscode.WorkspaceConfiguration {\n\t\treturn vscode.workspace.getConfiguration(SFDX_CORE_CONFIGURATION_NAME);\n\t}\n\n\tpublic getShowCLISuccessMsg(): boolean {\n\t\treturn this.getConfigValue<boolean>(SHOW_CLI_SUCCESS_INFO_MSG, true);\n\t}\n\n\t// checks for Microsoft's telemetry setting as well as Salesforce's telemetry setting.\n\tpublic getTelemetryEnabled(): boolean {\n\t\treturn (\n\t\t\tvscode.workspace\n\t\t\t\t.getConfiguration('telemetry')\n\t\t\t\t.get<boolean>('enableTelemetry', true) &&\n\t\t\tthis.getConfigValue<boolean>(TELEMETRY_ENABLED, true)\n\t\t);\n\t}\n\n\tpublic async updateShowCLISuccessMsg(value: boolean) {\n\t\tawait this.setConfigValue(SHOW_CLI_SUCCESS_INFO_MSG, value);\n\t}\n\n\tpublic getPushOrDeployOnSaveEnabled(): boolean {\n\t\treturn this.getConfigValue<boolean>(PUSH_OR_DEPLOY_ON_SAVE_ENABLED, false);\n\t}\n\n\tpublic getRetrieveTestCodeCoverage(): boolean {\n\t\treturn this.getConfigValue(RETRIEVE_TEST_CODE_COVERAGE, false);\n\t}\n\n\tprivate getConfigValue<T>(key: string, defaultValue: T): T {\n\t\treturn this.getConfiguration().get<T>(key, defaultValue);\n\t}\n\n\tprivate async setConfigValue(key: string, value: any) {\n\t\tawait this.getConfiguration().update(key, value);\n\t}\n}\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\n'use strict';\n\nimport * as vscode from 'vscode';\nimport tokens from './data/tokens.json';\nimport {SLDSContext, ContextKey} from './context';\nimport { shouldExecuteForDocument } from './utilities';\n\nconst Kind = vscode.CompletionItemKind;\n\nconst documentSelector = { pattern: '**/*.{css}', scheme: 'file' };\nconst triggerChars = 'abcdefghijklmnopqrstuvwxyz1234567890('.split('');\nconst kindMap = {\n\t'box-shadow':\tundefined,\n\t'color':\t\tKind.Color,\n\t'font':\t\t\tKind.Text,\n\t'font-size':\tKind.Unit,\n\t'font-weight':\tKind.Unit,\n\t'number':\t\tKind.Unit,\n\t'opacity':\t\tKind.Unit,\n\t'shadow':\t\tundefined,\n\t'size':\t\t\tKind.Unit,\n\t'string':\t\tKind.Text,\n\t'text-align':\tundefined,\n\t'time':\t\t\tKind.Unit,\n\t'z-index':\t\tKind.Unit\n};\n\n// determine if current state warrants looking for completion items\n// if yes return range of text that would be replaced, if no return undefined\nfunction shouldTriggerCompletions(document: vscode.TextDocument, position: vscode.Position): vscode.Range | undefined {\n\t// must start with \"t(\", then letters and numbers, optionally ending with a closing \")\"\n\tlet triggerRange = document.getWordRangeAtPosition(position, /\\bt\\([a-z\\d]*\\)?/i);\n\treturn triggerRange;\n}\n\n// get list of completion items to display, potentially replacing the provided text range\nfunction getCompletions(range: vscode.Range): vscode.CompletionList {\n\tlet completions = Object.values(tokens)\n\t\t.filter(token => token.deprecated !== 'true')\n\t\t.map(token => {\n\t\t\tlet completionItem = new vscode.CompletionItem(token.auraToken);\n\t\t\tlet text = 't(' + token.auraToken + ')';\n\t\t\tcompletionItem.kind = kindMap[token.type] || Kind.Value;\n\t\t\tcompletionItem.filterText = text;\n\t\t\tcompletionItem.insertText = text;\n\t\t\tcompletionItem.detail = token.value;\n\t\t\tcompletionItem.documentation = [token.comment || '', '(' + token.type + ')'].join(' ');\n\t\t\tcompletionItem.range = range;\n\n\t\t\treturn completionItem;\n\t\t});\n\n\treturn new vscode.CompletionList(completions, false);\n}\n\nexport function register(): vscode.Disposable {\n\tconst provider = {\n\t\tprovideCompletionItems(document: vscode.TextDocument, position: vscode.Position, \n\t\t\ttoken: vscode.CancellationToken, context: vscode.CompletionContext) {\n\t\t\tif (!!! shouldExecuteForDocument(document.uri))  {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\n\t\t\tlet triggerRange = SLDSContext.isEnable(ContextKey.GLOBAL, ContextKey.AUTO_SUGGEST, ContextKey.DESIGN_TOKEN)\n\t\t\t\t \t? shouldTriggerCompletions(document, position) : false;\n\t\t\treturn triggerRange ? getCompletions(triggerRange) : undefined;\n\t\t}\n\t};\n\treturn vscode.languages.registerCompletionItemProvider(documentSelector, provider, ...triggerChars);\n}\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\n'use strict';\n\nimport * as vscode from 'vscode';\nimport * as components from './data/components.json';\nimport {SLDSContext, ContextKey} from \"./context\";\nimport { shouldExecuteForDocument } from './utilities';\n\nconst documentSelector = { pattern: '**/*.{cmp,haml,handlebars,htm,html,jade,jsx,php}', scheme: 'file' };\nconst triggerChars = 'abcdefghijklmnopqrstuvwxyz1234567890-_'.split('');\n\n// determine if current state warrants looking for completion items\n// if yes return range of text that would be replaced, if no return undefined\nfunction shouldTriggerCompletions(document: vscode.TextDocument, position: vscode.Position): vscode.Range | undefined {\n\t// must start with \"slds-\" plus a letter\n\tlet triggerRange = document.getWordRangeAtPosition(position, /\\bslds-[a-z][\\w-]*/i);\n\treturn triggerRange;\n}\n\n// get list of completion items to display, potentially replacing the provided text range\nfunction getCompletions(range: vscode.Range): vscode.CompletionList {\n\tlet completions = components.classes.map(cssClass => {\n\t\tlet completionItem = new vscode.CompletionItem(cssClass.selector);\n\t\tcompletionItem.kind = vscode.CompletionItemKind.Value;\n\t\tcompletionItem.detail = cssClass.component;\n\t\tcompletionItem.documentation = cssClass.summary;\n\n\t\t// some langs treat \"-\" as a word separator and so they won't replace \"slds-\" upon completion commit\n\t\t// this sets the replaced range to what we regex'd earlier so the \"slds-\" is included when replacing\n\t\tcompletionItem.range = range;\n\n\t\treturn completionItem;\n\t});\n\n\treturn new vscode.CompletionList(completions, false);\n}\n\nexport function register(): vscode.Disposable {\n\tconst provider = {\n\t\tprovideCompletionItems(document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken, context: vscode.CompletionContext) {\n\t\t\tif (!!! shouldExecuteForDocument(document.uri))  {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tlet triggerRange = SLDSContext.isEnable(ContextKey.GLOBAL, ContextKey.AUTO_SUGGEST) \n\t\t\t\t? shouldTriggerCompletions(document, position) : false;\n\t\t\treturn triggerRange ? getCompletions(triggerRange) : undefined;\n\t\t}\n\t};\n\treturn vscode.languages.registerCompletionItemProvider(documentSelector, provider, ...triggerChars);\n}\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\n'use strict';\n\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as net from 'net';\nimport * as child_process from \"child_process\";\nimport { workspace, ExtensionContext, OutputChannel } from 'vscode';\nimport { LanguageClient, LanguageClientOptions, StreamInfo } from 'vscode-languageclient';\nimport { Transform, TransformCallback } from 'stream';\nimport { shouldSendPayloadToServer } from './utilities';\n\ndeclare var v8debug: any;\nconst DEBUG = (typeof v8debug === 'object') || startedInDebugMode();\n\nconst documentSelector = [\n\t{ scheme: 'file', language: 'css' },\n\t{ scheme: 'file', language: 'html' },\n\t{ scheme: 'file', language: 'javascript' }\n];\n\nfunction startedInDebugMode(): boolean {\n\tlet args = (process as any).execArgv;\n\tif (args) {\n\t\treturn args.some((arg: string) => /^--debug=?/.test(arg) || /^--debug-brk=?/.test(arg) || /^--inspect=?/.test(arg) || /^--inspect-brk=?/.test(arg));\n\t}\n\treturn false;\n}\n\n// MIT Licensed code from: https://github.com/georgewfraser/vscode-javac\nfunction findJavaExecutable(binname: string) {\n\tbinname = correctBinname(binname);\n\t\n\t// First search if they have an existing java.home Apex setting\n\tlet javaApexConfig: string | undefined = readJavaConfig();\n\tif (javaApexConfig) {\n\t\tconst binpath = findBinPath(javaApexConfig, binname);\n\t\tif (binpath) return binpath;\n\t}\n\n\t// Then search each JAVA_HOME bin folder\n\tif (process.env['JAVA_HOME']) {\n\t\tconst binpath = findBinPath(process.env['JAVA_HOME'], binname);\n\t\tif (binpath) return binpath;\n\t}\n\n\t// Then search each JDK_HOME bin folder\n\tif (process.env['JDK_HOME']) {\n\t\tconst binpath = findBinPath(process.env['JDK_HOME'], binname);\n\t\tif (binpath) return binpath;\n\t}\n\n\t// Else return the binary name directly (this will likely always fail downstream)\n\treturn null;\n}\n\nfunction findBinPath(config: string, binname: string) {\n\tlet workspaces = config.split(path.delimiter);\n\n\tfor (let i = 0; i < workspaces.length; i++) {\n\t\tlet binpath = path.join(workspaces[i], 'bin', binname);\n\t\tif (fs.existsSync(binpath)) {\n\t\t\treturn binpath;\n\t\t}\n\t}\n\n\treturn null;\n}\n\nfunction readJavaConfig(): string {\n\tconst config = workspace.getConfiguration();\n\t// console.log(config.get<string>('salesforcedx-vscode-slds.java.home', ''));\n\treturn config.get<string>('salesforcedx-vscode-apex.java.home', '');\n}\n\nfunction correctBinname(binname: string) {\n\tif (process.platform === 'win32')\n\t\treturn binname + '.exe';\n\telse\n\t\treturn binname;\n}\n\nfunction createServerOptions(context: ExtensionContext, outputChannel: OutputChannel): () => Promise<StreamInfo> {\n\treturn createServerPromise.bind(this, context, outputChannel);\n}\n\nfunction createServerPromise(context: ExtensionContext, outputChannel: OutputChannel): Promise<StreamInfo> {\n\treturn new Promise((resolve, reject) => {\n\t\tvar server = net.createServer((socket) => {\n\t\t\toutputChannel.appendLine(\"SLDS Started\");\n\n\t\t\tconst matcher = /(\"character\":1.7976931348623157e\\+308)/;\n\t\t\tconst javaMaxIntValue = 2147483647;\n\t\t\tconst replacer = '\"character\":' + javaMaxIntValue + '}}';\n\t\t\t\n\t\t\t// Temporary solution for an LWC plugin issue where the end character range is too large for SLDS LSP server.\n\t\t\tlet filteredDuplex = new class extends Transform {\n\t\t\t\t\n\t\t\t\tprivate data: Array<Buffer> = [];\n\n\t\t\t\t_transform(chunk: Buffer, encoding: string, callback: TransformCallback) {\n\t\t\t\t\tconst contentLength = /^Content-Length: /;\n\t\t\t\t\tlet buf: string = Buffer.from(chunk).toString();\n\n\t\t\t\t\t/*\n\t\t\t\t\t\tJSONRPC send 2 types of messages:\n\t\t\t\t\t\t1. Header - indicates Content Length\n\t\t\t\t\t\t2. Payload\n\t\t\t\t\t*/\n\t\t\t\t\tif (contentLength.test(buf)) {\n\t\t\t\t\t\t//content length triggers reset\n\t\t\t\t\t\tthis.data = [];\n\t\t\t\t\t\tthis.data.push(chunk);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst sendData: boolean = shouldSendPayloadToServer(buf);\n\n\t\t\t\t\t\tif (sendData) {\n\t\t\t\t\t\t\tbuf = buf.replace(matcher, replacer);\n\t\t\t\t\t\t\tthis.data.push(Buffer.from(buf));\n\t\t\t\t\t\t\tthis.data.forEach((item)=> this.push(item, encoding));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t} ();\n\n\t\t\tfilteredDuplex.pipe(socket);\n\n\t\t\tresolve({\n\t\t\t\treader: socket,\n\t\t\t\twriter: filteredDuplex\n\t\t\t});\n\t\t})\n\t\t.on('end', () => console.log(\"Disconnected\"))\n\t\t.on('error', (err) => {\n\t\t\t// handle errors here\n\t\t\toutputChannel.appendLine(\"SLDS failed to start\");\n\t\t\tthrow err;\n\t\t});\n\n\t\tlet javaExecutablePath = findJavaExecutable('java');\n\n\t\t// grab a random port.\n\t\tserver.listen(() => {\n\t\t\t// Start the child java process\n\t\t\tlet options = { cwd: workspace.rootPath };\n\n\t\t\tconst { port } = server.address() as net.AddressInfo;\n\t\t\tconsole.log(`Listening on port ${port}`);\n\n\t\t\tlet args = [];\n\t\t\t\n\t\t\tif (DEBUG) {\n\t\t\t\targs.push('-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=1044');\n\t\t\t\t// suspend=y is the default. Use this form if you need to debug the server startup code:\n\t\t\t\t//  params.push('-agentlib:jdwp=transport=dt_socket,server=y,address=1044');\n\t\t\t}\n\n\t\t\targs.push('-jar');\n\t\t\targs.push(path.resolve(context.extensionPath, 'lsp-0.0.13-executable.jar'));\n\t\t\targs.push(`--PORT=${port.toString()}`);\n\n\t\t\tlet process = child_process.spawn(javaExecutablePath, args, options);\n\n\t\t\tconst storagePath: string = context.storagePath ? context.storagePath : context.globalStoragePath;\n\t\t\tif (!fs.existsSync(storagePath)) {\n\t\t\t\tfs.mkdirSync(storagePath);\n\t\t\t}\n\n\t\t\tconst logFile: string = `${storagePath}/slds-extension.log`;\n\t\t\tlet logStream = fs.createWriteStream(logFile, { flags: 'w' });\n\n\t\t\tprocess.stdout.pipe(logStream);\n\t\t\tprocess.stderr.pipe(logStream);\n\n\t\t\toutputChannel.appendLine(`Storing LSP server log in '${logFile}'`);\n\t\t});\n\t});\n}\n\nfunction createClientOptions(outputChannel: OutputChannel): LanguageClientOptions {\n\t// Options to control the language client\n\treturn {\n\t\tdocumentSelector: documentSelector,\n\t\toutputChannel: outputChannel,\n\t\tsynchronize: {\n\t\t\tfileEvents: [\n\t\t\t\tworkspace.createFileSystemWatcher('**/*.[cmp,html,js,css,app]')\n\t\t\t]\n\t\t}\n\t};\n}\n\nexport function createLanguageClient(context: ExtensionContext, outputChannel: OutputChannel): LanguageClient {\n\tlet serverOptions = createServerOptions(context, outputChannel);\n\tlet clientOptions = createClientOptions(outputChannel);\n\tlet client = new LanguageClient('sldsValidation', 'SLDS Validation', serverOptions, clientOptions);\n\treturn client;\n}\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\n'use strict';\n\nimport * as vscode from 'vscode';\nimport * as utilities from './data/utilities.json';\nimport { SLDSContext, ContextKey} from './context';\nimport { shouldExecuteForDocument } from './utilities';\n\nconst documentSelector = { pattern: '**/*.{cmp,haml,handlebars,htm,html,jade,jsx,php}', scheme: 'file' };\nconst triggerChars = 'abcdefghijklmnopqrstuvwxyz1234567890-_'.split('');\n\n// determine if current state warrants looking for completion items\n// if yes return range of text that would be replaced, if no return undefined\nfunction shouldTriggerCompletions(document: vscode.TextDocument, position: vscode.Position): vscode.Range | undefined {\n\t// must start with \"slds-\"\n\tlet triggerRange = document.getWordRangeAtPosition(position, /\\bslds-[\\w-]*/i);\n\treturn triggerRange;\n}\n\n// get list of completion items to display, potentially replacing the provided text range\nfunction getCompletions(range: vscode.Range): vscode.CompletionList {\n\tlet completions = utilities.classes.map(cssClass => {\n\t\tlet completionItem = new vscode.CompletionItem(cssClass.selector);\n\t\tcompletionItem.kind = vscode.CompletionItemKind.Value;\n\t\tcompletionItem.detail = cssClass.component;\n\t\tcompletionItem.documentation = cssClass.summary;\n\n\t\t// some langs treat \"-\" as a word separator and so they won't replace \"slds-\" upon completion commit\n\t\t// this sets the replaced range to what we regex'd earlier so the \"slds-\" is included when replacing\n\t\tcompletionItem.range = range;\n\n\t\treturn completionItem;\n\t});\n\n\treturn new vscode.CompletionList(completions, false);\n}\n\nexport function register(): vscode.Disposable {\n\tconst provider = {\n\t\tprovideCompletionItems(document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken, context: vscode.CompletionContext) {\n\t\t\tif (!!! shouldExecuteForDocument(document.uri))  {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\t\n\t\t\tlet triggerRange = \n\t\t\t\tSLDSContext.isEnable(ContextKey.GLOBAL, ContextKey.AUTO_SUGGEST) \n\t\t\t\t\t? shouldTriggerCompletions(document, position) : false;\n\t\t\treturn triggerRange ? getCompletions(triggerRange) : undefined;\n\t\t}\n\t};\n\treturn vscode.languages.registerCompletionItemProvider(documentSelector, provider, ...triggerChars);\n}\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\n'use strict';\n\nimport * as vscode from 'vscode';\nimport tokens from './data/tokens.json';\nimport {SLDSContext, ContextKey} from './context';\nimport { shouldExecuteForDocument } from './utilities';\n\nconst Kind = vscode.CompletionItemKind;\n\nconst documentSelector = { pattern: '**/*.{css,less,sass,scss}', scheme: 'file' };\nconst triggerChars = 'abcdefghijklmnopqrstuvwxyz1234567890(-'.split('');\nconst kindMap = {\n\t'box-shadow':\tundefined,\n\t'color':\t\tKind.Color,\n\t'font':\t\t\tKind.Text,\n\t'font-size':\tKind.Unit,\n\t'font-weight':\tKind.Unit,\n\t'number':\t\tKind.Unit,\n\t'opacity':\t\tKind.Unit,\n\t'shadow':\t\tundefined,\n\t'size':\t\t\tKind.Unit,\n\t'string':\t\tKind.Text,\n\t'text-align':\tundefined,\n\t'time':\t\t\tKind.Unit,\n\t'z-index':\t\tKind.Unit\n};\n\n// determine if current state warrants looking for completion items\n// if yes return range of text that would be replaced, if no return undefined\nfunction shouldTriggerCompletions(document: vscode.TextDocument, position: vscode.Position): vscode.Range | undefined {\n\t// must start with \"var(--lwc-\", then letters and numbers, optionally ending with a closing \")\"\n\tlet triggerRange = document.getWordRangeAtPosition(position, /\\bvar\\(--lwc-[a-z\\d]*\\)?/i);\n\treturn triggerRange;\n}\n\n// get list of completion items to display, potentially replacing the provided text range\nfunction getCompletions(range: vscode.Range): vscode.CompletionList {\n\tlet completions = Object.values(tokens)\n\t\t.filter(token => token.deprecated !== 'true')\n\t\t.map(token => {\n\t\t\tlet completionItem = new vscode.CompletionItem(token.auraToken);\n\t\t\tlet text = 'var(--lwc-' + token.auraToken + ')';\n\t\t\tcompletionItem.kind = kindMap[token.type] || Kind.Value;\n\t\t\tcompletionItem.filterText = text;\n\t\t\tcompletionItem.insertText = text;\n\t\t\tcompletionItem.detail = token.value;\n\t\t\tcompletionItem.documentation = [token.comment || '', '(' + token.type + ')'].join(' ');\n\t\t\tcompletionItem.range = range;\n\n\t\t\treturn completionItem;\n\t\t});\n\n\treturn new vscode.CompletionList(completions, false);\n}\n\nexport function register(): vscode.Disposable {\n\tconst provider = {\n\t\tprovideCompletionItems(document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken, context: vscode.CompletionContext) {\n\t\t\tif (!!! shouldExecuteForDocument(document.uri))  {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tlet triggerRange = SLDSContext.isEnable(ContextKey.GLOBAL, ContextKey.AUTO_SUGGEST, ContextKey.DESIGN_TOKEN)\n\t\t\t\t? shouldTriggerCompletions(document, position): false;\n\t\t\treturn triggerRange ? getCompletions(triggerRange) : undefined;\n\t\t}\n\t};\n\treturn vscode.languages.registerCompletionItemProvider(documentSelector, provider, ...triggerChars);\n}\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nimport * as path from 'path';\nimport { TelemetryService } from './telemetry';\nimport { ENV_SFDX_CLI_DISABLE_TELEMETRY, getRootWorkspacePath, SFDX_CONFIG_DISABLE_TELEMETRY } from './utils';\nimport * as fs from 'fs';\nconst homedir = require('os').homedir();\n\nexport const isCLITelemetryAllowed = async (): Promise<boolean> => {\n\ttry {\n\t\tconst disabledConfig =\n\t\t\t(await getConfigValue(SFDX_CONFIG_DISABLE_TELEMETRY)) || '';\n\t\treturn disabledConfig !== 'true';\n\t} catch (e) {\n\t\tconsole.log('Error checking cli settings: ' + e);\n\t}\n\treturn true;\n};\n\nconst getConfigValue = async (key: string): Promise<any | undefined> => {\n\ttry {\n\t\t//workspace configuration\n\t\tconst workspacePath: string = getRootWorkspacePath();\n\t\tconst localConfigPath: string = path.join(workspacePath, '.sfdx', 'sfdx-config.json');\n\t\tif (fs.existsSync(localConfigPath)) {\n\t\t\tconst myLocalConfig: Buffer = fs.readFileSync(localConfigPath);\n\t\t\tconst localValue = JSON.parse(myLocalConfig.toString())[SFDX_CONFIG_DISABLE_TELEMETRY];\n\t\t\tif (localValue != null && localValue != undefined) {\n\t\t\t\treturn localValue;\n\t\t\t}\n\t\t}\n\t} catch (err) {\n\t\tTelemetryService.getInstance()\n\t\t\t.sendException('get_config_value_local', err.message);\n\t\treturn undefined;\n\t}\n\ttry {\n\t\t//environment configuration\n\t\tconst envValue = process.env[ENV_SFDX_CLI_DISABLE_TELEMETRY];\n\t\tif (envValue != null && envValue != undefined) {\n\t\t\treturn envValue;\n\t\t}\n\n\t\t//global configuration\n\t\tconst globalPath: string = path.join(homedir, '.sfdx', 'sfdx-config.json');\n\t\tif (fs.existsSync(globalPath)) {\n\t\t\tconst globalConfig: Buffer = fs.readFileSync(globalPath);\n\t\t\tconst globalValue = JSON.parse(globalConfig.toString())[SFDX_CONFIG_DISABLE_TELEMETRY];\n\t\t\tif (globalValue != null && globalValue != undefined) {\n\t\t\t\treturn globalValue;\n\t\t\t}\n\t\t}\n\t} catch (err) {\n\t\tTelemetryService.getInstance()\n\t\t\t.sendException('get_config_value_global', err.message);\n\t\treturn undefined;\n\t}\n\treturn undefined;\n};","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nimport { TelemetryService } from './telemetry';\n\nexport const telemetryService = TelemetryService.getInstance();\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nimport vscode = require('vscode');\nimport util = require('util');\nimport { sfdxCoreSettings } from '../settings';\nimport TelemetryReporter from './telemetryReporter';\nimport {\n\tTELEMETRY_GLOBAL_VALUE,\n\tEXTENSION_NAME,\n\tTELEMETRY_OPT_OUT_LINK\n} from '../constants';\nimport { isCLITelemetryAllowed } from './cliConfiguration';\n\nexport class TelemetryService {\n\tprivate static instance: TelemetryService;\n\tprivate context: vscode.ExtensionContext | undefined;\n\tprivate reporter: TelemetryReporter | undefined;\n\tprivate cliAllowsTelemetry: boolean = true;\n\n\tpublic static getInstance() {\n\t\tif (!TelemetryService.instance) {\n\t\t\tTelemetryService.instance = new TelemetryService();\n\t\t}\n\t\treturn TelemetryService.instance;\n\t}\n\n\tpublic async initializeService(context: vscode.ExtensionContext): Promise<void> {\n\t\tthis.context = context;\n\t\tthis.cliAllowsTelemetry = await isCLITelemetryAllowed();\n\t\tconst machineId = vscode && vscode.env ? vscode.env.machineId : 'someValue.machineId';\n\t\tconst isDevMode = machineId === 'someValue.machineId';\n\n\t\t// TelemetryReporter is not initialized if user has disabled telemetry setting.\n\t\tif (this.reporter === undefined && this.isTelemetryEnabled() && !isDevMode) {\n\t\t\tthis.reporter = new TelemetryReporter(process.env.PACKAGE_NAME, \n\t\t\t\tprocess.env.PACKAGE_VERSION, process.env.PACKAGE_AI_KEY, true);\n\n\t\t\tthis.context.subscriptions.push(this.reporter);\n\t\t}\n\t}\n\n\tpublic isTelemetryEnabled(): boolean {\n\t\treturn sfdxCoreSettings.getTelemetryEnabled() && this.cliAllowsTelemetry;\n\t}\n\n\tprivate getHasTelemetryMessageBeenShown(): boolean {\n\t\tif (this.context === undefined) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst sfdxTelemetryState = this.context.globalState.get(TELEMETRY_GLOBAL_VALUE);\n\n\t\treturn typeof sfdxTelemetryState === 'undefined';\n\t}\n\n\tprivate setTelemetryMessageShowed(): void {\n\t\tif (this.context === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.context.globalState.update(TELEMETRY_GLOBAL_VALUE, true);\n\t}\n\n\tpublic showTelemetryMessage() {\n\t\t// check if we've ever shown Telemetry message to user\n\t\tconst showTelemetryMessage = this.getHasTelemetryMessageBeenShown();\n\n\t\tif (showTelemetryMessage) {\n\t\t\t// Show the message and set telemetry to true;\n\t\t\tconst showButtonText = 'Read more';//nls.localize('telemetry_legal_dialog_button_text');\n\t\t\tconst showMessage =  util.format('You agree that Salesforce Extensions for VS Code may collect usage information, user environment, and crash reports for product improvements. Learn how to [opt out](%s).',TELEMETRY_OPT_OUT_LINK);\n\t\t\tvscode.window\n\t\t\t\t.showInformationMessage(showMessage, showButtonText)\n\t\t\t\t.then(selection => {\n\t\t\t\t\t// Open disable telemetry link\n\t\t\t\t\tif (selection && selection === showButtonText) {\n\t\t\t\t\t\tvscode.commands.executeCommand(\n\t\t\t\t\t\t\t'vscode.open',\n\t\t\t\t\t\t\tvscode.Uri.parse(TELEMETRY_OPT_OUT_LINK)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis.setTelemetryMessageShowed();\n\t\t}\n\t}\n\n\tpublic sendExtensionActivationEvent(hrstart: [number, number]): void {\n\t\tif (this.reporter !== undefined && this.isTelemetryEnabled) {\n\t\t\tconst startupTime = this.getEndHRTime(hrstart);\n\t\t\tthis.reporter.sendTelemetryEvent('activationEvent', {\n\t\t\t\textensionName: EXTENSION_NAME,\n\t\t\t\tstartupTime: startupTime\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic sendExtensionDeactivationEvent(): void {\n\t\tif (this.reporter !== undefined && this.isTelemetryEnabled()) {\n\t\t\tthis.reporter.sendTelemetryEvent('deactivationEvent', {\n\t\t\t\textensionName: EXTENSION_NAME\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic sendError(errorMsg: string): void {\n\t\tif (this.reporter !== undefined && this.isTelemetryEnabled) {\n\t\t\tthis.reporter.sendTelemetryEvent('coreError', {\n\t\t\t\textensionName: EXTENSION_NAME,\n\t\t\t\terrorMessage: errorMsg\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic sendEventData(\n\t\teventName: string,\n\t\tproperties?: { [key: string]: string },\n\t\tmeasures?: { [key: string]: number }\n\t): void {\n\t\tif (this.reporter !== undefined && this.isTelemetryEnabled) {\n\t\t\tthis.reporter.sendTelemetryEvent(eventName, properties, measures);\n\t\t}\n\t}\n\n\tpublic sendException(name: string, message: string): void {\n\t\tif (this.reporter !== undefined && this.isTelemetryEnabled) {\n\t\t\tthis.reporter.sendExceptionEvent(name, message);\n\t\t}\n\t}\n\n\tpublic sendErrorEvent(errorMsg: string, callstack: string): void {\n\t\tif (this.reporter !== undefined && this.isTelemetryEnabled) {\n\t\t\tthis.reporter.sendTelemetryEvent('error', {\n\t\t\t\textensionName: EXTENSION_NAME,\n\t\t\t\terrorMessage: errorMsg,\n\t\t\t\terrorStack: callstack\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this.reporter !== undefined) {\n\t\t\tthis.reporter.dispose().catch(err => console.log(err));\n\t\t}\n\t}\n\n\tprivate getEndHRTime(hrstart: [number, number]): string {\n\t\tconst hrend = process.hrtime(hrstart);\n\t\treturn util.format('%d%d', hrend[0], hrend[1] / 1000000);\n\t}\n}","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\n\n'use strict';\n\nimport * as appInsights from 'applicationinsights';\nimport * as fs from 'fs';\nimport * as os from 'os';\nimport * as path from 'path';\nimport * as vscode from 'vscode';\n\nexport default class TelemetryReporter extends vscode.Disposable {\n\tprivate appInsightsClient: appInsights.TelemetryClient | undefined;\n\tprivate userOptIn: boolean = false;\n\tprivate toDispose: vscode.Disposable[] = [];\n\tprivate uniqueUserMetrics: boolean = false;\n\n\tprivate static TELEMETRY_CONFIG_ID = 'telemetry';\n\tprivate static TELEMETRY_CONFIG_ENABLED_ID = 'enableTelemetry';\n\n\tprivate logStream: fs.WriteStream | undefined;\n\n\tconstructor(\n\t\tprivate extensionId: string,\n\t\tprivate extensionVersion: string,\n\t\tkey: string,\n\t\tenableUniqueMetrics?: boolean\n\t) {\n\t\tsuper(() => this.toDispose.forEach(d => d && d.dispose()));\n\t\tlet logFilePath = process.env['VSCODE_LOGS'] || '';\n\t\tif (\n\t\t\tlogFilePath &&\n\t\t\textensionId &&\n\t\t\tprocess.env['VSCODE_LOG_LEVEL'] === 'trace'\n\t\t) {\n\t\t\tlogFilePath = path.join(logFilePath, `${extensionId}.txt`);\n\t\t\tthis.logStream = fs.createWriteStream(logFilePath, {\n\t\t\t\tflags: 'a',\n\t\t\t\tencoding: 'utf8',\n\t\t\t\tautoClose: true\n\t\t\t});\n\t\t}\n\t\tif (enableUniqueMetrics) {\n\t\t\tthis.uniqueUserMetrics = true;\n\t\t}\n\t\tthis.updateUserOptIn(key);\n\t\tthis.toDispose.push(\n\t\t\tvscode.workspace.onDidChangeConfiguration(() => this.updateUserOptIn(key))\n\t\t);\n\t}\n\n\tprivate updateUserOptIn(key: string): void {\n\t\tconst config = vscode.workspace.getConfiguration(\n\t\t\tTelemetryReporter.TELEMETRY_CONFIG_ID\n\t\t);\n\t\tif (\n\t\t\tthis.userOptIn !==\n\t\t\tconfig.get<boolean>(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true)\n\t\t) {\n\t\t\tthis.userOptIn = config.get<boolean>(\n\t\t\t\tTelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tif (this.userOptIn) {\n\t\t\t\tthis.createAppInsightsClient(key);\n\t\t\t} else {\n\t\t\t\t// tslint:disable-next-line:no-floating-promises\n\t\t\t\tthis.dispose();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate createAppInsightsClient(key: string) {\n\t\t// check if another instance is already initialized\n\t\tif (appInsights.defaultClient) {\n\t\t\tthis.appInsightsClient = new appInsights.TelemetryClient(key);\n\t\t\t// no other way to enable offline mode\n\t\t\tthis.appInsightsClient.channel.setUseDiskRetryCaching(true);\n\t\t} else {\n\t\t\tappInsights\n\t\t\t\t.setup(key)\n\t\t\t\t.setAutoCollectRequests(false)\n\t\t\t\t.setAutoCollectPerformance(false)\n\t\t\t\t.setAutoCollectExceptions(false)\n\t\t\t\t.setAutoCollectDependencies(false)\n\t\t\t\t.setAutoDependencyCorrelation(false)\n\t\t\t\t.setAutoCollectConsole(false)\n\t\t\t\t.setUseDiskRetryCaching(true)\n\t\t\t\t.start();\n\t\t\tthis.appInsightsClient = appInsights.defaultClient;\n\t\t}\n\n\t\tthis.appInsightsClient.commonProperties = this.getCommonProperties();\n\t\tif (this.uniqueUserMetrics && vscode && vscode.env) {\n\t\t\tthis.appInsightsClient.context.tags['ai.user.id'] = vscode.env.machineId;\n\t\t\tthis.appInsightsClient.context.tags['ai.session.id'] =\n\t\t\t\tvscode.env.sessionId;\n\t\t}\n\n\t\t// check if it's an Asimov key to change the endpoint\n\t\tif (key && key.indexOf('AIF-') === 0) {\n\t\t\tthis.appInsightsClient.config.endpointUrl =\n\t\t\t\t'https://vortex.data.microsoft.com/collect/v1';\n\t\t}\n\t}\n\n\tprivate getCommonProperties(): { [key: string]: string } {\n\t\tconst commonProperties = Object.create(null);\n\t\tcommonProperties['common.os'] = os.platform();\n\t\tcommonProperties['common.platformversion'] = (os.release() || '').replace(\n\t\t\t/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/,\n\t\t\t'$1$2$3'\n\t\t);\n\t\tconst cpus = os.cpus();\n\t\tif (cpus && cpus.length > 0) {\n\t\t\tcommonProperties['common.cpus'] = `${cpus[0].model}(${cpus.length} x ${cpus[0].speed\n\t\t\t\t})`;\n\t\t}\n\t\tcommonProperties['common.systemmemory'] = `${(\n\t\t\tos.totalmem() /\n\t\t\t(1024 * 1024 * 1024)\n\t\t).toFixed(2)} GB`;\n\t\tcommonProperties['common.extname'] = this.extensionId;\n\t\tcommonProperties['common.extversion'] = this.extensionVersion;\n\t\tif (vscode && vscode.env) {\n\t\t\tcommonProperties['common.vscodemachineid'] = vscode.env.machineId;\n\t\t\tcommonProperties['common.vscodesessionid'] = vscode.env.sessionId;\n\t\t\tcommonProperties['common.vscodeversion'] = vscode.version;\n\t\t}\n\t\treturn commonProperties;\n\t}\n\n\tpublic sendTelemetryEvent(\n\t\teventName: string,\n\t\tproperties?: { [key: string]: string },\n\t\tmeasurements?: { [key: string]: number }\n\t): void {\n\t\tif (this.userOptIn && eventName && this.appInsightsClient) {\n\t\t\tthis.appInsightsClient.trackEvent({\n\t\t\t\tname: `${this.extensionId}/${eventName}`,\n\t\t\t\t// tslint:disable-next-line:object-literal-shorthand\n\t\t\t\tproperties: properties,\n\t\t\t\t// tslint:disable-next-line:object-literal-shorthand\n\t\t\t\tmeasurements: measurements\n\t\t\t});\n\n\t\t\tif (this.logStream) {\n\t\t\t\tthis.logStream.write(\n\t\t\t\t\t`telemetry/${eventName} ${JSON.stringify({\n\t\t\t\t\t\tproperties,\n\t\t\t\t\t\tmeasurements\n\t\t\t\t\t})}\\n`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic sendExceptionEvent(\n\t\texceptionName: string,\n\t\texceptionMessage: string,\n\t\tmeasurements?: { [key: string]: number }): void {\n\t\tif (this.userOptIn && exceptionMessage && this.appInsightsClient) {\n\t\t\tconst error = new Error();\n\t\t\terror.name = `${this.extensionId}/${exceptionName}`;\n\t\t\terror.message = exceptionMessage;\n\t\t\terror.stack = 'DEPRECATED';\n\n\t\t\tthis.appInsightsClient.trackException({\n\t\t\t\texception: error,\n\t\t\t\tmeasurements\n\t\t\t});\n\n\t\t\tif (this.logStream) {\n\t\t\t\tthis.logStream.write(\n\t\t\t\t\t`telemetry/${exceptionName} ${JSON.stringify({\n\t\t\t\t\t\tmeasurements\n\t\t\t\t\t})}\\n`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic dispose(): Promise<any> {\n\t\tconst flushEventsToLogger = new Promise<any>(resolve => {\n\t\t\tif (!this.logStream) {\n\t\t\t\treturn resolve(void 0);\n\t\t\t}\n\t\t\tthis.logStream.on('finish', resolve);\n\t\t\tthis.logStream.end();\n\t\t});\n\n\t\tconst flushEventsToAI = new Promise<any>(resolve => {\n\t\t\tif (this.appInsightsClient) {\n\t\t\t\tthis.appInsightsClient.flush({\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t// all data flushed\n\t\t\t\t\t\tthis.appInsightsClient = undefined;\n\t\t\t\t\t\tresolve(void 0);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresolve(void 0);\n\t\t\t}\n\t\t});\n\t\treturn Promise.all([flushEventsToAI, flushEventsToLogger]);\n\t}\n}\n","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\nimport { workspace, WorkspaceFolder } from \"vscode\";\n\nexport const SFDX_CONFIG_DISABLE_TELEMETRY = 'disableTelemetry';\nexport const ENV_SFDX_CLI_DISABLE_TELEMETRY = 'SFDX_DISABLE_TELEMETRY';\n\nfunction hasRootWorkspace(ws: typeof workspace = workspace) {\n\t\treturn ws && ws.workspaceFolders && ws.workspaceFolders.length > 0;\n\t}\n\nfunction getRootWorkspace(): WorkspaceFolder {\n\t\treturn hasRootWorkspace()\n\t\t\t? workspace.workspaceFolders![0]\n\t\t\t: ({} as WorkspaceFolder);\n\t}\n\t\n\texport function getRootWorkspacePath(): string {\n\t\treturn getRootWorkspace().uri ? getRootWorkspace().uri.fsPath : '';\n\t}","/*\n * @license\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nimport * as vscode from 'vscode';\nimport { ContextKey, SLDSContext } from './context';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\nexport const shouldExecuteForDocument = (uri: vscode.Uri): \n\t\tboolean => {\n\t\tif (SLDSContext.isEnable(ContextKey.SCOPE)) {\n\t\t\t\tif (uri.scheme === 'file') {\n\t\t\t\t\t\tconst filePath: Array<string> = uri.fsPath.split(path.sep);\n\t\t\t\t\t\tconst locationOfForceApp: number = filePath.indexOf('force-app');\n\n\t\t\t\t\t\tif (locationOfForceApp !== -1) {\n\t\t\t\t\t\t\t\treturn fs.existsSync(\n\t\t\t\t\t\t\t\t\t\tpath.resolve(path.sep, ...filePath.slice(0, locationOfForceApp), `sfdx-project.json`));\n\t\t\t\t\t\t} \n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n};\n\nexport const shouldSendPayloadToServer = (payload: string) : boolean => {\n\t\tif (SLDSContext.isEnable(ContextKey.SCOPE)) {\n\t\t\t\tconst result = payload.match(/\"method\":\"textDocument\\/\\w+\".+\"textDocument\":{\"uri\":\"([^\"]+)\"/);\n\n\t\t\t\tif (result) {\n\t\t\t\t\t\tconst textDocument: string = result[1];\n\t\t\t\t\t\treturn shouldExecuteForDocument(vscode.Uri.parse(textDocument));\n\t\t\t\t}\n\t\t}\n\n\t\treturn true;\n};","module.exports = require(\"child_process\");;","module.exports = require(\"console\");;","module.exports = require(\"constants\");;","module.exports = require(\"crypto\");;","module.exports = require(\"events\");;","module.exports = require(\"fs\");;","module.exports = require(\"http\");;","module.exports = require(\"https\");;","module.exports = require(\"module\");;","module.exports = require(\"net\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"stream\");;","module.exports = require(\"timers\");;","module.exports = require(\"url\");;","module.exports = require(\"util\");;","module.exports = require(\"vscode\");;","module.exports = require(\"zlib\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(4839);\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}