module.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=33)}({0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(19),i=n(7);t.nls=new o.Localization(function(e){const t=new o.Message(i.messages);if(!e||!e.locale||e.locale===o.DEFAULT_LOCALE)return t;try{return new o.Message(n(34)("./"+(s=e.locale,s===o.DEFAULT_LOCALE?`${o.BASE_FILE_NAME}.${o.BASE_FILE_EXTENSION}`:`${o.BASE_FILE_NAME}.${s}.${o.BASE_FILE_EXTENSION}`)).messages,t)}catch(n){return console.error(`Cannot find ${e.locale}, defaulting to en`),t}var s}(function(){const e=process.env.VSCODE_NLS_CONFIG;return e?JSON.parse(e):null}()))},11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messages={sfdx_cli_not_found:"Salesforce CLI がインストールされていません。[%s](%s) からインストールしてください。",telemetry_legal_dialog_message:"VS Code の Salesforce 拡張機能が製品の改善のために、利用状況、ユーザ環境、クラッシュレポートを収集することに同意しました。[オプトアウトの方法について参照する](%s)。",telemetry_legal_dialog_button_text:"さらに表示",progress_notification_text:"%s を実行しています。",notification_successful_execution_text:"%s が正常に実行されました。",notification_canceled_execution_text:"%s がキャンセルされました。",notification_unsuccessful_execution_text:"%s が失敗しました。",notification_show_button_text:"表示",notification_show_in_status_bar_button_text:"ステータスバーだけに表示",error_no_default_username:'デフォルトの組織が設定されていません。"SFDX: デフォルトのスクラッチ組織を作成" または "SFDX: 組織を認証" を実行し組織を設定してください。',channel_name:"Salesforce CLI",channel_starting_message:"開始しています: ",channel_end_with_exit_code:"が終了コード %s で終了しました。",channel_end_with_sfdx_not_found:"Salesforce CLI がインストールされていません。https://developer.salesforce.com/tools/sfdxcli からインストールしてください。",channel_end_with_error:"がエラーで終了しました。%s",channel_end:"が終了しました。",predicates_no_folder_opened_text:"フォルダが開かれていません。VS Code で Salesforce DX 形式のプロジェクトを開いてください。",predicates_no_sfdx_project_found_text:"開かれたプロジェクトのルートディレクトリに sfdx-project.json ファイルが見つかりませんでした。VS Code で Salesforce DX 形式のプロジェクトを開いてください。"}},19:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(20);t.BASE_FILE_EXTENSION=o.BASE_FILE_EXTENSION,t.BASE_FILE_NAME=o.BASE_FILE_NAME,t.DEFAULT_LOCALE=o.DEFAULT_LOCALE,t.Localization=o.Localization,t.Message=o.Message,t.MISSING_LABEL_MSG=o.MISSING_LABEL_MSG},20:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(5);t.BASE_FILE_NAME="i18n",t.BASE_FILE_EXTENSION="js",t.DEFAULT_LOCALE="en",t.MISSING_LABEL_MSG="!!! MISSING LABEL !!!";t.Localization=class{constructor(e){this.delegate=e}localize(e,...t){return this.delegate.localize(e,...t)}};t.Message=class{constructor(e,t){this.messages=e,this.delegate=t}localize(e,...n){let i=this.getLabel(e);if(!i)return console.warn("Missing label for key: "+e),i=`${t.MISSING_LABEL_MSG} ${e}`,n.length>=1&&n.forEach(e=>{i+=` (${e})`}),i;if(n.length>=1){const t=i.split("%s").length-1;return n.length!==t&&console.log(`Arguments do not match for label '${e}', got ${n.length} but want ${t}`),n.unshift(i),o.format.apply(o,n)}return i}getLabel(e){return this.messages[e]?this.messages[e]:this.delegate?this.delegate.messages[e]:void 0}}},33:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(36);t.ChannelService=o.ChannelService;const i=n(87);t.NotificationService=i.NotificationService,t.notificationService=i.NotificationService.getInstance();var s=n(88);t.ProgressNotification=s.ProgressNotification;var r=n(37);t.TraceFlags=r.TraceFlags},34:function(e,t,n){var o={"./":0,"./i18n":7,"./i18n.ja":11,"./i18n.ja.ts":11,"./i18n.ts":7,"./index":0,"./index.ts":0};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=s,e.exports=i,i.id=34},36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(85),i=n(4),s=n(0);class r{constructor(e){this.channel=e}static getInstance(e){if(!r.instances[e]){const t=i.window.createOutputChannel(e);r.instances[e]=new r(t)}return r.instances[e]}streamCommandOutput(e){this.streamCommandStartStop(e),e.stderrSubject.subscribe(e=>this.channel.append(o.default(e.toString()))),e.stdoutSubject.subscribe(e=>this.channel.append(o.default(e.toString())))}streamCommandStartStop(e){this.channel.append(s.nls.localize("channel_starting_message")),this.channel.appendLine(e.command.toString()),this.channel.appendLine(""),this.showCommandWithTimestamp(e.command.toCommand()),e.processExitSubject.subscribe(t=>{this.showCommandWithTimestamp(e.command.toCommand()),this.channel.append(" "),null!=t?this.channel.appendLine(s.nls.localize("channel_end_with_exit_code",t.toString())):this.channel.appendLine(s.nls.localize("channel_end")),this.channel.appendLine("")}),e.processErrorSubject.subscribe(t=>{this.showCommandWithTimestamp(e.command.toCommand()),this.channel.append(" "),void 0!==t?/sfdx.*ENOENT/.test(t.message)?this.channel.appendLine(s.nls.localize("channel_end_with_sfdx_not_found")):this.channel.appendLine(s.nls.localize("channel_end_with_error",t.message)):this.channel.appendLine(s.nls.localize("channel_end")),this.channel.appendLine("")})}showCommandWithTimestamp(e){this.channel.appendLine(this.getExecutionTime()+" "+e)}getExecutionTime(){const e=new Date;return`${this.ensureDoubleDigits(e.getHours())}:${this.ensureDoubleDigits(e.getMinutes())}:${this.ensureDoubleDigits(e.getSeconds())}.${e.getMilliseconds()}`}ensureDoubleDigits(e){return e<10?"0"+e.toString():e.toString()}showChannelOutput(){this.channel.show(!0)}appendLine(e){this.channel.appendLine(e)}}t.ChannelService=r,r.instances={}},37:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.TraceFlags=class{constructor(e){this.LOG_TIMER_LENGTH_MINUTES=30,this.MILLISECONDS_PER_MINUTE=6e4,this.connection=e}ensureTraceFlags(){return o(this,void 0,void 0,(function*(){const e=this.connection.getUsername();if(!e)throw new Error(i.nls.localize("error_no_default_username"));const t=(yield this.getUserIdOrThrow(e)).Id,n=yield this.getTraceFlagForUser(t);if(n){if(!(yield this.updateDebugLevel(n.DebugLevelId)))return!1;const e=this.calculateExpirationDate(n.ExpirationDate?new Date(n.ExpirationDate):new Date);return yield this.updateTraceFlag(n.Id,e)}{const e=yield this.createDebugLevel();if(!e)throw new Error(i.nls.localize("trace_flags_failed_to_create_debug_level"));const n=this.calculateExpirationDate(new Date);if(!(yield this.createTraceFlag(t,e,n)))return!1}return!0}))}updateDebugLevel(e){return o(this,void 0,void 0,(function*(){const t={Id:e,ApexCode:"FINEST",Visualforce:"FINER"};return(yield this.connection.tooling.update("DebugLevel",t)).success}))}createDebugLevel(){return o(this,void 0,void 0,(function*(){const e="ReplayDebuggerLevels"+Date.now(),t={developerName:e,MasterLabel:e,ApexCode:"FINEST",Visualforce:"FINER"},n=yield this.connection.tooling.create("DebugLevel",t);return n.success&&n.id?n.id:void 0}))}updateTraceFlag(e,t){return o(this,void 0,void 0,(function*(){const n={Id:e,StartDate:Date.now(),ExpirationDate:t.toUTCString()};return(yield this.connection.tooling.update("TraceFlag",n)).success}))}createTraceFlag(e,t,n){return o(this,void 0,void 0,(function*(){const o={tracedentityid:e,logtype:"developer_log",debuglevelid:t,StartDate:Date.now(),ExpirationDate:n.toUTCString()},i=yield this.connection.tooling.create("TraceFlag",o);return i.success&&i.id?i.id:void 0}))}isValidDateLength(e){const t=(new Date).valueOf();return e.getTime()-t>this.LOG_TIMER_LENGTH_MINUTES*this.MILLISECONDS_PER_MINUTE}calculateExpirationDate(e){return this.isValidDateLength(e)||(e=new Date(Date.now()+this.LOG_TIMER_LENGTH_MINUTES*this.MILLISECONDS_PER_MINUTE)),e}getUserIdOrThrow(e){return o(this,void 0,void 0,(function*(){const t=`SELECT id FROM User WHERE username='${e}'`,n=yield this.connection.query(t);if(0===n.totalSize)throw new Error(i.nls.localize("trace_flags_unknown_user"));return n.records[0]}))}getTraceFlagForUser(e){return o(this,void 0,void 0,(function*(){const t=`\n      SELECT id, logtype, startdate, expirationdate, debuglevelid, debuglevel.apexcode, debuglevel.visualforce\n      FROM TraceFlag\n      WHERE logtype='DEVELOPER_LOG' AND TracedEntityId='${e}'\n    `,n=yield this.connection.tooling.query(t);if(n.totalSize>0)return n.records[0]}))}}},4:function(e,t){e.exports=require("vscode")},5:function(e,t){e.exports=require("util")},7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messages={sfdx_cli_not_found:"Salesforce CLI is not installed. Install it from [%s](%s)",telemetry_legal_dialog_message:"You agree that Salesforce Extensions for VS Code may collect usage information, user environment, and crash reports for product improvements. Learn how to [opt out](%s).",telemetry_legal_dialog_button_text:"Read more",progress_notification_text:"Running %s",notification_successful_execution_text:"%s successfully ran",notification_canceled_execution_text:"%s was canceled",notification_unsuccessful_execution_text:"%s failed to run",notification_show_button_text:"Show",notification_show_in_status_bar_button_text:"Show Only in Status Bar",error_no_default_username:'No default org is set. Run "SFDX: Create a Default Scratch Org" or "SFDX: Authorize an Org" to set one.',channel_name:"Salesforce CLI",channel_starting_message:"Starting ",channel_end_with_exit_code:"ended with exit code %s",channel_end_with_sfdx_not_found:"Salesforce CLI is not installed. Install it from https://developer.salesforce.com/tools/sfdxcli",channel_end_with_error:"ended with error %s",channel_end:"ended",predicates_no_folder_opened_text:"No folder opened. Open a Salesforce DX project in VS Code.",predicates_no_sfdx_project_found_text:"No sfdx-project.json found in the root directory of your open project. Open a Salesforce DX project in VS Code."}},85:function(e,t,n){"use strict";const o=n(86),i=e=>"string"==typeof e?e.replace(o(),""):e;e.exports=i,e.exports.default=i},86:function(e,t,n){"use strict";e.exports=e=>{e=Object.assign({onlyFirst:!1},e);const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e.onlyFirst?void 0:"g")}},87:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),s=n(0);t.STATUS_BAR_MSG_TIMEOUT_MS=5e3;class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}showErrorMessage(e,...t){return i.window.showErrorMessage(e,...t)}showInformationMessage(e,...t){return i.window.showInformationMessage(e,...t)}showWarningMessage(e,...t){return i.window.showWarningMessage(e,...t)}showWarningModal(e,...t){return i.window.showWarningMessage(e,{modal:!0},...t)}reportCommandExecutionStatus(e,t,n){this.reportExecutionStatus(e.command.toString(),t,e.processExitSubject,n),this.reportExecutionError(e.command.toString(),e.processErrorSubject)}reportExecutionStatus(e,t,n,i){n.subscribe(n=>o(this,void 0,void 0,(function*(){void 0!==n&&"0"===String(n)?yield this.showSuccessfulExecution(e,t):null!==n&&this.showFailedExecution(e)}))),i&&i.onCancellationRequested(()=>{this.showCanceledExecution(e)})}showFailedExecution(e){this.showErrorMessage(s.nls.localize("notification_unsuccessful_execution_text",e))}showCanceledExecution(e){this.showWarningMessage(s.nls.localize("notification_canceled_execution_text",e))}showSuccessfulExecution(e,n){return o(this,void 0,void 0,(function*(){const o=s.nls.localize("notification_successful_execution_text",e);if(i.workspace.getConfiguration("salesforcedx-vscode-core").get("show-cli-success-msg",!0)){const e=s.nls.localize("notification_show_button_text"),t=s.nls.localize("notification_show_in_status_bar_button_text"),r=yield this.showInformationMessage(o,e,t);r&&(r===e&&n?n.showChannelOutput():r===t&&(yield i.workspace.getConfiguration("salesforcedx-vscode-core").update("show-cli-success-msg",!1)))}else i.window.setStatusBarMessage(o,t.STATUS_BAR_MSG_TIMEOUT_MS)}))}reportExecutionError(e,t){t.subscribe(t=>o(this,void 0,void 0,(function*(){this.showErrorMessage(s.nls.localize("notification_unsuccessful_execution_text",e))})))}}t.NotificationService=r},88:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),i=n(0);t.ProgressNotification=class{static show(e,t,n,s){return o.window.withProgress({title:i.nls.localize("progress_notification_text",e.command),location:n||o.ProgressLocation.Notification,cancellable:!0},(n,o)=>new Promise(i=>{o.onCancellationRequested(()=>(t.cancel(),i())),e.processExitSubject.subscribe(e=>i()),e.processErrorSubject.subscribe(e=>i()),s&&s.subscribe({next(e){n.report({increment:e})},complete(){n.report({increment:100}),i()}})}))}}}});
//# sourceMappingURL=index.js.map