"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const MODULE_IMPORT_REGEX = /(?:define\([(['|"][\w/]+['|"],?\s*)(?:\[((?:['|"][@\w-/]+['|"],?\s*)+)\])?,?\s*function/;
function collectImportLocations(code) {
    const matches = new RegExp(MODULE_IMPORT_REGEX).exec(code);
    // assert amd
    if (!matches || !matches.length) {
        return [];
    }
    const searchSubstring = matches[0];
    // format: `'x-bar', 'x-foo'`
    const rawImports = matches[1];
    if (!rawImports) {
        return [];
    }
    // split result: ["'x-bar', 'x-foo'"]
    const imports = rawImports.split(/,\s*/) || [];
    return imports.map((moduleImport) => {
        const normalizedName = moduleImport.replace(/'/g, "");
        const position = searchSubstring.indexOf(normalizedName);
        return {
            name: normalizedName,
            location: {
                start: position,
                length: normalizedName.length
            }
        };
    });
}
exports.collectImportLocations = collectImportLocations;
//# sourceMappingURL=import-location-collector.js.map